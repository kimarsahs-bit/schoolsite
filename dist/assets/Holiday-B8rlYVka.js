import{r as s,j as e,m as l,B as y,g as b}from"./index-vcAYm6vD.js";import{N as j}from"./Navigation-CkWS-LtT.js";import{I as N}from"./input-CVoIJ2zH.js";import{u as w}from"./useTranslation-FKcwN8er.js";import{S as v}from"./search-DaWYlKik.js";import{F as D}from"./filter-Cf7tfofv.js";import{C as x}from"./calendar-Cyjlwh6t.js";import{D as S}from"./download-DqcvXZsi.js";import"./button-variants-BtDv6DLU.js";import"./house-ClAQJ8-A.js";import"./users-DshTqfGB.js";import"./book-open-Cck4FFnk.js";import"./building-C8rHFNgL.js";import"./graduation-cap-P36faES5.js";import"./camera-Bc_Ov7XJ.js";import"./trophy-B-XvrowL.js";import"./chevron-down-D_kuZwQK.js";import"./globe-BWhPOJAF.js";import"./bell-D_AoMh8q.js";const P=()=>{w();const[i,u]=s.useState([]),[n,c]=s.useState([]),[p,m]=s.useState(!0),[r,h]=s.useState(""),[d,f]=s.useState("date");s.useEffect(()=>{(async()=>{try{m(!0);const a=await b("royal-academy-holidays",[]);u(a||[]),c(a||[])}catch(a){console.error("Error loading holiday data:",a)}finally{m(!1)}})()},[]),s.useEffect(()=>{let t=[...i];r&&(t=t.filter(a=>a.title.toLowerCase().includes(r.toLowerCase())||a.description.toLowerCase().includes(r.toLowerCase()))),d==="date"?t.sort((a,o)=>new Date(a.date).getTime()-new Date(o.date).getTime()):t.sort((a,o)=>a.title.localeCompare(o.title)),c(t)},[r,d,i]);const g=(t,a)=>{if(!t){alert("No file available for download");return}const o=document.createElement("a");o.href=t,o.download=a,document.body.appendChild(o),o.click(),document.body.removeChild(o)};return p?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gold mx-auto"}),e.jsx("p",{className:"mt-4 text-foreground",children:"Loading holidays..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/10",children:[e.jsx(j,{}),e.jsxs("div",{className:"container-wide px-4 sm:px-6 pt-24 sm:pt-28",children:[e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-10 sm:mb-16",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-heading font-bold mb-4 text-gradient-gold",children:"Holidays & Breaks"}),e.jsx("p",{className:"text-lg sm:text-xl text-muted-foreground max-w-3xl mx-auto",children:"View upcoming holidays, breaks, and important dates for the academic year"})]}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-card border border-border rounded-xl p-4 sm:p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(N,{placeholder:"Search holidays...",value:r,onChange:t=>h(t.target.value),className:"pl-10"})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("select",{value:d,onChange:t=>f(t.target.value),className:"border border-border rounded-md px-3 py-2 text-sm bg-background",children:[e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"title",children:"Sort by Title"})]})]})})]})}),n.length===0?e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[e.jsx(x,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No holidays found"}),e.jsx("p",{className:"text-muted-foreground",children:r?"Try adjusting your search":"No holidays have been added yet"})]}):e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(t=>e.jsxs("div",{className:"bg-card border border-border rounded-xl p-5 hover:shadow-lg transition-all duration-300 group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-gold/10 to-yellow-500/10 p-3 rounded-lg",children:e.jsx(x,{className:"h-6 w-6 text-gold"})}),e.jsx("span",{className:"bg-gold/10 text-gold text-xs font-semibold px-2.5 py-1 rounded-full",children:new Date(t.date).toLocaleDateString()})]}),e.jsx("h3",{className:"font-heading font-bold text-lg text-foreground mb-2 line-clamp-2",children:t.title}),e.jsx("p",{className:"text-muted-foreground text-sm mb-4 line-clamp-3",children:t.description}),e.jsx("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-4",children:e.jsxs("span",{children:["Added: ",new Date(t.uploadedAt).toLocaleDateString()]})}),t.fileName&&e.jsxs(y,{onClick:()=>g(t.fileUrl,t.fileName),className:"w-full bg-gradient-to-r from-gold to-yellow-500 text-white hover:from-gold/90 hover:to-yellow-500/90",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Download Notice"]})]},t.id))})]})]})};export{P as default};
