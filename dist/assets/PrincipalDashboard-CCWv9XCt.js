const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TeacherManager-z-JMrABU.js","assets/index-vcAYm6vD.js","assets/index-Cucspe7h.css","assets/button-variants-BtDv6DLU.js","assets/input-CVoIJ2zH.js","assets/textarea-B1JbTjEM.js","assets/select-BHw13X9t.js","assets/index-XrueaTAc.js","assets/chevron-down-D_kuZwQK.js","assets/alert-BYJYiRk6.js","assets/eye-off-DPvmRXZA.js","assets/eye-CF1wM1sA.js","assets/plus-CSXBcpgr.js","assets/square-pen-BVw1FIsV.js","assets/trash-2-04KiNg8K.js","assets/graduation-cap-P36faES5.js","assets/upload-DXS06rhK.js","assets/save-5ZuEQXRf.js","assets/HomepageEditor-ICJunXzN.js","assets/palette-DLYfSerB.js","assets/image-Bjk6VXQq.js","assets/AnnouncementManager-D2t3hAO-.js","assets/bell-D_AoMh8q.js","assets/clock-B1zj3MLd.js","assets/send-B5PAKnV6.js","assets/info-DY3hXfGU.js","assets/circle-alert-D_zFa0RS.js","assets/GalleryManagerSimple-C4LsGEX3.js","assets/AboutPageManager-H1bH5YNS.js","assets/users-DshTqfGB.js","assets/target-CpfdvN6q.js","assets/award-Bdl_Spfw.js","assets/heart-DhFCiI6H.js","assets/shield-BnzExLJS.js","assets/CourseManager-CUCOu89h.js","assets/arrow-left-DhQ25n61.js","assets/book-open-Cck4FFnk.js","assets/TopScorersManager-psaNHHXo.js","assets/calendar-Cyjlwh6t.js","assets/camera-Bc_Ov7XJ.js","assets/star-C15iVDB7.js","assets/medal-C43PF4zz.js","assets/crown-CU2Xsw6S.js","assets/AdmissionsPageManager--7iZcB3x.js","assets/file-text-v4HcC1Hx.js","assets/dollar-sign-B_CmodGE.js","assets/circle-help-BF4MRlrT.js","assets/phone-CcjDqeo4.js","assets/DocumentViewer-B-12NAZG.js","assets/zoom-out-Bm9_1osx.js","assets/download-DqcvXZsi.js","assets/copy-Bub14O3W.js","assets/share-2-6yjGy1yT.js","assets/BrandingManager-DomOpH5V.js","assets/label-CYmdnxUg.js","assets/EventsManager-KDc-foSp.js","assets/map-pin-WXVSP-9y.js","assets/CategoryManager-BvSZu2Hj.js","assets/AcademicsManager-DEnY1KTa.js","assets/cpu-Cj_wAsrn.js","assets/music-Cr7Fa-yb.js","assets/globe-BWhPOJAF.js","assets/microscope-Bwqtbt7P.js","assets/calculator-BkJF1TGh.js","assets/FacilitiesManager-DRBXzvuX.js","assets/dumbbell-lPHRCT9P.js","assets/theater-DQn9N5p0.js","assets/beaker-cgrZVnmB.js","assets/YearlyBookManager-BiH9AaW1.js","assets/booksHelper-CI04GjtC.js","assets/filter-Cf7tfofv.js","assets/external-link-D61icv-P.js","assets/ExamRoutineManager-C2safWu6.js","assets/checkbox-B49lUdcQ.js","assets/examRoutinesHelper-DJ1zbqdB.js","assets/chevron-left-CY1VkQV5.js","assets/chevron-right-A6kZWk8r.js","assets/TopScorersLearnMoreManager-Bhcd5OKt.js","assets/SyllabusManager-Ces3Addq.js","assets/card-yB6fowr0.js","assets/HolidayManager-D_nKeNs8.js"])))=>i.map(i=>d[i]);
import{c as ua,r as l,u as ha,s as de,g as B,j as e,m as x,X as j,S as Ge,R as S,k as Vs,a as C,l as Se,_ as k}from"./index-vcAYm6vD.js";import{B as i}from"./button-variants-BtDv6DLU.js";import{I as y}from"./input-CVoIJ2zH.js";import{T as pa}from"./textarea-B1JbTjEM.js";import{S as ga}from"./shield-BnzExLJS.js";import{S as ke}from"./search-DaWYlKik.js";import{B as Ce}from"./bell-D_AoMh8q.js";import{I as Gs}from"./image-Bjk6VXQq.js";import{S as Hs,M as Ys}from"./send-B5PAKnV6.js";import{E as He}from"./eye-CF1wM1sA.js";import{B as ba}from"./bus-BTxqp6us.js";import{S as me}from"./square-pen-BVw1FIsV.js";import{T as fa}from"./trash-2-04KiNg8K.js";import{L as ja}from"./log-out-mu1-Tcny.js";import{U as Ye}from"./users-DshTqfGB.js";import{B as De}from"./book-open-Cck4FFnk.js";import{C as Ae}from"./calendar-Cyjlwh6t.js";import{C as ya}from"./chart-column-DPWbzElM.js";import{S as qs}from"./star-C15iVDB7.js";import{M as Ks}from"./mail-MYJrtdEn.js";import{C as ms}from"./clock-B1zj3MLd.js";import{G as xs}from"./graduation-cap-P36faES5.js";import{T as Ws}from"./trophy-B-XvrowL.js";import{F as us}from"./file-text-v4HcC1Hx.js";import{U as qe}from"./user-plus-DbdgVC5U.js";import{D as va}from"./dollar-sign-B_CmodGE.js";import{P as Qs}from"./plus-CSXBcpgr.js";import{C as Xs}from"./copy-Bub14O3W.js";import{D as hs}from"./download-DqcvXZsi.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=ua("IdCard",[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]]),Na=l.lazy(()=>k(()=>import("./TeacherManager-z-JMrABU.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),wa=l.lazy(()=>k(()=>import("./HomepageEditor-ICJunXzN.js"),__vite__mapDeps([18,1,2,4,5,6,7,8,9,10,11,17,13,19,20,16,12,14]))),Sa=l.lazy(()=>k(()=>import("./AnnouncementManager-D2t3hAO-.js"),__vite__mapDeps([21,1,2,4,5,6,7,8,9,10,11,12,17,22,23,24,13,14,25,26]))),ka=l.lazy(()=>k(()=>import("./GalleryManagerSimple-C4LsGEX3.js"),__vite__mapDeps([27,1,2]))),Ca=l.lazy(()=>k(()=>import("./AboutPageManager-H1bH5YNS.js"),__vite__mapDeps([28,1,2,3,4,5,9,10,11,17,13,29,30,31,32,33,12]))),Da=l.lazy(()=>k(()=>import("./CourseManager-CUCOu89h.js"),__vite__mapDeps([34,1,2,4,5,35,12,36,13,14,17]))),Aa=l.lazy(()=>k(()=>import("./TopScorersManager-psaNHHXo.js"),__vite__mapDeps([37,1,2,4,5,29,36,38,12,13,14,39,17,40,31,41,42]))),Ia=l.lazy(()=>k(()=>import("./AdmissionsPageManager--7iZcB3x.js"),__vite__mapDeps([43,1,2,3,4,5,17,31,44,36,38,45,15,46,47,14,12,16]))),Pa=l.lazy(()=>k(()=>import("./DocumentViewer-B-12NAZG.js"),__vite__mapDeps([48,1,2,3,49,50,51,52]))),Ta=l.lazy(()=>k(()=>import("./BrandingManager-DomOpH5V.js"),__vite__mapDeps([53,1,2,3,4,54,5]))),Ra=l.lazy(()=>k(()=>import("./EventsManager-KDc-foSp.js"),__vite__mapDeps([55,1,2,4,5,6,7,8,9,12,16,17,38,23,56,29,11,13,14]))),Ea=l.lazy(()=>k(()=>import("./CategoryManager-BvSZu2Hj.js"),__vite__mapDeps([57,1,2,4,9,12,17,13,14]))),La=l.lazy(()=>k(()=>import("./AcademicsManager-DEnY1KTa.js"),__vite__mapDeps([58,1,2,3,4,5,12,29,59,60,19,61,62,63,13,14,17]))),Ma=l.lazy(()=>k(()=>import("./FacilitiesManager-DRBXzvuX.js"),__vite__mapDeps([64,1,2,3,4,5,12,65,32,59,66,67,36,13,14,17]))),Ba=l.lazy(()=>k(()=>import("./YearlyBookManager-BiH9AaW1.js"),__vite__mapDeps([68,1,2,3,4,5,6,7,8,9,69,10,11,12,70,16,17,36,13,14,38,71]))),za=l.lazy(()=>k(()=>import("./ExamRoutineManager-C2safWu6.js"),__vite__mapDeps([72,1,2,3,4,5,6,7,8,73,9,74,38,12,26,13,14,17,75,76]))),_a=l.lazy(()=>k(()=>import("./TopScorersLearnMoreManager-Bhcd5OKt.js"),__vite__mapDeps([77,1,2,4,5,17,12,14]))),$a=l.lazy(()=>k(()=>import("./SyllabusManager-Ces3Addq.js"),__vite__mapDeps([78,1,2,4,5,6,7,8,79,54,16,36,50,14]))),Fa=l.lazy(()=>k(()=>import("./HolidayManager-D_nKeNs8.js"),__vite__mapDeps([80,1,2,4,5,79,54,16,38,50,14]))),Sr=()=>{const[W,ps]=l.useState(""),[p,m]=l.useState(()=>sessionStorage.getItem("principalActiveSection")||"dashboard"),[h,Y]=l.useState({fullName:"",email:"",subject:"",employeeId:"",phone:"",assignedClass:"",assignedSection:"",password:"",sendCredentials:!1}),[R,X]=l.useState([]),[gs,Zs]=l.useState(""),[Ke,et]=l.useState(""),[bs,st]=l.useState(""),[We,Ie]=l.useState(!0),[z,ue]=l.useState([]),[Pe,tt]=l.useState(""),[E,Z]=l.useState([]),[Te,he]=l.useState({show:!1,admissionId:null,studentName:""}),[fs,Qe]=l.useState(!1),[Xe,J]=l.useState({show:!1,url:"",name:""}),[w,ie]=l.useState("1"),[A,at]=l.useState("A"),[Oa,Ua]=l.useState([]),[v,Q]=l.useState(null),[rt,pe]=l.useState(!1),ge=ha(),[Re,ee]=l.useState([]),[js,lt]=l.useState(""),[_,be]=l.useState({monthly:5e3,yearly:5e4}),[ot,ys]=l.useState(!0),[vs,it]=l.useState(null),[Ze,nt]=l.useState(""),[es,ct]=l.useState(""),[b,L]=l.useState(null),[Ee,ss]=l.useState(!1),[se,te]=l.useState([]),[Ns,dt]=l.useState(!1),[Le,ws]=l.useState([]),[ae,mt]=l.useState(null),[ne,fe]=l.useState(""),[Me,je]=l.useState([null,null,null,null]),[xt,Be]=l.useState(!1),[g,$]=l.useState({studentId:"",type:"good",message:"",subject:"",images:[]}),[V,ts]=l.useState({class:"",section:"",roll:""}),[F,ut]=l.useState([]),[ht,pt]=l.useState([]),[gt,bt]=l.useState([]),[ft,Ss]=l.useState([]),[jt,yt]=l.useState([]),[vt,ks]=l.useState([]),[as,Cs]=l.useState(!1),[I,Ds]=l.useState({class:"",section:"",roll:"",studentId:""}),[rs,As]=l.useState([]),[f,Is]=l.useState(null),[N,re]=l.useState(null),[Nt,ye]=l.useState(!1),[ze,ce]=l.useState(""),[wt,_e]=l.useState(!1),[d,P]=l.useState({subject:"",message:"",targetType:"all",targetClass:"",targetSection:"",targetStudentId:"",photo1:"",photo2:""}),[St,Ps]=l.useState([]),[Ja,Va]=l.useState(!1),[Ga,Ha]=l.useState(null),[Ya,qa]=l.useState(!1),[kt,Ts]=l.useState(!1),[ls,Rs]=l.useState(null),[G,Es]=l.useState(null),[Ct,Ls]=l.useState(!1),[le,Ms]=l.useState([]),[q,$e]=l.useState(0),[O,Bs]=l.useState(null),Dt=s=>new Promise((t,a)=>{const r=new FileReader;r.readAsDataURL(s),r.onload=()=>t(r.result),r.onerror=o=>a(o)}),[At,zs]=l.useState(!1),[oe,_s]=l.useState([]),[K,Fe]=l.useState(0),[U,$s]=l.useState(null);l.useEffect(()=>{const s=(W||localStorage.getItem("principalEmail")||"principal.1025@gmail.com").toLowerCase(),t=de("royal-academy-bus-principal-messages",a=>{const r=Array.isArray(a)?a:[];ws(r.filter(o=>o.owner===s).sort((o,c)=>new Date(c.createdAt).getTime()-new Date(o.createdAt).getTime()))});return(async()=>{const a=await B("royal-academy-bus-principal-messages",[]),r=Array.isArray(a)?a:[];ws(r.filter(o=>o.owner===s).sort((o,c)=>new Date(c.createdAt).getTime()-new Date(o.createdAt).getTime()))})(),()=>t()},[W]);const It=s=>new Promise((t,a)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=a,r.readAsDataURL(s)}),[ve,os]=l.useState(null),Pt=async(s,t)=>{var o;const a=(o=s.target.files)==null?void 0:o[0];if(!a)return;const r=await It(a);je(c=>c.map((n,u)=>u===t?r:n))},Tt=async()=>{if(!ae||!ne.trim())return;const s=(W||localStorage.getItem("principalEmail")||"principal.1025@gmail.com").toLowerCase(),a=Le.filter(n=>n.busUserId===ae).sort((n,u)=>new Date(u.createdAt).getTime()-new Date(n.createdAt).getTime())[0],r={id:`BUSPRN${Date.now()}`,owner:s,busUserId:ae,busId:(a==null?void 0:a.busId)||"",from:"principal",type:"reply",text:ne.trim(),images:Me.filter(Boolean),createdAt:new Date().toISOString()},c=[...await B("royal-academy-bus-principal-messages",[])||[],r];await C("royal-academy-bus-principal-messages",c),fe(""),je([null,null,null,null]),Se.success("Reply sent")},Rt=async()=>{if(!(!ve||!ne.trim()))try{const t=(await B("royal-academy-bus-principal-messages",[])||[]).map(a=>a.id===ve?{...a,text:ne.trim(),images:Me.filter(Boolean)}:a);await C("royal-academy-bus-principal-messages",t),fe(""),je([null,null,null,null]),os(null),Se.success("Reply updated")}catch{Se.error("Failed to update reply")}},Et=async s=>{if(confirm("Are you sure you want to delete this reply?"))try{const a=(await B("royal-academy-bus-principal-messages",[])||[]).filter(r=>r.id!==s);await C("royal-academy-bus-principal-messages",a),Se.success("Reply deleted")}catch{Se.error("Failed to delete reply")}},Lt=s=>{os(s.id),fe(s.text),je(s.images&&s.images.length>0?[...s.images,null,null,null].slice(0,4):[null,null,null,null])},Fs=()=>{Ds({class:"",section:"",roll:"",studentId:""}),Is(null),As([])},Mt=()=>{Cs(!1),Fs()},Bt=s=>{Is(s)},Oe=(s,t)=>{Ds(a=>({...a,[s]:t}))},zt=async()=>{if(!h.fullName||!h.email||!h.subject||!h.assignedClass||!h.assignedSection){alert("Please fill all required fields");return}try{const s=h.employeeId||`TCH${Date.now().toString().slice(-6)}`,t=`${h.fullName.split(" ")[0].toLowerCase()}123`,a={id:s,name:h.fullName,email:h.email,subject:h.subject,employeeId:s,phone:h.phone,assignedClass:h.assignedClass,assignedSection:h.assignedSection,password:t,status:"active",joinDate:new Date().toISOString().split("T")[0],createdAt:new Date().toISOString()},r=await B("royal-academy-teachers",[]);await C("royal-academy-teachers",[...r,a]);const o=await B("royal-academy-auth-teachers",[]),c={...a,username:h.fullName,teacherId:s,type:"teacher"};await C("royal-academy-auth-teachers",[...o,c]),alert(`Teacher account created successfully!

Login Credentials:
Email: ${h.email}
Password: ${t}
Teacher ID: ${s}`),ee(n=>[...n,a]),m("manageteachers"),Y({fullName:"",email:"",subject:"",employeeId:"",phone:"",assignedClass:"",assignedSection:"",password:"",sendCredentials:!1})}catch(s){alert("Failed to create teacher account. Please try again."),console.error("[PrincipalDashboard] Error creating teacher:",s)}},_t=async()=>{if(!b)return;const s=Re.map(t=>t.id===b.id?b:t);ee(s),await C("royal-academy-teachers",s);try{const a=(await B("royal-academy-auth-teachers",[])||[]).map(r=>r.id===b.id||r.teacherId===b.id?{...r,username:b.name,name:b.name,email:b.email,subject:b.subject,phone:b.phone,assignedClass:b.assignedClass,assignedSection:b.assignedSection,status:b.status}:r);await C("royal-academy-auth-teachers",a)}catch(t){console.error("[PrincipalDashboard] Error updating auth teachers:",t)}L(null)},$t=async()=>{try{console.log("[PrincipalDashboard] Loading teachers from Supabase...");const s=await B("royal-academy-teachers",[]);console.log("[PrincipalDashboard] Loaded teachers:",s.length),ee(s)}catch(s){console.error("[PrincipalDashboard] Error loading teachers:",s),ee([])}},Ft=async s=>{const t=Re.map(a=>a.id===s?{...a,status:a.status==="active"?"banned":"active"}:a);ee(t),await C("royal-academy-teachers",t)},Ot=async s=>{if(!window.confirm("Are you sure you want to delete this teacher?"))return;const t=Re.filter(a=>a.id!==s);ee(t),await C("royal-academy-teachers",t);try{const r=(await B("royal-academy-auth-teachers",[])).filter(o=>o.id!==s&&o.teacherId!==s);await C("royal-academy-auth-teachers",r)}catch(a){console.error("[PrincipalDashboard] Error deleting from auth teachers:",a)}};l.useEffect(()=>{sessionStorage.setItem("principalActiveSection",p)},[p]),l.useEffect(()=>{if(!as)return;let s=[...F];if(I.studentId.trim()){const t=I.studentId.trim().toLowerCase();s=s.filter(a=>a.id&&a.id.toLowerCase().includes(t)||a.studentId&&a.studentId.toLowerCase().includes(t)||a.rollNumber&&a.rollNumber.toLowerCase().includes(t))}else if(I.class&&(s=s.filter(t=>(t.class||"").toString()===I.class)),I.section&&(s=s.filter(t=>(t.section||"").toString().toLowerCase()===I.section.toLowerCase())),I.roll){const t=I.roll.trim().toLowerCase();s=s.filter(a=>(a.rollNumber||"").toLowerCase().includes(t))}s.sort((t,a)=>(t.fullName||t.name||"").localeCompare(a.fullName||a.name||"")),As(s)},[as,I,F]),l.useEffect(()=>{const s=localStorage.getItem("principalAuth"),t=localStorage.getItem("principalEmail");if(console.log("Auth check:",{isAuth:s,email:t}),!s||s!=="true"){console.log("Not authenticated, setting default for testing"),localStorage.setItem("principalAuth","true"),localStorage.setItem("principalEmail","principal.1025@gmail.com"),ps("principal.1025@gmail.com");return}t&&ps(t);const a=localStorage.getItem("royal-academy-notifications");if(a){const we=JSON.parse(a).filter(ds=>ds.toType==="principal");te(we)}const r=localStorage.getItem("royal-academy-students");r&&ut(JSON.parse(r));const o=localStorage.getItem("royal-academy-fee-records");if(o)try{pt(JSON.parse(o))}catch(D){console.error("Failed to parse fee records",D)}const c=localStorage.getItem("royal-academy-attendance");if(c)try{bt(JSON.parse(c))}catch(D){console.error("Failed to parse attendance records",D)}const n=localStorage.getItem("royal-academy-student-reports");if(n)try{Ss(JSON.parse(n))}catch(D){console.error("Failed to parse student reports",D)}const u=localStorage.getItem("royal-academy-auth-students");if(u)try{yt(JSON.parse(u))}catch(D){console.error("Failed to parse auth student records",D)}const H=localStorage.getItem("royal-academy-principal-remarks");if(H)try{ks(JSON.parse(H))}catch(D){console.error("Failed to parse principal remarks",D)}const T=localStorage.getItem("royal-academy-student-notifications");if(T){const we=JSON.parse(T).filter(ds=>ds.senderId===W);Ps(we)}console.log("Authentication successful, email set:",t)},[]),l.useEffect(()=>{const s=t=>{const a=t.target;Ee&&!a.closest("[data-notification-container]")&&ss(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[Ee]);const is=async()=>{try{console.log("[PrincipalDashboard] Loading admissions directly from Supabase...");const{data:s,error:t}=await Vs.from("app_state").select("value").eq("key","royal-academy-admissions").maybeSingle();if(t){console.error("[PrincipalDashboard] Supabase error:",t),X([]);return}if(s&&s.value)try{const a=JSON.parse(s.value);console.log("[PrincipalDashboard] Raw Supabase data:",a),console.log("[PrincipalDashboard] Data type:",typeof a,"Is array:",Array.isArray(a));const r=Array.isArray(a)?a:[];console.log("[PrincipalDashboard] Safe admission data length:",r.length),r.length>0&&console.log("[PrincipalDashboard] First admission:",r[0]),X(r)}catch(a){console.error("[PrincipalDashboard] Error parsing Supabase data:",a),X([])}else console.log("[PrincipalDashboard] No admission data found in Supabase"),X([])}catch(s){console.error("[PrincipalDashboard] Error loading admissions from Supabase:",s),X([])}},Ut=async()=>{try{const s=await B("royal-academy-admission-status",!0);Ie(s)}catch(s){console.error("[PrincipalDashboard] Error loading admission status:",s),Ie(!0)}},Jt=async()=>{try{const s=!We;Ie(s),await C("royal-academy-admission-status",s),alert(`Admissions are now ${s?"OPEN":"CLOSED"}`)}catch(s){console.error("[PrincipalDashboard] Error toggling admission status:",s),alert("Failed to update admission status")}},Vt=async()=>{try{const s=await B("royal-academy-contact-forms",[]);ue(s)}catch(s){console.error("[PrincipalDashboard] Error loading contact forms:",s),ue([])}},Os=async s=>{try{console.log("[PrincipalDashboard] Deleting admission:",s);const a=(Array.isArray(R)?R:[]).filter(r=>r.id!==s);X(a),await C("royal-academy-admissions",a),alert("Admission record deleted successfully!")}catch(t){console.error("[PrincipalDashboard] Error deleting admission:",t),alert("Failed to delete admission record")}},Gt=(s,t)=>{if(localStorage.getItem("never-ask-delete-admission")==="true"){Os(s);return}he({show:!0,admissionId:s,studentName:t})},Ht=async()=>{Te.admissionId&&(fs&&localStorage.setItem("never-ask-delete-admission","true"),await Os(Te.admissionId),he({show:!1,admissionId:null,studentName:""}),Qe(!1))},Yt=async s=>{try{const t=z.filter(a=>a.id!==s);ue(t),await C("royal-academy-contact-forms",t),Z(E.filter(a=>a!==s)),alert("Contact form deleted successfully!")}catch(t){console.error("[PrincipalDashboard] Error deleting contact form:",t),alert("Failed to delete contact form")}},qt=async()=>{if(E.length!==0&&window.confirm(`Are you sure you want to delete ${E.length} contact form(s)?`))try{const s=z.filter(t=>!E.includes(t.id));ue(s),await C("royal-academy-contact-forms",s),Z([]),alert(`${E.length} contact form(s) deleted successfully!`)}catch(s){console.error("[PrincipalDashboard] Error deleting selected contact forms:",s),alert("Failed to delete selected contact forms")}};l.useEffect(()=>{(async()=>{try{await is(),await $t(),await Ut(),await Vt();const n=await B("royal-academy-pricing",{monthly:5e3,yearly:5e4});be(n),ys(!1)}catch(n){console.error("[PrincipalDashboard] Error initializing dashboard:",n),it("Failed to load dashboard data"),ys(!1)}})();const t=de("royal-academy-admissions",n=>{console.log("[PrincipalDashboard] Received realtime admissions update"),console.log("[PrincipalDashboard] New data:",n);const u=Array.isArray(n)?n:[];console.log("[PrincipalDashboard] Setting safe data length:",u.length),X(u)}),a=de("royal-academy-teachers",n=>{console.log("[PrincipalDashboard] Received realtime teachers update"),ee(n)}),r=de("royal-academy-admission-status",n=>{console.log("[PrincipalDashboard] Received realtime admission status update:",n),Ie(n)}),o=de("royal-academy-contact-forms",n=>{console.log("[PrincipalDashboard] Received realtime contact forms update"),ue(n||[])}),c=de("royal-academy-student-reports",n=>{console.log("[PrincipalDashboard] Received realtime student reports update"),Ss(n||[])});return()=>{t(),a(),r(),o(),c()}},[]),l.useEffect(()=>{p==="admissions"&&is()},[p]);const Kt=()=>{localStorage.removeItem("principalAuth"),localStorage.removeItem("principalEmail"),ge("/")},Wt=s=>{const t=se.map(o=>o.id===s?{...o,status:"read"}:o);te(t);const r=JSON.parse(localStorage.getItem("royal-academy-notifications")||"[]").map(o=>o.id===s?{...o,status:"read"}:o);localStorage.setItem("royal-academy-notifications",JSON.stringify(r))},Qt=()=>{const s=se.map(r=>({...r,status:"read"}));te(s);const a=JSON.parse(localStorage.getItem("royal-academy-notifications")||"[]").map(r=>s.find(c=>c.id===r.id)||r);localStorage.setItem("royal-academy-notifications",JSON.stringify(a))},Xt=s=>{const t=se.filter(o=>o.id!==s);te(t);const r=JSON.parse(localStorage.getItem("royal-academy-notifications")||"[]").filter(o=>o.id!==s);localStorage.setItem("royal-academy-notifications",JSON.stringify(r))},Zt=()=>{if(!g.studentId||!g.message){alert("Please select a student and enter a message");return}const s=F.find(o=>o.id===g.studentId);if(!s){alert("Student not found");return}const t={id:Date.now().toString(),studentId:s.id,studentName:s.name||s.fullName,class:s.class,section:s.section,type:g.type,message:g.message,subject:g.subject||"General",principalId:W,principalName:"Principal",createdAt:new Date().toISOString(),images:g.images||[]},r=[...JSON.parse(localStorage.getItem("royal-academy-principal-remarks")||"[]"),t];localStorage.setItem("royal-academy-principal-remarks",JSON.stringify(r)),ks(r),C("royal-academy-principal-remarks",r).catch(o=>console.error("Failed to save principal remarks to Supabase",o)),alert(`${g.type==="good"?"Good":"Bad"} remark sent to ${s.name} successfully!`),$({studentId:"",type:"good",message:"",subject:"",images:[]}),Be(!1)},ea=()=>{if(!N||!ze){alert("Please enter a reply message");return}const s={id:Date.now().toString(),fromId:W,fromName:"Principal",fromType:"principal",message:ze,createdAt:new Date().toISOString()},t={...N,replies:[...N.replies||[],s]},r=JSON.parse(localStorage.getItem("royal-academy-notifications")||"[]").map(o=>o.id===N.id?t:o);localStorage.setItem("royal-academy-notifications",JSON.stringify(r)),te(o=>o.map(c=>c.id===N.id?t:c)),alert("Reply sent successfully!"),ce(""),ye(!1),re(null)},sa=()=>{if(!d.subject||!d.message){alert("Please fill in both subject and message");return}if(d.targetType==="class"&&!d.targetClass){alert("Please select a class");return}if(d.targetType==="section"&&(!d.targetClass||!d.targetSection)){alert("Please select both class and section");return}if(d.targetType==="student"&&!d.targetStudentId){alert("Please select a student");return}if(d.targetType==="student"&&!d.targetStudentId){alert("Please select a student");return}const s={id:Date.now().toString(),subject:d.subject,message:d.message,senderType:"principal",senderId:W,senderName:"Principal",targetType:d.targetType,targetClass:d.targetClass,targetSection:d.targetSection,targetStudentId:d.targetStudentId,photo1:d.photo1,photo2:d.photo2,createdAt:new Date().toISOString(),status:"unread"},a=[...JSON.parse(localStorage.getItem("royal-academy-student-notifications")||"[]"),s];localStorage.setItem("royal-academy-student-notifications",JSON.stringify(a));let r="";switch(d.targetType){case"all":r="all students";break;case"class":r=`Class ${d.targetClass}`;break;case"section":r=`Class ${d.targetClass}-${d.targetSection}`;break;case"student":const c=F.find(n=>n.id===d.targetStudentId);r=c?c.name:"selected student";break}alert(`Notification sent to ${r} successfully!
Subject: ${d.subject}`),P({subject:"",message:"",targetType:"all",targetClass:"",targetSection:"",targetStudentId:"",photo1:"",photo2:""});const o=[...St,s];Ps(o),_e(!1)},Ue=se.filter(s=>s.status==="unread").length,Us=s=>s&&(s.image||s.studentPhoto||s.photo||s.profilePhoto)||"",ta=s=>{if(!s)return[];if(s.remarks&&s.remarks.length>0)return s.remarks;const t=jt.find(a=>a.studentId===s.id||a.id===s.id||a.email===s.email||a.rollNumber===s.rollNumber||a.name===s.name||a.fullName===s.fullName);return t&&t.remarks?t.remarks:[]},aa=s=>s?vt.filter(t=>t.studentId===s.id):[],ra=s=>s?ft.filter(t=>t.studentId===s.id||t.studentName===s.name||t.studentName===s.fullName):[],la=s=>{if(!s)return{fees:[],pending:[],dueAmount:0};const t=ht.filter(o=>o.studentId===s.id||o.studentName===s.name||o.studentName===s.fullName),a=t.filter(o=>o.status!=="paid"),r=a.reduce((o,c)=>o+(c.amount||0),0);return{fees:t,pending:a,dueAmount:r}},oa=s=>{const t={present:0,absent:0,late:0,total:0};if(!s)return t;const a=new Date,r=a.getMonth(),o=a.getFullYear(),c={};return gt.forEach(n=>{var T;if(!n||!n.date)return;const u=new Date(n.date);if(isNaN(u.getTime())||u.getMonth()!==r||u.getFullYear()!==o||n.class!==(s.class||n.class)||n.section!==(s.section||n.section))return;const H=(T=n.students)==null?void 0:T.find(D=>D.studentId===s.id);H&&(c[n.date]=H.status)}),s.attendance&&Array.isArray(s.attendance)&&s.attendance.forEach(n=>{if(!n||!n.date)return;const u=new Date(n.date);isNaN(u.getTime())||u.getMonth()===r&&u.getFullYear()===o&&(c[n.date]=n.status)}),Object.values(c).forEach(n=>{n==="present"&&(t.present+=1),n==="absent"&&(t.absent+=1),n==="late"&&(t.late+=1)}),t.total=t.present+t.absent+t.late,t},ia=Array.from(new Set(F.map(s=>(s.class||"").toString()).filter(Boolean))).sort((s,t)=>s.localeCompare(t,void 0,{numeric:!0})),na=Array.from(new Set(F.filter(s=>!I.class||(s.class||"").toString()===I.class).map(s=>(s.section||"").toString()).filter(Boolean))).sort(),ca=l.useMemo(()=>Array.from({length:12},(s,t)=>(t+1).toString()),[]),da=l.useMemo(()=>["A","B","C","D","E"],[]),Ne=l.useMemo(()=>F.filter(s=>{const t=V.class?(s.class||"").toString()===V.class:!0,a=V.section?(s.section||"").toString().toUpperCase()===V.section.toUpperCase():!0,r=(s.rollNumber??s.roll??"").toString(),o=V.roll?r===V.roll:!0;return t&&a&&o}),[F,V]),ma=[{icon:Ye,label:"Total Students",value:"1,247",change:"+12 this month"},{icon:De,label:"Active Courses",value:"45",change:"+3 new courses"},{icon:Ae,label:"Upcoming Events",value:"8",change:"Next: Science Fair"},{icon:ya,label:"Average Grade",value:"87.5%",change:"+2.3% improvement"}],M=f?oa(f):null,Je=f?ta(f):[],ns=f?aa(f):[],cs=f?ra(f):[],Ve=f?la(f):{pending:[],dueAmount:0},xa=[{icon:Ce,label:"Send Announcement",color:"from-blue-600 to-purple-600",action:()=>m("announcements")},{icon:Ys,label:"Notify Students",color:"from-blue-600 to-purple-600",action:()=>_e(!0)},{icon:qs,label:"Principal Remarks",color:"from-sky-400 to-purple-600",action:()=>Be(!0)},{icon:ke,label:"Student Lookup",color:"from-blue-600 to-purple-600",action:()=>Cs(!0)},{icon:Ks,label:"See Contact Form",color:"from-sky-400 to-purple-600",action:()=>m("contactforms")},{icon:De,label:"Yearly Books",color:"from-blue-600 to-purple-600",action:()=>m("booksmanager")},{icon:Ae,label:"Exam Routine",color:"from-sky-400 to-purple-600",action:()=>m("examroutine")},{icon:Ge,label:"Branding & Logo",color:"from-blue-600 to-purple-600",action:()=>m("branding")},{icon:ms,label:"Manage Timetable",color:"from-sky-400 to-purple-600",action:()=>m("timetable")},{icon:xs,label:"Edit Admissions Page",color:"from-blue-600 to-purple-600",action:()=>m("admissionsmanager")},{icon:Ws,label:"Top Scorers Content",color:"from-sky-400 to-purple-600",action:()=>m("topscorerslearnmore")},{icon:Ae,label:"Manage Holidays",color:"from-blue-600 to-purple-600",action:()=>m("holidays")},{icon:xe,label:"Create Bus ID",color:"from-blue-600 to-purple-600",action:()=>ge("/create-bus-id")},{icon:xe,label:"Manage Bus IDs",color:"from-sky-400 to-purple-600",action:()=>ge("/manage-bus-id")}],Js=Re.filter(s=>Ze?(s.subject||"").toLowerCase()===Ze.toLowerCase():!0).filter(s=>es?s.status===es:!0).filter(s=>{const t=js.trim().toLowerCase();return t?(s.name||"").toLowerCase().includes(t)||(s.email||"").toLowerCase().includes(t)||(s.subject||"").toLowerCase().includes(t):!0});return l.useEffect(()=>{if(!g.studentId)return;Ne.some(t=>t.id===g.studentId)||$(t=>({...t,studentId:""}))},[Ne,g.studentId]),ot?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted/20 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading Principal Dashboard..."})]})}):vs?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted/20 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 mb-4",children:"⚠️ Error"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:vs}),e.jsx(i,{onClick:()=>window.location.reload(),children:"Reload Page"})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted/20 scroll-smooth overflow-x-hidden",style:{scrollBehavior:"smooth"},children:[e.jsx(x.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-card/95 backdrop-blur-md border-b border-border/50 sticky top-0 z-50 will-change-transform",children:e.jsx("div",{className:"container-wide py-3 sm:py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gradient-to-r from-royal to-gold flex items-center justify-center",children:e.jsx(ga,{className:"h-4 w-4 sm:h-5 sm:w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg sm:text-xl font-heading font-bold text-foreground",children:"Principal Dashboard"}),e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground hidden sm:block",children:["Welcome back, ",W]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsxs("div",{className:"relative hidden md:block",children:[e.jsx(ke,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(y,{placeholder:"Search...",className:"pl-10 w-48 lg:w-64"})]}),e.jsxs("div",{className:"relative","data-notification-container":!0,children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>ss(!Ee),className:"relative p-2 bg-gradient-to-r from-blue-600/20 to-cyan-500/20 hover:from-blue-600/40 hover:to-cyan-500/40 border-blue-500/40 hover:border-blue-400/60 transition-all shadow-lg shadow-blue-500/20 hover:shadow-blue-500/40",children:[e.jsx(Ce,{className:"h-4 w-4 text-blue-400 hover:text-cyan-300 transition-colors drop-shadow-lg"}),Ue>0&&e.jsx("span",{className:"absolute -top-1 -right-1 h-5 w-5 bg-gradient-to-br from-red-500 to-red-600 text-white text-xs rounded-full flex items-center justify-center font-bold shadow-lg shadow-red-500/50 animate-pulse",children:Ue>9?"9+":Ue})]}),Ee&&e.jsxs("div",{className:`z-[100] rounded-xl border border-border bg-card shadow-2xl
                  max-h-[70vh] overflow-y-auto p-3
                  fixed top-[56px] left-2 right-2 w-auto
                  md:absolute md:top-full md:right-0 md:left-auto md:w-96 md:mt-2 md:p-0`,children:[e.jsx("div",{className:"p-4 border-b border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Notifications"}),Ue>0&&e.jsx(i,{variant:"ghost",size:"sm",onClick:Qt,className:"text-xs",children:"Mark all as read"})]})}),e.jsx("div",{className:"max-h-80 overflow-y-auto scroll-smooth",children:se.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No notifications"}):se.map(s=>e.jsx("div",{className:`p-4 border-b border-border hover:bg-muted/50 transition-colors ${s.status==="unread"?"bg-muted/20":""}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:`text-sm font-medium ${s.status==="unread"?"text-foreground":"text-muted-foreground"}`,children:s.subject}),s.status==="unread"&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),e.jsxs("p",{className:"text-xs text-blue-400 mb-1",children:["From: ",s.fromName," (",s.fromType,")"]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:s.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString()}),(s.photo1||s.photo2)&&e.jsxs("div",{className:"flex gap-2 mt-2",children:[s.photo1&&e.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>J({show:!0,url:s.photo1,name:`${s.subject} - Photo 1`}),children:[e.jsx("img",{src:s.photo1,alt:"Photo 1",className:"w-12 h-12 object-cover rounded border border-border/30 group-hover:opacity-80 transition-opacity"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 rounded transition-colors flex items-center justify-center",children:e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"bg-white/90 rounded-full p-1",children:e.jsx(Gs,{className:"h-3 w-3 text-gray-800"})})})})]}),s.photo2&&e.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>J({show:!0,url:s.photo2,name:`${s.subject} - Photo 2`}),children:[e.jsx("img",{src:s.photo2,alt:"Photo 2",className:"w-12 h-12 object-cover rounded border border-border/30 group-hover:opacity-80 transition-opacity"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 rounded transition-colors flex items-center justify-center",children:e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"bg-white/90 rounded-full p-1",children:e.jsx(Gs,{className:"h-3 w-3 text-gray-800"})})})})]})]}),s.replies&&s.replies.length>0&&e.jsxs("p",{className:"text-xs text-green-400 mt-1",children:[s.replies.length," reply(ies)"]})]}),e.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{re(s),ye(!0)},className:"h-6 w-6 p-0 text-blue-600 hover:text-blue-700",title:"Reply",children:e.jsx(Hs,{className:"h-3 w-3"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{re(s),ce(""),ye(!0)},className:"h-6 w-6 p-0 text-green-600 hover:text-green-700",title:"View & Reply",children:e.jsx(Ys,{className:"h-3 w-3"})}),s.status==="unread"&&e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>Wt(s.id),className:"h-6 w-6 p-0",title:"Mark as read",children:e.jsx(He,{className:"h-3 w-3"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>Xt(s.id),className:"h-6 w-6 p-0 text-red-600 hover:text-red-700",title:"Delete",children:e.jsx(j,{className:"h-3 w-3"})})]})]})},s.id))}),se.length>0&&e.jsx("div",{className:"p-3 border-t border-border",children:e.jsx(i,{variant:"outline",size:"sm",className:"w-full text-xs",onClick:()=>ss(!1),children:"View All Notifications"})})]})]}),e.jsxs("div",{className:"relative","data-bus-inbox-container":!0,children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>dt(!Ns),className:"relative p-2 bg-gradient-to-r from-purple-600/20 to-blue-600/20 hover:from-purple-600/40 hover:to-blue-600/40 border-purple-500/40 hover:border-purple-400/60 transition-all shadow-lg shadow-purple-500/20 hover:shadow-purple-500/40",children:e.jsx(ba,{className:"h-4 w-4 text-purple-400 hover:text-purple-300 transition-colors drop-shadow-lg"})}),Ns&&e.jsxs("div",{className:`z-[100] rounded-xl border border-border bg-card shadow-2xl overflow-hidden
                  fixed top-[56px] left-2 right-2 w-auto max-h-[75vh]
                  md:absolute md:top-full md:right-0 md:left-auto md:w-[720px] md:mt-2`,children:[e.jsx("div",{className:"p-4 border-b border-border flex items-center justify-between",children:e.jsx("h3",{className:"font-semibold text-foreground",children:"Bus Messages"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3",children:[e.jsx("div",{className:"md:col-span-1 border-r border-border max-h-[60vh] overflow-auto scroll-smooth",children:Le.length===0?e.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"No messages"}):Le.reduce((s,t)=>(s.find(a=>a.busUserId===t.busUserId)||s.push(t),s),[]).map(s=>e.jsxs("button",{onClick:()=>mt(s.busUserId),className:`w-full text-left p-3 border-b border-border hover:bg-muted/50 ${ae===s.busUserId?"bg-muted/30":""}`,children:[e.jsx("div",{className:"text-sm font-medium",children:s.driverName||"Driver"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Bus ID: ",s.busId]}),e.jsx("div",{className:"text-[10px] text-muted-foreground",children:new Date(s.createdAt).toLocaleString()})]},s.busUserId))}),e.jsx("div",{className:"md:col-span-2 max-h-[60vh] overflow-auto scroll-smooth p-3 space-y-2",children:ae?Le.filter(s=>s.busUserId===ae).sort((s,t)=>new Date(s.createdAt).getTime()-new Date(t.createdAt).getTime()).map(s=>e.jsxs("div",{className:`border rounded p-2 ${s.from==="principal"?"bg-muted/20":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.from==="bus"?s.driverName||"Driver":"You"," • ",new Date(s.createdAt).toLocaleString()]}),s.from==="principal"&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx(i,{size:"sm",variant:"ghost",className:"h-5 w-5 p-0",onClick:()=>Lt(s),children:e.jsx(me,{className:"h-3 w-3"})}),e.jsx(i,{size:"sm",variant:"ghost",className:"h-5 w-5 p-0 text-red-600",onClick:()=>Et(s.id),children:e.jsx(fa,{className:"h-3 w-3"})})]})]}),e.jsx("div",{className:"text-sm",children:s.text}),e.jsx("div",{className:"flex gap-2 mt-1 flex-wrap",children:(s.images||[]).map((t,a)=>e.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>J({show:!0,url:t,name:`Bus Message Photo ${a+1}`}),children:[e.jsx("img",{src:t,className:"h-14 w-14 object-cover rounded border"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded",children:e.jsx(He,{className:"h-4 w-4 text-white"})})]},a))})]},s.id)):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Select a driver to view messages"})})]}),e.jsx("div",{className:"p-3 border-t border-border",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(pa,{placeholder:"Type your reply to driver...",value:ne,onChange:s=>fe(s.target.value)}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[0,1,2,3].map(s=>e.jsxs("div",{children:[e.jsx(y,{type:"file",accept:"image/*",onChange:t=>Pt(t,s)}),Me[s]&&e.jsx("img",{src:Me[s],className:"mt-1 h-14 w-14 object-cover rounded border"})]},s))}),e.jsxs("div",{className:"flex justify-end gap-2",children:[ve&&e.jsx(i,{onClick:()=>{os(null),fe(""),je([null,null,null,null])},variant:"outline",children:"Cancel"}),e.jsxs(i,{onClick:ve?Rt:Tt,disabled:!ae||!ne.trim(),className:"text-white bg-gradient-to-r from-gold to-yellow-500",children:[ve?"Update":"Send"," Reply"]})]})]})})]})]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:Kt,className:"flex items-center space-x-1 sm:space-x-2 px-2 sm:px-3 bg-gradient-to-r from-indigo-600/20 to-purple-600/20 hover:from-indigo-600/40 hover:to-purple-600/40 border-indigo-500/40 hover:border-indigo-400/60 transition-all shadow-lg shadow-indigo-500/20 hover:shadow-indigo-500/40",children:[e.jsx(ja,{className:"h-3 w-3 sm:h-4 sm:w-4 text-indigo-400 hover:text-purple-300 transition-colors drop-shadow-lg"}),e.jsx("span",{className:"hidden sm:inline text-indigo-300",children:"Logout"})]})]})]})})}),e.jsxs("div",{className:"container-wide py-4 sm:py-8 px-4 sm:px-6 will-change-auto",style:{willChange:"auto"},children:[p==="dashboard"&&e.jsxs(e.Fragment,{children:[e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6 mb-6 sm:mb-8",children:ma.map((s,t)=>e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1+t*.1},className:"bg-card/95 backdrop-blur-md rounded-lg sm:rounded-xl p-3 sm:p-6 border border-border/50 hover:shadow-lg transition-all duration-200 will-change-transform",children:[e.jsx("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:e.jsx("div",{className:"w-8 h-8 sm:w-12 sm:h-12 rounded-lg bg-gradient-to-r from-royal/20 to-gold/20 flex items-center justify-center",children:e.jsx(s.icon,{className:"h-4 w-4 sm:h-6 sm:w-6 text-royal"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-foreground mb-1",children:s.value}),e.jsx("p",{className:"text-xs sm:text-sm font-medium text-foreground mb-1",children:s.label}),e.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:s.change})]})]},s.label))}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-8 will-change-auto",style:{willChange:"auto"},children:e.jsx(x.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-lg lg:rounded-xl p-4 sm:p-6 border border-gold/40 will-change-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-heading font-bold bg-gradient-to-r from-gold via-yellow-400 to-sky-400 bg-clip-text text-transparent flex-1",children:"Quick Actions"}),e.jsxs("div",{className:"relative",children:[e.jsx(ke,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search actions...",value:bs,onChange:s=>st(s.target.value),className:"pl-10 pr-3 py-2 text-sm bg-background/50 border border-border/50 rounded-lg focus:outline-none focus:border-blue-500 focus:bg-background transition-all"})]})]}),e.jsx("div",{className:"rounded-md overflow-hidden bg-border/30 sm:bg-transparent",children:e.jsx("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-4 md:grid-cols-4 lg:grid-cols-2 xl:grid-cols-5 sm:gap-2 lg:gap-2",children:xa.filter(s=>s.label.toLowerCase().includes(bs.toLowerCase())).map((s,t)=>e.jsx(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4+t*.05},onClick:s.action,className:"p-3 sm:p-4 lg:p-4 rounded-lg bg-card/80 border border-border/30 hover:bg-card/95 transition-shadow duration-200 cursor-pointer flex flex-col items-center justify-center gap-3 shadow-sm hover:shadow-md",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center w-full",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 rounded-full bg-gradient-to-br from-royal/10 to-sky-200/5 flex items-center justify-center flex-shrink-0 shadow-sm",children:e.jsx(s.icon,{className:"h-5 w-5 sm:h-6 sm:w-6 lg:h-7 lg:w-7 text-gold"})}),e.jsx("div",{className:"flex-1 min-w-0 w-full",children:e.jsx("h3",{className:"font-semibold text-foreground text-sm sm:text-base lg:text-sm leading-tight text-center px-1 break-words",children:s.label})})]})},s.label))})})]})})}),e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-6 sm:mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-lg sm:rounded-xl p-4 sm:p-6 border border-border/50",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4 mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-base sm:text-lg font-heading font-bold text-foreground",children:"Content Management"}),e.jsx("input",{type:"text",placeholder:"Search features...",value:Ke,onChange:s=>et(s.target.value),className:"w-full sm:w-64 px-3 sm:px-4 py-2 sm:py-2.5 text-xs sm:text-sm bg-background border border-border/50 rounded-lg focus:outline-none focus:border-sky-400/50 focus:ring-1 focus:ring-sky-400/30 transition-all"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-6 gap-3 sm:gap-4",children:[{title:"Edit Homepage",desc:"Update main page content",icon:me,action:()=>m("homepage")},{title:"Manage Teachers",desc:"Add/edit teacher profiles",icon:Ye,action:()=>m("teachers")},{title:"Send Announcements",desc:"Create and manage announcements",icon:Ce,action:()=>m("announcements")},{title:"Edit Admissions Page",desc:"Update admissions content and requirements",icon:xs,action:()=>m("admissionsmanager")},{title:"Manage Events & News",desc:"Create and manage events",icon:Ae,action:()=>m("events")},{title:"Manage Categories",desc:"Create and manage event categories",icon:Ge,action:()=>m("categories")},{title:"Manage Courses",desc:"Add/edit academic programs",icon:De,action:()=>ge("/courses-management")},{title:"Update Gallery",desc:"Manage photo galleries",icon:He,action:()=>m("gallery")},{title:"Edit About Page",desc:"Update school information",icon:us,action:()=>m("about")},{title:"Academics Manager",desc:"Edit departments and achievements",icon:xs,action:()=>m("academicsmanager")},{title:"Facilities Manager",desc:"Edit facilities and campus stats",icon:Ge,action:()=>m("facilitiesmanager")},{title:"View Admissions",desc:"Review submitted applications",icon:us,action:()=>m("admissions")},{title:"Manage Top Scorers",desc:"Edit students, rankings, and categories",icon:Ws,action:()=>m("topscorers")},{title:"Yearly Books Manager",desc:"Manage recommended books for classes",icon:De,action:()=>m("booksmanager")},{title:"Upload Syllabus",desc:"Upload curriculum guides for classes 1-12",icon:De,action:()=>m("syllabus")},{title:"Create New Teacher ID",desc:"Generate teacher login credentials",icon:qe,action:()=>m("createteacherid")},{title:"Manage Teacher IDs",desc:"View and manage teacher login credentials",icon:xe,action:()=>m("manageteacherid")},{title:"Price Management",desc:"Update admission fees and pricing",icon:va,action:()=>m("pricemanagement")}].filter(s=>{if(!Ke.trim())return!0;const t=Ke.toLowerCase(),a=s.title.toLowerCase(),r=s.desc.toLowerCase();return a.includes(t)||r.includes(t)}).map((s,t)=>e.jsxs(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.7+t*.1},onClick:s.action,className:"relative group cursor-pointer touch-manipulation",children:[e.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-br from-cyan-500/10 via-transparent to-emerald-500/10 opacity-0 group-hover:opacity-100 blur-xl transition duration-300 pointer-events-none"}),e.jsxs("div",{className:"relative p-3 sm:p-4 rounded-xl border border-cyan-400/20 bg-gradient-to-br from-background/90 to-background/60 shadow-[0_0_18px_rgba(6,182,212,0.15)] group-hover:border-cyan-200/60 group-hover:shadow-[0_0_30px_rgba(16,185,129,0.55)] transition-all duration-300",children:[e.jsx(s.icon,{className:"h-6 w-6 sm:h-8 sm:w-8 text-cyan-200 drop-shadow-[0_0_6px_rgba(34,211,238,0.8)] mb-2 sm:mb-3 group-hover:text-white group-hover:scale-110 transition-transform duration-300"}),e.jsx("h3",{className:"font-semibold text-foreground mb-1 sm:mb-2 text-sm sm:text-base tracking-wide",children:s.title}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground leading-tight",children:s.desc})]})]},s.title))})]})})]}),p==="teachers"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-6 sm:mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-lg sm:rounded-xl p-4 sm:p-6 border border-border/50",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 sm:mb-6 space-y-3 sm:space-y-0",children:[e.jsx("h2",{className:"text-base sm:text-lg font-heading font-bold text-foreground",children:"Teacher Management"}),e.jsx(i,{variant:"outline",onClick:()=>m("dashboard"),size:"sm",className:"w-full sm:w-auto",children:"Back to Dashboard"})]}),e.jsx(l.Suspense,{fallback:e.jsx(S,{}),children:e.jsx(Na,{})})]})}),p==="homepage"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-6 sm:mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-lg sm:rounded-xl p-4 sm:p-6 border border-border/50",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 sm:mb-6 space-y-3 sm:space-y-0",children:[e.jsx("h2",{className:"text-base sm:text-lg font-heading font-bold text-foreground",children:"Homepage Management"}),e.jsx(i,{variant:"outline",onClick:()=>m("dashboard"),size:"sm",className:"w-full sm:w-auto",children:"Back to Dashboard"})]}),e.jsx(l.Suspense,{fallback:e.jsx(S,{}),children:e.jsx(wa,{})})]})}),p==="announcements"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-6 sm:mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-lg sm:rounded-xl p-4 sm:p-6 border border-border/50",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 sm:mb-6 space-y-3 sm:space-y-0",children:[e.jsx("h2",{className:"text-base sm:text-lg font-heading font-bold text-foreground",children:"Announcement Management"}),e.jsx(i,{variant:"outline",onClick:()=>m("dashboard"),size:"sm",className:"w-full sm:w-auto",children:"Back to Dashboard"})]}),e.jsx(l.Suspense,{fallback:e.jsx(S,{}),children:e.jsx(Sa,{})})]})}),p==="courses"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-3 sm:p-6 border border-border/50",children:[e.jsxs("div",{className:"-mx-2 sm:mx-0 px-2 flex flex-col sm:flex-row items-center justify-between mb-4 sm:mb-6 gap-2",children:[e.jsx("h2",{className:"text-lg font-heading font-bold text-foreground",children:"Course Management"}),e.jsx(i,{variant:"outline",onClick:()=>m("dashboard"),size:"sm",className:"w-full sm:w-auto",children:"Back to Dashboard"})]}),e.jsx("div",{className:"overflow-x-auto sm:overflow-visible",children:e.jsx(l.Suspense,{fallback:e.jsx(S,{}),children:e.jsx(Da,{})})})]})}),p==="gallery"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-heading font-bold text-foreground",children:"Gallery Management"}),e.jsx(i,{variant:"outline",onClick:()=>m("dashboard"),size:"sm",children:"Back to Dashboard"})]}),e.jsx(l.Suspense,{fallback:e.jsx(S,{}),children:e.jsx(ka,{})})]})}),p==="about"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-heading font-bold text-foreground",children:"Update School Information"}),e.jsx(i,{variant:"outline",onClick:()=>m("dashboard"),size:"sm",children:"Back to Dashboard"})]}),e.jsx(l.Suspense,{fallback:e.jsx(S,{}),children:e.jsx(Ca,{})})]})}),p==="admissions"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-6 border border-border/50",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-heading font-bold text-foreground",children:"Admissions"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total: ",(R||[]).length," • Paid: ",(R||[]).filter(s=>s.paymentStatus==="paid").length," • Test: ",(R||[]).filter(s=>s.paymentStatus==="test").length]})]}),e.jsxs("div",{className:"-mx-2 sm:mx-0 px-2 flex items-center gap-2 w-full sm:w-auto overflow-x-auto [&>*]:shrink-0",children:[e.jsx(i,{onClick:Jt,className:`${We?"bg-green-600 hover:bg-green-700 text-white":"bg-red-600 hover:bg-red-700 text-white"} font-medium`,size:"sm",children:We?"🟢 Admission ON":"🔴 Admission OFF"}),e.jsx(y,{placeholder:"Search by name, email, or program...",value:gs,onChange:s=>Zs(s.target.value),className:"w-full sm:w-72"}),e.jsx(i,{variant:"outline",onClick:is,children:"Refresh"}),e.jsx(i,{variant:"outline",onClick:()=>{console.log("[DEBUG] Checking both localStorage and Supabase data...");const s=localStorage.getItem("royal-academy-admissions");console.log("[DEBUG] localStorage data:",s),Vs.from("app_state").select("value").eq("key","royal-academy-admissions").then(({data:t,error:a})=>{console.log("[DEBUG] Supabase data:",t),console.log("[DEBUG] Supabase error:",a);let r=0,o=0;if(s)try{const c=JSON.parse(s);r=Array.isArray(c)?c.length:0}catch(c){console.error("[DEBUG] Parse error:",c)}if(t&&t.value)try{const c=JSON.parse(t.value);o=Array.isArray(c)?c.length:0}catch(c){console.error("[DEBUG] Supabase parse error:",c)}alert(`Data Status:
LocalStorage: ${r} records
Supabase: ${o} records
Current state: ${R.length} records`)})},className:"text-xs",children:"Debug Data"}),e.jsx(i,{variant:"outline",onClick:()=>m("dashboard"),children:"Back"})]})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left border-b border-border/50",children:[e.jsx("th",{className:"py-3 pr-4",children:"Student"}),e.jsx("th",{className:"py-3 pr-4",children:"Contact"}),e.jsx("th",{className:"py-3 pr-4",children:"Family Details"}),e.jsx("th",{className:"py-3 pr-4",children:"Class/Age"}),e.jsx("th",{className:"py-3 pr-4",children:"Plan"}),e.jsx("th",{className:"py-3 pr-4",children:"Payment"}),e.jsx("th",{className:"py-3 pr-4",children:"Documents"}),e.jsx("th",{className:"py-3 pr-4",children:"Submitted"}),e.jsx("th",{className:"py-3 pr-4",children:"Actions"})]})}),e.jsxs("tbody",{children:[(R||[]).filter(s=>{const t=gs.trim().toLowerCase();return t?`${s.firstName} ${s.lastName}`.toLowerCase().includes(t)||(s.email||"").toLowerCase().includes(t)||(s.program||"").toLowerCase().includes(t):!0}).map(s=>e.jsxs("tr",{className:"border-b border-border/30 hover:bg-muted/20",children:[e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[s.studentPhoto&&e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-gold/30 flex-shrink-0",children:typeof s.studentPhoto=="string"?e.jsx("img",{src:s.studentPhoto,alt:"Student",className:"w-full h-full object-cover",onError:t=>{t.currentTarget.style.display="none"}}):s.studentPhoto&&typeof s.studentPhoto=="object"&&s.studentPhoto instanceof Blob?e.jsx("img",{src:URL.createObjectURL(s.studentPhoto),alt:"Student",className:"w-full h-full object-cover",onError:t=>{t.currentTarget.style.display="none"}}):null}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-foreground",children:[s.firstName," ",s.lastName]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["ID: ",s.id.slice(0,8)]})]})]})}),e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx("div",{children:s.email}),s.phone&&e.jsx("div",{className:"text-xs",children:s.phone})]})}),e.jsx("td",{className:"py-3 pr-4 text-muted-foreground",children:e.jsxs("div",{className:"text-xs",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Father:"})," ",s.fatherName||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Mother:"})," ",s.motherName||"N/A"]})]})}),e.jsxs("td",{className:"py-3 pr-4 text-muted-foreground",children:[e.jsxs("div",{children:["Class ",s.class||"N/A"]}),e.jsxs("div",{className:"text-xs",children:["Age: ",s.studentAge||"N/A"," years"]})]}),e.jsx("td",{className:"py-3 pr-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${s.subscriptionType==="yearly"?"bg-gold/10 text-gold border border-gold/30":"bg-blue-500/10 text-blue-400 border border-blue-500/30"}`,children:s.subscriptionType==="yearly"?"Yearly":"Monthly"})}),e.jsx("td",{className:"py-3 pr-4",children:s.paymentStatus==="paid"?e.jsxs("span",{className:"px-2 py-1 text-xs rounded-full bg-green-500/10 text-green-400 border border-green-500/30",children:["Paid",s.paymentMethod&&s.paymentMethod!=="test"?` (${s.paymentMethod})`:""]}):e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-yellow-500/10 text-yellow-400 border border-yellow-500/30",children:"Test"})}),e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.aadhaarCard&&e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{try{if(typeof s.aadhaarCard=="string")J({show:!0,url:s.aadhaarCard,name:`Aadhaar Card - ${s.firstName} ${s.lastName}`});else if(s.aadhaarCard&&typeof s.aadhaarCard=="object"&&s.aadhaarCard instanceof Blob){const t=URL.createObjectURL(s.aadhaarCard);J({show:!0,url:t,name:`Aadhaar Card - ${s.firstName} ${s.lastName}`})}else alert("Aadhaar card file not available")}catch(t){console.error("Error opening Aadhaar card:",t),alert("Error opening Aadhaar card")}},title:"View Aadhaar Card",className:"h-7 px-2 text-xs bg-blue-500/10 hover:bg-blue-500/20 text-blue-600","data-testid":`button-view-aadhaar-${s.id}`,children:"📄 Aadhaar"}),s.birthCertificate&&e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{try{if(typeof s.birthCertificate=="string")J({show:!0,url:s.birthCertificate,name:`Birth Certificate - ${s.firstName} ${s.lastName}`});else if(s.birthCertificate&&typeof s.birthCertificate=="object"&&s.birthCertificate instanceof Blob){const t=URL.createObjectURL(s.birthCertificate);J({show:!0,url:t,name:`Birth Certificate - ${s.firstName} ${s.lastName}`})}else alert("Birth certificate file not available")}catch(t){console.error("Error opening birth certificate:",t),alert("Error opening birth certificate")}},title:"View Birth Certificate",className:"h-7 px-2 text-xs bg-green-500/10 hover:bg-green-500/20 text-green-600","data-testid":`button-view-birth-cert-${s.id}`,children:"📄 Birth Cert"}),s.studentPhoto&&e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{try{if(typeof s.studentPhoto=="string")J({show:!0,url:s.studentPhoto,name:`Student Photo - ${s.firstName} ${s.lastName}`});else if(s.studentPhoto&&typeof s.studentPhoto=="object"&&s.studentPhoto instanceof Blob){const t=URL.createObjectURL(s.studentPhoto);J({show:!0,url:t,name:`Student Photo - ${s.firstName} ${s.lastName}`})}else alert("Student photo not available")}catch(t){console.error("Error opening student photo:",t),alert("Error opening student photo")}},title:"View Student Photo",className:"h-7 px-2 text-xs bg-purple-500/10 hover:bg-purple-500/20 text-purple-600","data-testid":`button-view-photo-${s.id}`,children:"📷 Photo"}),!s.aadhaarCard&&!s.birthCertificate&&!s.studentPhoto&&e.jsx("span",{className:"text-xs text-muted-foreground italic",children:"No documents"})]})}),e.jsx("td",{className:"py-3 pr-4 text-muted-foreground text-xs",children:new Date(s.createdAt).toLocaleString()}),e.jsx("td",{className:"py-3 pr-4",children:e.jsxs(i,{variant:"ghost",size:"sm",onClick:()=>Gt(s.id,`${s.firstName} ${s.lastName}`),className:"h-7 px-2 text-xs bg-red-500/10 hover:bg-red-500/20 text-red-600",title:"Delete Admission",children:[e.jsx(j,{className:"h-3 w-3 mr-1"}),"Delete"]})})]},s.id)),(R||[]).length===0&&e.jsx("tr",{children:e.jsx("td",{className:"py-6 text-center text-muted-foreground",colSpan:8,children:"No admissions yet."})})]})]})})]})}),p==="topscorers"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-heading font-bold text-foreground",children:"Top Scorers Management"}),e.jsx(i,{variant:"outline",onClick:()=>m("dashboard"),size:"sm",children:"Back to Dashboard"})]}),e.jsx(l.Suspense,{fallback:e.jsx(S,{}),children:e.jsx(Aa,{})})]})}),p==="booksmanager"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-heading font-bold text-foreground",children:"Yearly Books Management"}),e.jsx(i,{variant:"outline",onClick:()=>m("dashboard"),size:"sm",children:"Back to Dashboard"})]}),e.jsx(l.Suspense,{fallback:e.jsx(S,{}),children:e.jsx(Ba,{})})]})}),p==="examroutine"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-heading font-bold text-foreground",children:"Exam Routine Management"}),e.jsx(i,{variant:"outline",onClick:()=>m("dashboard"),size:"sm",children:"Back to Dashboard"})]}),e.jsx(l.Suspense,{fallback:e.jsx(S,{}),children:e.jsx(za,{})})]})}),p==="syllabus"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-heading font-bold text-foreground",children:"Syllabus Management"}),e.jsx(i,{variant:"outline",onClick:()=>m("dashboard"),size:"sm",children:"Back to Dashboard"})]}),e.jsx(l.Suspense,{fallback:e.jsx(S,{}),children:e.jsx($a,{})})]})}),p==="holidays"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-heading font-bold text-foreground",children:"Holiday Management"}),e.jsx(i,{variant:"outline",onClick:()=>m("dashboard"),size:"sm",children:"Back to Dashboard"})]}),e.jsx(l.Suspense,{fallback:e.jsx(S,{}),children:e.jsx(Fa,{})})]})}),p==="manageteachers"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-heading font-bold text-foreground",children:"Teacher Management System"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"View, edit, ban/unban, and delete teacher accounts"})]}),e.jsx(i,{variant:"outline",onClick:()=>m("dashboard"),size:"sm",children:"Back to Dashboard"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(y,{placeholder:"Search teachers by name, email, or subject...",value:js,onChange:s=>lt(s.target.value),className:"w-full"})}),e.jsxs("select",{value:Ze,onChange:s=>nt(s.target.value),className:"px-4 py-2 border border-border rounded-lg bg-background",children:[e.jsx("option",{value:"",children:"All Subjects"}),e.jsx("option",{value:"mathematics",children:"Mathematics"}),e.jsx("option",{value:"science",children:"Science"}),e.jsx("option",{value:"physics",children:"Physics"}),e.jsx("option",{value:"chemistry",children:"Chemistry"}),e.jsx("option",{value:"biology",children:"Biology"}),e.jsx("option",{value:"english literature",children:"English Literature"}),e.jsx("option",{value:"hindi",children:"Hindi"}),e.jsx("option",{value:"history",children:"History"}),e.jsx("option",{value:"geography",children:"Geography"}),e.jsx("option",{value:"civics/political science",children:"Civics/Political Science"}),e.jsx("option",{value:"economics",children:"Economics"}),e.jsx("option",{value:"computer science",children:"Computer Science"}),e.jsx("option",{value:"information technology",children:"Information Technology"}),e.jsx("option",{value:"physical education",children:"Physical Education"}),e.jsx("option",{value:"arts & crafts",children:"Arts & Crafts"}),e.jsx("option",{value:"music",children:"Music"}),e.jsx("option",{value:"dance",children:"Dance"}),e.jsx("option",{value:"drawing & painting",children:"Drawing & Painting"}),e.jsx("option",{value:"home science",children:"Home Science"}),e.jsx("option",{value:"agriculture",children:"Agriculture"}),e.jsx("option",{value:"commerce",children:"Commerce"}),e.jsx("option",{value:"accountancy",children:"Accountancy"}),e.jsx("option",{value:"business studies",children:"Business Studies"}),e.jsx("option",{value:"psychology",children:"Psychology"}),e.jsx("option",{value:"sociology",children:"Sociology"}),e.jsx("option",{value:"philosophy",children:"Philosophy"}),e.jsx("option",{value:"sanskrit",children:"Sanskrit"}),e.jsx("option",{value:"urdu",children:"Urdu"}),e.jsx("option",{value:"french",children:"French"}),e.jsx("option",{value:"german",children:"German"}),e.jsx("option",{value:"spanish",children:"Spanish"})]}),e.jsxs("select",{value:es,onChange:s=>ct(s.target.value),className:"px-4 py-2 border border-border rounded-lg bg-background",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"banned",children:"Banned"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[Js.map(s=>e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-gradient-to-br from-card to-card/80 rounded-xl p-6 border border-border/50 shadow-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-gold to-yellow-500 flex items-center justify-center",children:e.jsx(Ye,{className:"h-6 w-6 text-black"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-foreground",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.id})]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.status==="active"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:s.status.toUpperCase()})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Subject:"})," ",s.subject]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",s.email]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Phone:"})," ",s.phone]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Classes:"})," ",s.classes&&s.classes.length>0?s.classes.join(", "):s.assignedClass&&s.assignedSection?`${s.assignedClass}${s.assignedSection}`:"-"]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Joined:"})," ",s.joinDate]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(i,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>L(s),children:[e.jsx(me,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsx(i,{size:"sm",variant:"outline",className:`flex-1 ${s.status==="active"?"text-red-400 hover:text-red-300":"text-green-400 hover:text-green-300"}`,onClick:()=>Ft(s.id),children:s.status==="active"?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"h-3 w-3 mr-1"}),"Ban"]}):e.jsxs(e.Fragment,{children:[e.jsx(Qs,{className:"h-3 w-3 mr-1"}),"Unban"]})}),e.jsx(i,{size:"sm",variant:"outline",className:"text-red-400 hover:text-red-300",onClick:()=>Ot(s.id),children:e.jsx(j,{className:"h-3 w-3"})})]})]},s.id)),Js.length===0&&e.jsx("div",{className:"col-span-full text-center text-muted-foreground py-8",children:"No one is teacher for now."})]}),e.jsx("div",{className:"text-center",children:e.jsxs(i,{onClick:()=>m("createteacherid"),className:"bg-gradient-to-r from-gold to-yellow-500 text-black",children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),"Add New Teacher"]})})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>L(null),children:e.jsxs("div",{className:"bg-background rounded-2xl shadow-2xl w-full max-w-2xl",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsx("h3",{className:"text-lg font-heading font-bold",children:"Edit Teacher"}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>L(null),children:e.jsx(j,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto scroll-smooth",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Full Name"}),e.jsx(y,{value:b.name,onChange:s=>L({...b,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),e.jsx(y,{type:"email",value:b.email,onChange:s=>L({...b,email:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Subject"}),e.jsx(y,{value:b.subject||"",onChange:s=>L({...b,subject:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone"}),e.jsx(y,{value:b.phone||"",onChange:s=>L({...b,phone:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Class"}),e.jsx(y,{value:b.assignedClass||"",onChange:s=>L({...b,assignedClass:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Section"}),e.jsx(y,{value:b.assignedSection||"",onChange:s=>L({...b,assignedSection:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),e.jsxs("select",{value:b.status,onChange:s=>L({...b,status:s.target.value}),className:"w-full p-3 border border-border rounded-lg bg-background",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"banned",children:"Banned"})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-2 p-4 border-t border-border",children:[e.jsx(i,{variant:"outline",onClick:()=>L(null),children:"Cancel"}),e.jsx(i,{onClick:_t,className:"bg-gradient-to-r from-gold to-yellow-500 text-black",children:"Save Changes"})]})]})}),p==="createteacherid"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-3 sm:p-4 md:p-6 border border-border/50",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 gap-2 sm:gap-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base sm:text-lg font-heading font-bold text-foreground",children:"Create New Teacher ID"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:"Generate login credentials for teachers to access their dashboard"})]}),e.jsx(i,{variant:"outline",onClick:()=>m("dashboard"),size:"sm",className:"w-full sm:w-auto text-xs sm:text-sm",children:"Back to Dashboard"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 md:gap-8",children:[e.jsx("div",{className:"space-y-4 sm:space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-gold/10 to-yellow-500/10 border border-gold/30 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-gradient-to-r from-gold to-yellow-500 flex items-center justify-center flex-shrink-0",children:e.jsx(xe,{className:"h-5 w-5 sm:h-6 sm:w-6 text-black"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-heading font-bold text-gradient-gold",children:"Teacher Registration"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Create secure login credentials for new teachers"})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Full Name *"}),e.jsx(y,{value:h.fullName,onChange:s=>Y({...h,fullName:s.target.value}),placeholder:"Enter teacher's full name",className:"text-xs sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Email Address *"}),e.jsx(y,{type:"email",value:h.email,onChange:s=>Y({...h,email:s.target.value}),placeholder:"teacher@royalacademy.edu",className:"text-xs sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Subject/Department *"}),e.jsxs("select",{value:h.subject,onChange:s=>Y({...h,subject:s.target.value}),className:"w-full p-2 sm:p-3 border border-border rounded-lg bg-background text-xs sm:text-sm",children:[e.jsx("option",{value:"",children:"Select Department"}),e.jsx("option",{value:"mathematics",children:"Mathematics"}),e.jsx("option",{value:"science",children:"Science"}),e.jsx("option",{value:"physics",children:"Physics"}),e.jsx("option",{value:"chemistry",children:"Chemistry"}),e.jsx("option",{value:"biology",children:"Biology"}),e.jsx("option",{value:"english",children:"English Literature"}),e.jsx("option",{value:"hindi",children:"Hindi"}),e.jsx("option",{value:"history",children:"History"}),e.jsx("option",{value:"geography",children:"Geography"}),e.jsx("option",{value:"civics",children:"Civics/Political Science"}),e.jsx("option",{value:"economics",children:"Economics"}),e.jsx("option",{value:"computer-science",children:"Computer Science"}),e.jsx("option",{value:"information-technology",children:"Information Technology"}),e.jsx("option",{value:"physical-education",children:"Physical Education"}),e.jsx("option",{value:"arts",children:"Arts & Crafts"}),e.jsx("option",{value:"music",children:"Music"}),e.jsx("option",{value:"dance",children:"Dance"}),e.jsx("option",{value:"drawing",children:"Drawing & Painting"}),e.jsx("option",{value:"home-science",children:"Home Science"}),e.jsx("option",{value:"agriculture",children:"Agriculture"}),e.jsx("option",{value:"commerce",children:"Commerce"}),e.jsx("option",{value:"accountancy",children:"Accountancy"}),e.jsx("option",{value:"business-studies",children:"Business Studies"}),e.jsx("option",{value:"psychology",children:"Psychology"}),e.jsx("option",{value:"sociology",children:"Sociology"}),e.jsx("option",{value:"philosophy",children:"Philosophy"}),e.jsx("option",{value:"sanskrit",children:"Sanskrit"}),e.jsx("option",{value:"urdu",children:"Urdu"}),e.jsx("option",{value:"french",children:"French"}),e.jsx("option",{value:"german",children:"German"}),e.jsx("option",{value:"spanish",children:"Spanish"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Employee ID"}),e.jsx(y,{value:h.employeeId,onChange:s=>Y({...h,employeeId:s.target.value}),placeholder:"Auto-generated (optional custom ID)",className:"text-xs sm:text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Leave blank for auto-generation"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Phone Number"}),e.jsx(y,{type:"tel",value:h.phone,onChange:s=>Y({...h,phone:s.target.value}),placeholder:"Enter your phone number",className:"text-xs sm:text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Assigned Classes"}),e.jsxs("select",{value:h.assignedClass,onChange:s=>Y({...h,assignedClass:s.target.value}),className:"w-full p-2 sm:p-3 border border-border rounded-lg bg-background text-xs sm:text-sm",children:[e.jsx("option",{value:"",children:"Select Class"}),e.jsx("option",{value:"1",children:"Class 1"}),e.jsx("option",{value:"2",children:"Class 2"}),e.jsx("option",{value:"3",children:"Class 3"}),e.jsx("option",{value:"4",children:"Class 4"}),e.jsx("option",{value:"5",children:"Class 5"}),e.jsx("option",{value:"6",children:"Class 6"}),e.jsx("option",{value:"7",children:"Class 7"}),e.jsx("option",{value:"8",children:"Class 8"}),e.jsx("option",{value:"9",children:"Class 9"}),e.jsx("option",{value:"10",children:"Class 10"}),e.jsx("option",{value:"11",children:"Class 11"}),e.jsx("option",{value:"12",children:"Class 12"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Assigned Sections"}),e.jsxs("select",{value:h.assignedSection,onChange:s=>Y({...h,assignedSection:s.target.value}),className:"w-full p-2 sm:p-3 border border-border rounded-lg bg-background text-xs sm:text-sm",children:[e.jsx("option",{value:"",children:"Select Section"}),e.jsx("option",{value:"A",children:"Section A"}),e.jsx("option",{value:"B",children:"Section B"}),e.jsx("option",{value:"C",children:"Section C"}),e.jsx("option",{value:"D",children:"Section D"}),e.jsx("option",{value:"E",children:"Section E"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"sendCredentials",checked:h.sendCredentials,onChange:s=>Y({...h,sendCredentials:s.target.checked}),className:"rounded"}),e.jsx("label",{htmlFor:"sendCredentials",className:"text-xs sm:text-sm",children:"Send login credentials via email"})]}),e.jsxs(i,{onClick:zt,className:"w-full bg-gradient-to-r from-gold to-yellow-500 hover:from-gold/80 hover:to-yellow-500/80 text-white font-medium text-xs sm:text-sm",children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),"Create Teacher Account"]})]})]})}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"bg-royal/10 border border-royal/30 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-heading font-bold text-royal mb-4",children:"Teacher Dashboard Features"}),e.jsx("div",{className:"space-y-2 sm:space-y-3",children:["Take student attendance","Manage class schedules","Grade assignments and exams","Communicate with students and parents","Access student performance analytics","Upload course materials","Generate progress reports"].map((s,t)=>e.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-royal flex-shrink-0 mt-1 sm:mt-0.5"}),e.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground",children:s})]},t))})]}),e.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-heading font-bold text-green-400 mb-4",children:"Security Features"}),e.jsx("div",{className:"space-y-2 sm:space-y-3",children:["Secure password generation","Two-factor authentication support","Role-based access control","Activity logging and monitoring","Automatic session timeout","Password reset functionality"].map((s,t)=>e.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 flex-shrink-0 mt-1 sm:mt-0.5"}),e.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground",children:s})]},t))})]}),e.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-heading font-bold text-amber-400 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{variant:"outline",className:"w-full justify-start text-xs sm:text-sm",onClick:()=>ge("/manage-teachers"),children:[e.jsx(Ye,{className:"h-4 w-4 mr-2"}),"View All Teachers"]}),e.jsxs(i,{variant:"outline",className:"w-full justify-start text-xs sm:text-sm",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Manage Permissions"]}),e.jsxs(i,{variant:"outline",className:"w-full justify-start text-xs sm:text-sm",children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"Export Teacher List"]})]})]})]})]})]})}),p==="manageteacherid"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-4 sm:mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-lg sm:rounded-xl p-4 sm:p-6 border border-border/50",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 sm:mb-6 gap-3 sm:gap-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base sm:text-lg font-heading font-bold text-foreground",children:"Manage Teacher IDs"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:"View and manage teacher login credentials and access control"})]}),e.jsx(i,{onClick:()=>m("dashboard"),variant:"outline",size:"sm",className:"w-full sm:w-auto",children:"Back to Dashboard"})]}),e.jsxs("div",{className:"text-center py-6 sm:py-8",children:[e.jsx(xe,{className:"h-12 w-12 sm:h-16 sm:w-16 mx-auto mb-3 sm:mb-4 text-gold"}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2 text-foreground",children:"Teacher ID Management"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mb-4 sm:mb-6 px-4",children:"Access the comprehensive teacher ID management system to view, edit, and control teacher login credentials."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center px-4",children:[e.jsxs(i,{onClick:()=>window.open("/manage-teacher-id","_blank"),className:"bg-gradient-to-r from-gold to-yellow-500 text-black hover:from-gold/90 hover:to-yellow-500/90 w-full sm:w-auto",children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Open Teacher ID Manager"})]}),e.jsxs(i,{onClick:()=>m("createteacherid"),variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Create New Teacher ID"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 mt-6 sm:mt-8",children:[e.jsxs("div",{className:"bg-muted/20 rounded-lg p-3 sm:p-4 text-center",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-foreground",children:(()=>{try{return JSON.parse(localStorage.getItem("royal-academy-auth-teachers")||"[]").length}catch{return 0}})()}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Total Teacher IDs"})]}),e.jsxs("div",{className:"bg-muted/20 rounded-lg p-3 sm:p-4 text-center",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-green-500",children:(()=>{try{return JSON.parse(localStorage.getItem("royal-academy-auth-teachers")||"[]").filter(t=>t.status==="active"||!t.status).length}catch{return 0}})()}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Active IDs"})]}),e.jsxs("div",{className:"bg-muted/20 rounded-lg p-3 sm:p-4 text-center",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-red-500",children:(()=>{try{return JSON.parse(localStorage.getItem("royal-academy-auth-teachers")||"[]").filter(t=>t.status==="banned").length}catch{return 0}})()}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Banned IDs"})]}),e.jsxs("div",{className:"bg-muted/20 rounded-lg p-3 sm:p-4 text-center",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-yellow-500",children:(()=>{try{return JSON.parse(localStorage.getItem("royal-academy-auth-teachers")||"[]").filter(t=>(t.loginAttempts||0)>3).length}catch{return 0}})()}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Login Issues"})]})]}),e.jsxs("div",{className:"mt-4 sm:mt-6 p-3 sm:p-4 bg-muted/10 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2 sm:mb-3 text-sm sm:text-base text-foreground",children:"Quick Actions"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap gap-2",children:[e.jsx(i,{size:"sm",variant:"outline",onClick:()=>window.open("/manage-teacher-id","_blank"),className:"w-full sm:w-auto text-xs sm:text-sm",children:"View All Teacher IDs"}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>m("createteacherid"),className:"w-full sm:w-auto text-xs sm:text-sm",children:"Create New ID"}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>m("manageteachers"),className:"w-full sm:w-auto text-xs sm:text-sm",children:"Manage Teachers"})]})]})]})}),p==="pricemanagement"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-heading font-bold text-foreground",children:"Price Management"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Update admission fees and subscription pricing"})]}),e.jsx(i,{onClick:()=>m("dashboard"),variant:"outline",size:"sm",children:"Back to Dashboard"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"p-6 border border-border/50 rounded-xl",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Monthly Plan"}),e.jsxs("div",{className:"text-3xl font-bold text-gold mb-2",children:["₹",_.monthly.toLocaleString()]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Per month"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium",children:"Monthly Price (₹)"}),e.jsx(y,{type:"number",value:_.monthly,onChange:s=>be(t=>({...t,monthly:parseInt(s.target.value)||0})),min:"0",step:"100"}),e.jsx(i,{onClick:()=>{localStorage.setItem("royal-academy-pricing",JSON.stringify(_)),alert("Monthly pricing updated successfully!")},className:"w-full",children:"Update Monthly Price"})]})]}),e.jsxs("div",{className:"p-6 border border-border/50 rounded-xl",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Yearly Plan"}),e.jsxs("div",{className:"text-3xl font-bold text-gold mb-2",children:["₹",_.yearly.toLocaleString()]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Per year"}),e.jsxs("p",{className:"text-xs text-green-600",children:["Save ₹",(_.monthly*12-_.yearly).toLocaleString(),"!"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium",children:"Yearly Price (₹)"}),e.jsx(y,{type:"number",value:_.yearly,onChange:s=>be(t=>({...t,yearly:parseInt(s.target.value)||0})),min:"0",step:"1000"}),e.jsx(i,{onClick:()=>{localStorage.setItem("royal-academy-pricing",JSON.stringify(_)),alert("Yearly pricing updated successfully!")},className:"w-full",children:"Update Yearly Price"})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-muted/10 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(i,{size:"sm",variant:"outline",onClick:()=>{localStorage.setItem("royal-academy-pricing",JSON.stringify(_)),alert("All pricing updated successfully!")},children:"Save All Changes"}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>{const s=localStorage.getItem("royal-academy-pricing");s&&(be(JSON.parse(s)),alert("Pricing loaded from saved settings!"))},children:"Load Saved Pricing"}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>{be({monthly:5e3,yearly:5e4}),alert("Pricing reset to defaults!")},children:"Reset to Default"})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-muted/20 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:R.filter(s=>s.subscriptionType==="monthly").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Monthly Subscribers"})]}),e.jsxs("div",{className:"bg-muted/20 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:R.filter(s=>s.subscriptionType==="yearly").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Yearly Subscribers"})]}),e.jsxs("div",{className:"bg-muted/20 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-gold",children:["₹",(R.filter(s=>s.subscriptionType==="monthly").length*_.monthly+R.filter(s=>s.subscriptionType==="yearly").length*_.yearly).toLocaleString()]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Revenue"})]})]})]})}),p==="timetable"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-heading font-bold text-foreground",children:"Timetable Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create and manage class timetables for different sections"})]}),e.jsx(i,{variant:"outline",onClick:()=>m("dashboard"),className:"text-muted-foreground hover:text-foreground",children:e.jsx(j,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Class"}),e.jsxs("select",{value:w,onChange:s=>ie(s.target.value),className:"w-full p-3 border border-border rounded-lg bg-background",children:[e.jsx("option",{value:"1",children:"Class 1"}),e.jsx("option",{value:"2",children:"Class 2"}),e.jsx("option",{value:"3",children:"Class 3"}),e.jsx("option",{value:"4",children:"Class 4"}),e.jsx("option",{value:"5",children:"Class 5"}),e.jsx("option",{value:"6",children:"Class 6"}),e.jsx("option",{value:"7",children:"Class 7"}),e.jsx("option",{value:"8",children:"Class 8"}),e.jsx("option",{value:"9",children:"Class 9"}),e.jsx("option",{value:"10",children:"Class 10"}),e.jsx("option",{value:"11",children:"Class 11"}),e.jsx("option",{value:"12",children:"Class 12"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Section"}),e.jsxs("select",{value:A,onChange:s=>at(s.target.value),className:"w-full p-3 border border-border rounded-lg bg-background",children:[e.jsx("option",{value:"A",children:"Section A"}),e.jsx("option",{value:"B",children:"Section B"}),e.jsx("option",{value:"C",children:"Section C"}),e.jsx("option",{value:"D",children:"Section D"}),e.jsx("option",{value:"E",children:"Section E"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-royal/10 to-gold/10 rounded-lg p-6 border border-border/30",children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4",children:["Timetable for Class ",w,A]}),e.jsx("div",{className:"space-y-4",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(s=>e.jsxs("div",{className:"bg-card rounded-lg p-4 border border-border/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-semibold text-foreground flex items-center",children:[e.jsx(Ae,{className:"h-4 w-4 mr-2 text-gold"}),s]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(i,{size:"sm",variant:"outline",onClick:()=>{Q({day:s,time:"",subject:"",teacher:"",room:""}),pe(!0)},children:[e.jsx(Qs,{className:"h-4 w-4 mr-1"}),"Add Period"]}),(()=>{const t=`royal-academy-timetable-${w}${A}`,a=localStorage.getItem(t);let r=!1;if(a)try{const o=JSON.parse(a);if(o&&o.schedule&&Array.isArray(o.schedule)){const c=o.schedule.find(n=>n.day===s);r=c&&c.periods&&c.periods.length>0}}catch(o){console.error("Error parsing timetable data:",o)}return r?e.jsxs(i,{size:"sm",variant:"destructive",onClick:()=>{if(confirm(`Delete all periods for ${s}?`)){const o=`royal-academy-timetable-${w}${A}`,c=localStorage.getItem(o);if(c)try{const n=JSON.parse(c);if(n&&n.schedule&&Array.isArray(n.schedule)){const u=n.schedule.find(H=>H.day===s);u&&(u.periods=[],localStorage.setItem(o,JSON.stringify(n)),alert(`All periods deleted for ${s}!`),ie(w))}}catch(n){console.error("Error parsing or updating timetable data:",n),alert("Error deleting periods. Please try again.")}}},children:[e.jsx(j,{className:"h-4 w-4 mr-1"}),"Clear Day"]}):null})()]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:(()=>{const t=`royal-academy-timetable-${w}${A}`,a=localStorage.getItem(t);let r=[];if(a)try{const o=JSON.parse(a);if(o&&o.schedule&&Array.isArray(o.schedule)){const c=o.schedule.find(n=>n.day===s);r=c&&c.periods?c.periods:[]}}catch(o){console.error("Error parsing timetable data:",o),r=[]}return r.length===0?e.jsxs("div",{className:"col-span-full text-center py-8 text-muted-foreground",children:[e.jsx(ms,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsxs("p",{children:["No periods scheduled for ",s]}),e.jsx("p",{className:"text-sm",children:'Click "Add Period" to create the schedule'})]}):r.map((o,c)=>e.jsxs("div",{className:`p-3 rounded-lg border transition-colors relative group ${o.subject==="Break"||o.subject==="Lunch Break"?"bg-muted/20 border-muted/30":"bg-background border-border/30 hover:border-gold/50"}`,children:[e.jsx("button",{onClick:n=>{if(n.stopPropagation(),confirm(`Delete ${o.subject} period at ${o.time}?`)){const u=`royal-academy-timetable-${w}${A}`,H=localStorage.getItem(u);if(H)try{const T=JSON.parse(H);if(T&&T.schedule&&Array.isArray(T.schedule)){const D=T.schedule.find(we=>we.day===s);D&&D.periods&&(D.periods.splice(c,1),localStorage.setItem(u,JSON.stringify(T)),alert("Period deleted successfully!"),ie(w))}}catch(T){console.error("Error parsing or updating timetable data:",T),alert("Error deleting period. Please try again.")}}},className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs",title:"Delete Period",children:e.jsx(j,{className:"h-3 w-3"})}),e.jsxs("div",{onClick:()=>{Q({day:s,...o,index:c}),pe(!0)},className:"cursor-pointer",children:[e.jsx("div",{className:"absolute top-1 left-1 opacity-0 group-hover:opacity-100 transition-opacity text-gold",children:e.jsx(me,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:o.time}),o.room&&e.jsx("span",{className:"text-xs text-muted-foreground bg-muted/30 px-2 py-1 rounded",children:o.room})]}),e.jsx("h5",{className:`font-semibold mb-1 ${o.subject==="Break"?"text-muted-foreground":"text-foreground"}`,children:o.subject}),o.teacher&&e.jsx("p",{className:"text-sm text-muted-foreground",children:o.teacher})]})]},c))})()})]},s))}),e.jsxs("div",{className:"mt-6 flex flex-wrap gap-3",children:[e.jsxs(i,{className:"bg-gradient-to-r from-gold to-yellow-500 text-black",onClick:async()=>{const s=`royal-academy-timetable-${w}${A}`;await C(s,{...{class:w,section:A,schedule:[{day:"Monday",periods:[{time:"9:00-9:45",subject:"Mathematics",teacher:"Dr. Smith",room:"101"},{time:"9:45-10:30",subject:"Physics",teacher:"Prof. Johnson",room:"Lab-1"},{time:"10:30-10:45",subject:"Break",teacher:"",room:""},{time:"10:45-11:30",subject:"Chemistry",teacher:"Dr. Brown",room:"Lab-2"},{time:"11:30-12:15",subject:"English",teacher:"Ms. Davis",room:"102"},{time:"12:15-1:00",subject:"Computer Science",teacher:"Mr. Wilson",room:"Computer Lab"},{time:"1:00-2:00",subject:"Lunch Break",teacher:"",room:""},{time:"2:00-2:45",subject:"Biology",teacher:"Dr. Taylor",room:"Lab-3"},{time:"2:45-3:30",subject:"Physical Education",teacher:"Coach Miller",room:"Playground"}]},{day:"Tuesday",periods:[{time:"9:00-9:45",subject:"Physics",teacher:"Prof. Johnson",room:"Lab-1"},{time:"9:45-10:30",subject:"Mathematics",teacher:"Dr. Smith",room:"101"},{time:"10:30-10:45",subject:"Break",teacher:"",room:""},{time:"10:45-11:30",subject:"English",teacher:"Ms. Davis",room:"102"},{time:"11:30-12:15",subject:"Chemistry",teacher:"Dr. Brown",room:"Lab-2"},{time:"12:15-1:00",subject:"Hindi",teacher:"Mrs. Sharma",room:"103"},{time:"1:00-2:00",subject:"Lunch Break",teacher:"",room:""},{time:"2:00-2:45",subject:"Computer Science",teacher:"Mr. Wilson",room:"Computer Lab"},{time:"2:45-3:30",subject:"Art",teacher:"Ms. Anderson",room:"Art Room"}]},{day:"Wednesday",periods:[{time:"9:00-9:45",subject:"Chemistry",teacher:"Dr. Brown",room:"Lab-2"},{time:"9:45-10:30",subject:"Biology",teacher:"Dr. Taylor",room:"Lab-3"},{time:"10:30-10:45",subject:"Break",teacher:"",room:""},{time:"10:45-11:30",subject:"Mathematics",teacher:"Dr. Smith",room:"101"},{time:"11:30-12:15",subject:"Physics",teacher:"Prof. Johnson",room:"Lab-1"},{time:"12:15-1:00",subject:"English",teacher:"Ms. Davis",room:"102"},{time:"1:00-2:00",subject:"Lunch Break",teacher:"",room:""},{time:"2:00-2:45",subject:"History",teacher:"Mr. Thompson",room:"104"},{time:"2:45-3:30",subject:"Geography",teacher:"Ms. Clark",room:"105"}]},{day:"Thursday",periods:[{time:"9:00-9:45",subject:"English",teacher:"Ms. Davis",room:"102"},{time:"9:45-10:30",subject:"Mathematics",teacher:"Dr. Smith",room:"101"},{time:"10:30-10:45",subject:"Break",teacher:"",room:""},{time:"10:45-11:30",subject:"Physics",teacher:"Prof. Johnson",room:"Lab-1"},{time:"11:30-12:15",subject:"Biology",teacher:"Dr. Taylor",room:"Lab-3"},{time:"12:15-1:00",subject:"Computer Science",teacher:"Mr. Wilson",room:"Computer Lab"},{time:"1:00-2:00",subject:"Lunch Break",teacher:"",room:""},{time:"2:00-2:45",subject:"Chemistry",teacher:"Dr. Brown",room:"Lab-2"},{time:"2:45-3:30",subject:"Music",teacher:"Ms. Roberts",room:"Music Room"}]},{day:"Friday",periods:[{time:"9:00-9:45",subject:"Biology",teacher:"Dr. Taylor",room:"Lab-3"},{time:"9:45-10:30",subject:"Chemistry",teacher:"Dr. Brown",room:"Lab-2"},{time:"10:30-10:45",subject:"Break",teacher:"",room:""},{time:"10:45-11:30",subject:"English",teacher:"Ms. Davis",room:"102"},{time:"11:30-12:15",subject:"Mathematics",teacher:"Dr. Smith",room:"101"},{time:"12:15-1:00",subject:"Physical Education",teacher:"Coach Miller",room:"Playground"},{time:"1:00-2:00",subject:"Lunch Break",teacher:"",room:""},{time:"2:00-2:45",subject:"Hindi",teacher:"Mrs. Sharma",room:"103"},{time:"2:45-3:30",subject:"Library Period",teacher:"Librarian",room:"Library"}]},{day:"Saturday",periods:[{time:"9:00-9:45",subject:"Extra Classes",teacher:"Various Teachers",room:"Multiple Rooms"},{time:"9:45-10:30",subject:"Sports",teacher:"Coach Miller",room:"Playground"},{time:"10:30-10:45",subject:"Break",teacher:"",room:""},{time:"10:45-11:30",subject:"Art & Craft",teacher:"Ms. Anderson",room:"Art Room"},{time:"11:30-12:15",subject:"Music",teacher:"Ms. Roberts",room:"Music Room"},{time:"12:15-1:00",subject:"Library Period",teacher:"Librarian",room:"Library"}]}]},lastUpdated:new Date().toISOString()}),alert("Sample timetable created successfully for Class "+w+A+"!")},children:[e.jsx(ms,{className:"h-4 w-4 mr-2"}),"Save Timetable"]}),e.jsxs(i,{variant:"destructive",onClick:()=>{if(confirm(`Delete all periods for Class ${w}${A}? This will clear the entire timetable but keep the structure.`)){const s=`royal-academy-timetable-${w}${A}`,t=localStorage.getItem(s);if(t)try{const a=JSON.parse(t);a&&a.schedule&&Array.isArray(a.schedule)?(a.schedule.forEach(r=>{r&&r.periods&&(r.periods=[])}),a.lastUpdated=new Date().toISOString(),localStorage.setItem(s,JSON.stringify(a)),C(s,a),alert(`All periods cleared for Class ${w}${A}!`),ie(w)):alert("Invalid timetable data structure.")}catch(a){console.error("Error parsing or updating timetable data:",a),alert("Error clearing periods. Please try again.")}else alert("No timetable found to clear.")}},children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Clear All Periods"]}),e.jsxs(i,{variant:"outline",onClick:()=>{if(confirm(`Delete entire timetable for Class ${w}${A}? This action cannot be undone.`)){const s=`royal-academy-timetable-${w}${A}`;localStorage.removeItem(s),C(s,null),alert(`Timetable deleted for Class ${w}${A}!`),ie(w)}},children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Delete Timetable"]}),e.jsxs(i,{variant:"outline",onClick:()=>{alert('To edit any period, simply click on the period in the timetable below. You can also add new periods using the "Add Period" button for each day.')},children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Edit Periods"]})]})]})]})}),rt&&v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-card rounded-xl p-6 w-full max-w-md border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground",children:["Edit Period - ",v.day]}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>pe(!1),children:e.jsx(j,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Time Slot"}),e.jsx(y,{value:v.time,onChange:s=>Q({...v,time:s.target.value}),placeholder:"e.g., 9:00-9:45"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Subject"}),e.jsxs("select",{value:v.subject,onChange:s=>Q({...v,subject:s.target.value}),className:"w-full p-3 border border-border rounded-lg bg-background",children:[e.jsx("option",{value:"",children:"Select Subject"}),e.jsx("option",{value:"Mathematics",children:"Mathematics"}),e.jsx("option",{value:"Physics",children:"Physics"}),e.jsx("option",{value:"Chemistry",children:"Chemistry"}),e.jsx("option",{value:"Biology",children:"Biology"}),e.jsx("option",{value:"English",children:"English"}),e.jsx("option",{value:"Hindi",children:"Hindi"}),e.jsx("option",{value:"Computer Science",children:"Computer Science"}),e.jsx("option",{value:"Physical Education",children:"Physical Education"}),e.jsx("option",{value:"Art",children:"Art"}),e.jsx("option",{value:"Music",children:"Music"}),e.jsx("option",{value:"Break",children:"Break"}),e.jsx("option",{value:"Lunch Break",children:"Lunch Break"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Teacher"}),e.jsx(y,{value:v.teacher,onChange:s=>Q({...v,teacher:s.target.value}),placeholder:"Teacher name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Room/Location"}),e.jsx(y,{value:v.room,onChange:s=>Q({...v,room:s.target.value}),placeholder:"e.g., Room 101, Lab-1, Playground"})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx(i,{onClick:()=>{const s=`royal-academy-timetable-${w}${A}`,t=localStorage.getItem(s);if(t&&v)try{const a=JSON.parse(t);if(a&&a.schedule&&Array.isArray(a.schedule)){const r=a.schedule.find(o=>o.day===v.day);r&&(v.index!==void 0?r.periods[v.index]={time:v.time,subject:v.subject,teacher:v.teacher,room:v.room}:r.periods.push({time:v.time,subject:v.subject,teacher:v.teacher,room:v.room}),localStorage.setItem(s,JSON.stringify(a)),alert("Period saved successfully!"))}}catch(a){console.error("Error parsing or updating timetable data:",a),alert("Error saving period. Please try again.")}pe(!1),Q(null),ie(w)},className:"flex-1 bg-gradient-to-r from-gold to-yellow-500 text-black",children:"Save Period"}),e.jsx(i,{variant:"outline",onClick:()=>{pe(!1),Q(null)},className:"flex-1",children:"Cancel"})]})]})}),p==="admissionsmanager"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-6 border border-border/50",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs(i,{variant:"outline",onClick:()=>m("dashboard"),size:"sm",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),e.jsx(l.Suspense,{fallback:e.jsx(S,{}),children:e.jsx(Ia,{})})]})}),p==="events"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-heading font-bold text-foreground",children:"Events & News Management"}),e.jsx(i,{variant:"outline",onClick:()=>m("dashboard"),size:"sm",children:"Back to Dashboard"})]}),e.jsx(l.Suspense,{fallback:e.jsx(S,{}),children:e.jsx(Ra,{})})]})}),p==="categories"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-heading font-bold text-foreground",children:"Event Categories Management"}),e.jsx(i,{variant:"outline",onClick:()=>m("dashboard"),size:"sm",children:"Back to Dashboard"})]}),e.jsx(l.Suspense,{fallback:e.jsx(S,{}),children:e.jsx(Ea,{})})]})}),p==="branding"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-6 border border-border/50",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs(i,{variant:"outline",onClick:()=>m("dashboard"),size:"sm",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),e.jsx(l.Suspense,{fallback:e.jsx(S,{}),children:e.jsx(Ta,{})})]})}),p==="academicsmanager"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-heading font-bold text-foreground",children:"Academic Content Management"}),e.jsx(i,{variant:"outline",onClick:()=>m("dashboard"),size:"sm",children:"Back to Dashboard"})]}),e.jsx(l.Suspense,{fallback:e.jsx(S,{}),children:e.jsx(La,{})})]})}),p==="facilitiesmanager"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-heading font-bold text-foreground",children:"Facilities Content Management"}),e.jsx(i,{variant:"outline",onClick:()=>m("dashboard"),size:"sm",children:"Back to Dashboard"})]}),e.jsx(l.Suspense,{fallback:e.jsx(S,{}),children:e.jsx(Ma,{})})]})}),p==="contactforms"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-6 sm:mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-lg sm:rounded-xl p-4 sm:p-6 border border-border/50",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 sm:mb-6 space-y-3 sm:space-y-0",children:[e.jsx("h2",{className:"text-base sm:text-lg font-heading font-bold text-foreground",children:"Contact Forms Management"}),e.jsxs(i,{variant:"outline",onClick:()=>m("dashboard"),size:"sm",className:"w-full sm:w-auto",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ke,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(y,{placeholder:"Search contact forms by name, email, phone...",value:Pe,onChange:s=>tt(s.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>{const s=z.map(t=>t.id);Z(s)},className:"text-xs sm:text-sm",children:"Select All"}),e.jsxs(i,{variant:"destructive",size:"sm",onClick:qt,disabled:E.length===0,className:"text-xs sm:text-sm",children:[e.jsx(j,{className:"h-4 w-4 mr-1"}),"Delete Selected (",E.length,")"]})]})]}),e.jsx("div",{className:"bg-background rounded-lg border border-border overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 sm:px-4 py-3 text-left text-xs sm:text-sm font-medium text-muted-foreground",children:e.jsx("input",{type:"checkbox",checked:E.length>0&&E.length===z.filter(s=>{var a,r,o,c;const t=Pe.toLowerCase();return!t||((a=s.name)==null?void 0:a.toLowerCase().includes(t))||((r=s.email)==null?void 0:r.toLowerCase().includes(t))||((o=s.phone)==null?void 0:o.toLowerCase().includes(t))||((c=s.class)==null?void 0:c.toLowerCase().includes(t))}).length,onChange:s=>{if(s.target.checked){const t=z.filter(a=>{var o,c,n,u;const r=Pe.toLowerCase();return!r||((o=a.name)==null?void 0:o.toLowerCase().includes(r))||((c=a.email)==null?void 0:c.toLowerCase().includes(r))||((n=a.phone)==null?void 0:n.toLowerCase().includes(r))||((u=a.class)==null?void 0:u.toLowerCase().includes(r))}).map(a=>a.id);Z(t)}else Z([])},className:"h-4 w-4 rounded border-border"})}),e.jsx("th",{className:"px-2 sm:px-4 py-3 text-left text-xs sm:text-sm font-medium text-muted-foreground",children:"Name"}),e.jsx("th",{className:"px-2 sm:px-4 py-3 text-left text-xs sm:text-sm font-medium text-muted-foreground",children:"Class"}),e.jsx("th",{className:"px-2 sm:px-4 py-3 text-left text-xs sm:text-sm font-medium text-muted-foreground",children:"Phone"}),e.jsx("th",{className:"px-2 sm:px-4 py-3 text-left text-xs sm:text-sm font-medium text-muted-foreground",children:"Email"}),e.jsx("th",{className:"px-2 sm:px-4 py-3 text-left text-xs sm:text-sm font-medium text-muted-foreground",children:"Submitted"}),e.jsx("th",{className:"px-2 sm:px-4 py-3 text-left text-xs sm:text-sm font-medium text-muted-foreground",children:"Status"}),e.jsx("th",{className:"px-2 sm:px-4 py-3 text-left text-xs sm:text-sm font-medium text-muted-foreground",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-border",children:[z.filter(s=>{var a,r,o,c;const t=Pe.toLowerCase();return!t||((a=s.name)==null?void 0:a.toLowerCase().includes(t))||((r=s.email)==null?void 0:r.toLowerCase().includes(t))||((o=s.phone)==null?void 0:o.toLowerCase().includes(t))||((c=s.class)==null?void 0:c.toLowerCase().includes(t))}).map(s=>e.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[e.jsx("td",{className:"px-2 sm:px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:E.includes(s.id),onChange:t=>{t.target.checked?Z([...E,s.id]):Z(E.filter(a=>a!==s.id))},className:"h-4 w-4 rounded border-border"})}),e.jsx("td",{className:"px-2 sm:px-4 py-3 text-xs sm:text-sm text-foreground font-medium",children:s.name||"N/A"}),e.jsx("td",{className:"px-2 sm:px-4 py-3 text-xs sm:text-sm text-muted-foreground",children:s.class||"Not specified"}),e.jsx("td",{className:"px-2 sm:px-4 py-3 text-xs sm:text-sm text-muted-foreground",children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("span",{className:"truncate max-w-[80px] sm:max-w-none",children:s.phone||"N/A"}),s.phone&&e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(s.phone),alert("Phone number copied to clipboard!")},className:"p-1 rounded hover:bg-muted transition-colors",title:"Copy phone number",children:e.jsx(Xs,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})})]})}),e.jsx("td",{className:"px-2 sm:px-4 py-3 text-xs sm:text-sm text-muted-foreground",children:e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("span",{className:"truncate max-w-[80px] sm:max-w-none",children:s.email||"N/A"}),s.email&&e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(s.email),alert("Email copied to clipboard!")},className:"p-1 rounded hover:bg-muted transition-colors",title:"Copy email address",children:e.jsx(Xs,{className:"h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"})})]})}),e.jsx("td",{className:"px-2 sm:px-4 py-3 text-xs sm:text-sm text-muted-foreground",children:s.submittedAt?new Date(s.submittedAt).toLocaleDateString():"Unknown"}),e.jsx("td",{className:"px-2 sm:px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${s.status==="new"?"bg-green-100 text-green-800 border border-green-200":"bg-gray-100 text-gray-800 border border-gray-200"}`,children:s.status==="new"?"New":"Processed"})}),e.jsx("td",{className:"px-2 sm:px-4 py-3",children:e.jsxs(i,{variant:"ghost",size:"sm",onClick:()=>Yt(s.id),className:"h-7 px-2 text-xs bg-red-500/10 hover:bg-red-500/20 text-red-600",title:"Delete Contact Form",children:[e.jsx(j,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"sr-only",children:"Delete"})]})})]},s.id)),z.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsx(Ks,{className:"h-12 w-12 text-muted-foreground/50"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-foreground mb-1",children:"No contact forms yet"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Contact forms submitted through the admissions page will appear here."})]})]})})})]})]})})}),z.length>0&&e.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:z.filter(s=>s.status==="new").length}),e.jsx("div",{className:"text-sm text-green-700",children:"New Forms"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:z.length}),e.jsx("div",{className:"text-sm text-blue-700",children:"Total Forms"})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:z.filter(s=>s.submittedAt&&new Date(s.submittedAt)>new Date(Date.now()-7*24*60*60*1e3)).length}),e.jsx("div",{className:"text-sm text-yellow-700",children:"This Week"})]})]})]})}),xt&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-card rounded-xl p-3 sm:p-6 w-full max-w-md border border-border/50 max-h-[90vh] overflow-y-auto scroll-smooth",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-foreground",children:"Send Principal Remark"}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{Be(!1),$({studentId:"",type:"good",message:"",subject:"",images:[]})},className:"h-8 w-8 p-0",children:e.jsx(j,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Filter Students"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[e.jsx("div",{children:e.jsxs("select",{value:V.class,onChange:s=>ts(t=>({...t,class:s.target.value})),className:"w-full px-3 py-2 text-sm border border-border rounded-lg bg-background text-foreground min-h-[44px]",children:[e.jsx("option",{value:"",children:"Class (1-12)"}),ca.map(s=>e.jsxs("option",{value:s,children:["Class ",s]},s))]})}),e.jsx("div",{children:e.jsxs("select",{value:V.section,onChange:s=>ts(t=>({...t,section:s.target.value.toUpperCase()})),className:"w-full px-3 py-2 text-sm border border-border rounded-lg bg-background text-foreground min-h-[44px]",children:[e.jsx("option",{value:"",children:"Section (A-E)"}),da.map(s=>e.jsxs("option",{value:s,children:["Section ",s]},s))]})}),e.jsx("div",{children:e.jsx(y,{value:V.roll,onChange:s=>ts(t=>({...t,roll:s.target.value})),placeholder:"Roll no.",className:"text-sm min-h-[44px]",type:"number",min:"1"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Select Student"}),e.jsxs("select",{value:g.studentId,onChange:s=>$({...g,studentId:s.target.value}),className:"w-full px-3 py-2 text-sm border border-border rounded-lg bg-background text-foreground min-h-[44px]",disabled:Ne.length===0,children:[e.jsx("option",{value:"",children:"Choose a student..."}),Ne.map(s=>e.jsxs("option",{value:s.id,children:[s.name||s.fullName," - Class ",s.class,"-",s.section]},s.id))]}),Ne.length===0&&e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"No students match the selected filters."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Remark Type"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer min-h-[44px] px-3 py-2 rounded-lg border border-border/30 hover:bg-muted/20 transition-colors",children:[e.jsx("input",{type:"radio",value:"good",checked:g.type==="good",onChange:s=>$({...g,type:s.target.value}),className:"text-green-500 w-4 h-4"}),e.jsx("span",{className:"text-green-500 font-medium text-sm",children:"Good Remark"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer min-h-[44px] px-3 py-2 rounded-lg border border-border/30 hover:bg-muted/20 transition-colors",children:[e.jsx("input",{type:"radio",value:"bad",checked:g.type==="bad",onChange:s=>$({...g,type:s.target.value}),className:"text-red-500 w-4 h-4"}),e.jsx("span",{className:"text-red-500 font-medium text-sm",children:"Bad Remark"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Subject (Optional)"}),e.jsx(y,{value:g.subject,onChange:s=>$({...g,subject:s.target.value}),placeholder:"e.g., Behavior, Academic Performance",className:"min-h-[44px] text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Remark Message"}),e.jsx("textarea",{value:g.message,onChange:s=>$({...g,message:s.target.value}),placeholder:"Enter your remark message...",rows:3,className:"w-full px-3 py-2 text-sm border border-border rounded-lg bg-background text-foreground resize-none min-h-[88px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Attach Photos (optional, max 4)"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:async s=>{const t=s.target.files;if(!t)return;const a=g.images||[],r=Array.from(t).slice(0,4-a.length),o=[];for(const c of r)if(c.type.startsWith("image/"))try{const n=await Dt(c);o.push(n)}catch(n){console.error("Failed to convert image",n)}$(c=>({...c,images:[...c.images||[],...o]})),s.target.value=""},className:"w-full text-xs"}),g.images&&g.images.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:g.images.map((s,t)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s,alt:`remark-${t}`,className:"w-16 h-16 object-cover rounded-lg border border-border/30"}),e.jsx("button",{type:"button",onClick:()=>$(a=>{var r;return{...a,images:((r=a.images)==null?void 0:r.filter((o,c)=>c!==t))||[]}}),className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs",children:"×"})]},t))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-2",children:[e.jsx(i,{variant:"outline",onClick:()=>{Be(!1),$({studentId:"",type:"good",message:"",subject:"",images:[]})},className:"flex-1 min-h-[44px] text-sm",children:"Cancel"}),e.jsxs(i,{onClick:Zt,className:`flex-1 min-h-[44px] text-sm text-white ${g.type==="good"?"bg-gradient-to-r from-green-500 to-green-600":"bg-gradient-to-r from-red-500 to-red-600"}`,disabled:!g.studentId||!g.message,children:[e.jsx(qs,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{className:"hidden sm:inline",children:["Send ",g.type==="good"?"Good":"Bad"," Remark"]}),e.jsx("span",{className:"sm:hidden",children:"Send Remark"})]})]})]})]})}),as&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-2 sm:p-4",children:e.jsxs(x.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-card rounded-2xl w-full max-w-6xl border border-border/50 max-h-[95vh] overflow-y-auto scroll-smooth p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg sm:text-xl font-heading font-bold text-foreground",children:"Student Look Up"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Filter by class, section, roll number or search by student ID created by teachers."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:Fs,className:"min-w-[90px]",children:"Clear Filters"}),e.jsx(i,{variant:"ghost",size:"icon",onClick:Mt,className:"h-9 w-9",children:e.jsx(j,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Class"}),e.jsxs("select",{value:I.class,onChange:s=>Oe("class",s.target.value),className:"w-full px-3 py-2 text-sm border border-border rounded-lg bg-background text-foreground",children:[e.jsx("option",{value:"",children:"All Classes"}),ia.map(s=>e.jsxs("option",{value:s,children:["Class ",s]},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Section"}),e.jsxs("select",{value:I.section,onChange:s=>Oe("section",s.target.value),className:"w-full px-3 py-2 text-sm border border-border rounded-lg bg-background text-foreground",children:[e.jsx("option",{value:"",children:"All Sections"}),na.map(s=>e.jsxs("option",{value:s,children:["Section ",s.toUpperCase()]},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Roll Number"}),e.jsx(y,{value:I.roll,onChange:s=>Oe("roll",s.target.value),placeholder:"e.g., 23",className:"text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Student ID"}),e.jsx(y,{value:I.studentId,onChange:s=>Oe("studentId",s.target.value),placeholder:"Search by ID",className:"text-sm"})]})]}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-2 mt-4",children:[e.jsxs("div",{className:"border border-border/60 rounded-2xl p-4 bg-background/60",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-semibold text-sm text-foreground",children:["Matching Students (",rs.length,")"]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Tap to view details"})]}),e.jsx("div",{className:"mt-3 space-y-2 max-h-[60vh] overflow-y-auto scroll-smooth pr-1",children:rs.length>0?rs.map(s=>{const t=(f==null?void 0:f.id)===s.id;return e.jsx("button",{onClick:()=>Bt(s),className:`w-full text-left p-3 rounded-xl border transition-all duration-150 ${t?"border-primary/70 bg-primary/10 shadow-inner":"border-border/60 hover:border-primary/40 hover:bg-muted/40"}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:s.name||s.fullName||"Unnamed Student"}),e.jsxs("p",{className:"text-[11px] text-muted-foreground",children:["ID: ",s.id||"N/A"]})]}),e.jsxs("div",{className:"text-right text-[11px] text-muted-foreground",children:[e.jsxs("div",{children:["Class ",s.class||"—","-",s.section||"—"]}),e.jsxs("div",{children:["Roll ",s.rollNumber||"—"]})]})]})},s.id)}):e.jsx("div",{className:"text-sm text-muted-foreground text-center py-12",children:"No students match the selected filters."})})]}),e.jsx("div",{className:"border border-border/60 rounded-2xl p-4 bg-background/60",children:f?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full border border-border/60 overflow-hidden bg-muted/30 flex items-center justify-center",children:Us(f)?e.jsx("img",{src:Us(f),alt:f.name||f.fullName,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-lg font-semibold text-foreground",children:(f.name||f.fullName||"NA").split(" ").map(s=>s[0]).join("").slice(0,2).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold text-foreground",children:f.name||f.fullName}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Student ID: ",f.id]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Class ",f.class,"-",f.section," · Roll ",f.rollNumber||"N/A"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-xl border border-border/50 bg-gradient-to-br from-background to-muted/20",children:[e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Pending Fees"}),e.jsx("p",{className:"text-lg font-semibold text-foreground",children:Ve.dueAmount>0?`Rs ${Ve.dueAmount.toLocaleString()}`:"No Dues"})]}),e.jsxs("div",{className:"p-3 rounded-xl border border-border/50 bg-gradient-to-br from-background to-muted/20",children:[e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Attendance (Present)"}),e.jsxs("p",{className:"text-lg font-semibold text-green-500",children:[(M==null?void 0:M.present)||0," days"]})]}),e.jsxs("div",{className:"p-3 rounded-xl border border-border/50 bg-gradient-to-br from-background to-muted/20",children:[e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Teacher Remarks"}),e.jsxs("p",{className:"text-lg font-semibold text-foreground",children:[Je.length," total"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-[11px]",children:[e.jsxs("div",{className:"rounded-lg border border-border/40 py-2",children:[e.jsx("p",{className:"text-muted-foreground",children:"Absent"}),e.jsx("p",{className:"text-base font-semibold text-red-400",children:(M==null?void 0:M.absent)||0})]}),e.jsxs("div",{className:"rounded-lg border border-border/40 py-2",children:[e.jsx("p",{className:"text-muted-foreground",children:"Late"}),e.jsx("p",{className:"text-base font-semibold text-yellow-400",children:(M==null?void 0:M.late)||0})]}),e.jsxs("div",{className:"rounded-lg border border-border/40 py-2",children:[e.jsx("p",{className:"text-muted-foreground",children:"Total"}),e.jsx("p",{className:"text-base font-semibold text-foreground",children:(M==null?void 0:M.total)||0})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-foreground mb-2",children:"Pending Fees"}),Ve.pending.length>0?e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto pr-1",children:Ve.pending.map(s=>{var t;return e.jsxs("div",{className:"p-2 rounded-lg border border-border/40 flex items-center justify-between text-xs",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-foreground",children:[s.month," ",s.year]}),e.jsx("p",{className:"text-[11px] text-muted-foreground capitalize",children:s.status})]}),e.jsxs("span",{className:"font-semibold text-foreground",children:["Rs ",(t=s.amount)==null?void 0:t.toLocaleString()]})]},s.id)})}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"No pending fee requests."})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-foreground mb-2",children:["Teacher Remarks (",Je.length,")"]}),Je.length>0?e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto pr-1",children:Je.slice().reverse().map((s,t)=>e.jsxs("div",{className:"p-3 rounded-xl border border-border/40 bg-muted/10",children:[e.jsxs("div",{className:"flex items-center justify-between text-[11px] mb-1",children:[e.jsxs("span",{className:`font-semibold ${s.type==="good"?"text-green-500":"text-red-500"}`,children:[s.type==="good"?"Good":"Bad"," Remark"]}),e.jsx("span",{className:"text-muted-foreground",children:s.date?new Date(s.date).toLocaleDateString():"—"})]}),e.jsx("p",{className:"text-xs font-medium text-foreground",children:s.subject||"General"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 whitespace-pre-line",children:s.message}),s.images&&s.images.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2 items-center",children:s.images.map((a,r)=>e.jsx("img",{src:a,alt:`Remark attachment ${r+1}`,className:"w-16 h-16 object-cover rounded-lg border border-border/40 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{_s(s.images||[]),Fe(r),$s(s),zs(!0)}},r))})]},t))}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"No teacher remarks have been recorded yet."})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-foreground mb-2",children:["Principal Remarks (",ns.length,")"]}),ns.length>0?e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto pr-1",children:ns.slice().reverse().map(s=>e.jsxs("div",{className:"p-3 rounded-xl border border-border/40 bg-muted/5",children:[e.jsxs("div",{className:"flex items-center justify-between text-[11px] mb-1",children:[e.jsxs("span",{className:`font-semibold ${s.type==="good"?"text-green-500":"text-red-500"}`,children:[s.type==="good"?"Good":"Bad"," Remark"]}),e.jsx("span",{className:"text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString()})]}),e.jsx("p",{className:"text-xs font-medium text-foreground",children:s.subject||"General"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 whitespace-pre-line",children:s.message}),s.images&&s.images.length>0&&e.jsxs(i,{size:"sm",variant:"outline",className:"mt-2 w-full text-xs",onClick:()=>{Ms(s.images||[]),$e(0),Bs(s),Ls(!0)},children:[e.jsx(He,{className:"h-3 w-3 mr-1"}),"View Images (",s.images.length,")"]})]},s.id))}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"No principal remarks yet."})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-foreground mb-2",children:["Report Cards (",cs.length,")"]}),cs.length>0?e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto pr-1",children:cs.slice().reverse().map(s=>e.jsxs("div",{className:"p-3 rounded-xl border border-border/40 bg-muted/5 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:s.subject}),e.jsxs("p",{className:"text-[11px] text-muted-foreground",children:["By ",s.teacherName," · ",new Date(s.createdAt).toLocaleDateString()]}),s.notes&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s.notes})]}),s.reportImage&&e.jsx(i,{size:"sm",variant:"outline",onClick:()=>{Rs(s.reportImage),Es(s),Ts(!0)},children:"View Report"})]},s.id))}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"No report cards have been uploaded for this student."})]})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center text-sm text-muted-foreground py-12",children:[e.jsx(ke,{className:"h-6 w-6 mb-2 opacity-70"}),"Select a student from the list to view their fees, attendance, remarks, and report cards."]})})]})]})}),Nt&&N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-card rounded-xl p-6 w-full max-w-2xl border border-border/50 max-h-[80vh] overflow-y-auto scroll-smooth",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Reply to Notification"}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{ye(!1),re(null),ce("")},children:e.jsx(j,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-muted/20 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-2",children:N.subject}),e.jsxs("p",{className:"text-sm text-blue-400 mb-2",children:["From: ",N.fromName," (",N.fromType,")"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:N.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(N.createdAt).toLocaleDateString()})]}),N.replies&&N.replies.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Previous Replies:"}),e.jsx("div",{className:"space-y-2",children:N.replies.map(s=>e.jsx("div",{className:"bg-muted/10 rounded-lg p-3 border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm text-blue-400 mb-1",children:[s.fromName," (",s.fromType,")"]}),e.jsx("p",{className:"text-sm text-foreground mb-1",children:s.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString()})]}),s.fromType==="principal"&&e.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{var c;ce(s.message);const t=((c=N.replies)==null?void 0:c.filter(n=>n.id!==s.id))||[],a={...N,replies:t};re(a);const o=JSON.parse(localStorage.getItem("royal-academy-notifications")||"[]").map(n=>n.id===N.id?a:n);localStorage.setItem("royal-academy-notifications",JSON.stringify(o)),te(n=>n.map(u=>u.id===N.id?a:u))},className:"h-6 w-6 p-0 text-blue-600 hover:text-blue-700",title:"Edit Reply",children:e.jsx(me,{className:"h-3 w-3"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{var t;if(confirm("Are you sure you want to delete this reply?")){const a=((t=N.replies)==null?void 0:t.filter(n=>n.id!==s.id))||[],r={...N,replies:a};re(r);const c=JSON.parse(localStorage.getItem("royal-academy-notifications")||"[]").map(n=>n.id===N.id?r:n);localStorage.setItem("royal-academy-notifications",JSON.stringify(c)),te(n=>n.map(u=>u.id===N.id?r:u))}},className:"h-6 w-6 p-0 text-red-600 hover:text-red-700",title:"Delete Reply",children:e.jsx(j,{className:"h-3 w-3"})})]})]})},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Your Reply"}),e.jsx("textarea",{value:ze,onChange:s=>ce(s.target.value),placeholder:"Enter your reply message...",rows:4,className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground resize-none"})]}),e.jsxs("div",{className:"flex space-x-2 pt-2",children:[e.jsx(i,{variant:"outline",onClick:()=>{ye(!1),re(null),ce("")},className:"flex-1",children:"Cancel"}),e.jsxs(i,{onClick:ea,className:"flex-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white",disabled:!ze,children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Send Reply"]})]})]})]})}),wt&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-3 sm:p-4",children:e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-card rounded-lg sm:rounded-xl w-full max-w-[calc(100vw-24px)] sm:max-w-lg border border-border/50 flex flex-col max-h-[85vh] sm:max-h-[90vh] mx-3 sm:mx-0",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-border/50 flex-shrink-0",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-foreground",children:[e.jsx("span",{className:"sm:hidden",children:"Notify Students"}),e.jsx("span",{className:"hidden sm:inline",children:"Send Notification to Students"})]}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{_e(!1),P({subject:"",message:"",targetType:"all",targetClass:"",targetSection:"",targetStudentId:"",photo1:"",photo2:""})},className:"h-8 w-8 p-0 sm:h-9 sm:w-9",children:e.jsx(j,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"overflow-y-auto flex-1 p-4 sm:p-6 space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Send To"}),e.jsxs("select",{value:d.targetType,onChange:s=>P({...d,targetType:s.target.value,targetClass:"",targetSection:"",targetStudentId:""}),className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground text-sm",children:[e.jsx("option",{value:"all",children:"All Students"}),e.jsx("option",{value:"class",children:"Specific Class"}),e.jsx("option",{value:"section",children:"Specific Section"}),e.jsx("option",{value:"student",children:"Individual Student"})]})]}),(d.targetType==="class"||d.targetType==="section"||d.targetType==="student")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Select Class"}),e.jsxs("select",{value:d.targetClass,onChange:s=>P({...d,targetClass:s.target.value,targetSection:"",targetStudentId:""}),className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground text-sm",children:[e.jsx("option",{value:"",children:"Choose a class..."}),Array.from(new Set(F.map(s=>s.class))).map(s=>e.jsxs("option",{value:s,children:["Class ",s]},s))]})]}),(d.targetType==="section"||d.targetType==="student")&&d.targetClass&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Select Section"}),e.jsxs("select",{value:d.targetSection,onChange:s=>P({...d,targetSection:s.target.value,targetStudentId:""}),className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground text-sm",children:[e.jsx("option",{value:"",children:"Choose a section..."}),Array.from(new Set(F.filter(s=>s.class===d.targetClass).map(s=>s.section))).map(s=>e.jsxs("option",{value:s,children:["Section ",s]},s))]})]}),d.targetType==="student"&&d.targetClass&&d.targetSection&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Select Student"}),e.jsxs("select",{value:d.targetStudentId,onChange:s=>P({...d,targetStudentId:s.target.value}),className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground text-sm",children:[e.jsx("option",{value:"",children:"Choose a student..."}),F.filter(s=>s.class===d.targetClass&&s.section===d.targetSection).map(s=>e.jsxs("option",{value:s.id,children:[s.name," - Roll: ",s.rollNumber]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Subject"}),e.jsx(y,{value:d.subject,onChange:s=>P({...d,subject:s.target.value}),placeholder:"Enter notification subject",className:"text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Message"}),e.jsx("textarea",{value:d.message,onChange:s=>P({...d,message:s.target.value}),placeholder:"Enter your message to students...",rows:3,className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground resize-none text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Photo Attachments (Optional)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] sm:text-xs text-muted-foreground mb-1",children:"Photo 1"}),e.jsx("input",{type:"file",accept:"image/*",onChange:s=>{var a;const t=(a=s.target.files)==null?void 0:a[0];if(t){const r=new FileReader;r.onload=o=>{var n;const c=(n=o.target)==null?void 0:n.result;P({...d,photo1:c})},r.readAsDataURL(t)}},className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 border border-border rounded-lg bg-background text-foreground text-xs sm:text-sm file:mr-2 sm:file:mr-4 file:py-1 sm:file:py-2 file:px-2 sm:file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),d.photo1&&e.jsxs("div",{className:"mt-2 relative",children:[e.jsx("img",{src:d.photo1,alt:"Photo 1 preview",className:"w-16 h-16 sm:w-20 sm:h-20 object-cover rounded border"}),e.jsx("button",{type:"button",onClick:()=>P({...d,photo1:""}),className:"absolute -top-1 -right-1 sm:-top-2 sm:-right-2 bg-red-500 text-white rounded-full w-4 h-4 sm:w-5 sm:h-5 flex items-center justify-center text-xs hover:bg-red-600",children:"×"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] sm:text-xs text-muted-foreground mb-1",children:"Photo 2"}),e.jsx("input",{type:"file",accept:"image/*",onChange:s=>{var a;const t=(a=s.target.files)==null?void 0:a[0];if(t){const r=new FileReader;r.onload=o=>{var n;const c=(n=o.target)==null?void 0:n.result;P({...d,photo2:c})},r.readAsDataURL(t)}},className:"w-full px-2 sm:px-3 py-1.5 sm:py-2 border border-border rounded-lg bg-background text-foreground text-xs sm:text-sm file:mr-2 sm:file:mr-4 file:py-1 sm:file:py-2 file:px-2 sm:file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),d.photo2&&e.jsxs("div",{className:"mt-2 relative",children:[e.jsx("img",{src:d.photo2,alt:"Photo 2 preview",className:"w-16 h-16 sm:w-20 sm:h-20 object-cover rounded border"}),e.jsx("button",{type:"button",onClick:()=>P({...d,photo2:""}),className:"absolute -top-1 -right-1 sm:-top-2 sm:-right-2 bg-red-500 text-white rounded-full w-4 h-4 sm:w-5 sm:h-5 flex items-center justify-center text-xs hover:bg-red-600",children:"×"})]})]})]})]}),e.jsx("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-lg p-2 sm:p-3",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Ce,{className:"h-3 w-3 sm:h-4 sm:w-4 text-purple-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs sm:text-sm min-w-0",children:[e.jsx("p",{className:"font-medium text-foreground mb-1",children:"Notification Target"}),e.jsxs("p",{className:"text-[10px] sm:text-xs text-muted-foreground break-words",children:[d.targetType==="all"&&"This notification will be sent to all students in the school.",d.targetType==="class"&&d.targetClass&&`This notification will be sent to all students in Class ${d.targetClass}.`,d.targetType==="section"&&d.targetClass&&d.targetSection&&`This notification will be sent to all students in Class ${d.targetClass}-${d.targetSection}.`,d.targetType==="student"&&d.targetStudentId&&"This notification will be sent to the selected student only."]})]})]})})]}),e.jsx("div",{className:"flex-shrink-0 border-t border-border/50 p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row space-y-reverse space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsx(i,{variant:"outline",onClick:()=>{_e(!1),P({subject:"",message:"",targetType:"all",targetClass:"",targetSection:"",targetStudentId:"",photo1:"",photo2:""})},className:"w-full sm:flex-1 h-10 sm:h-9 text-sm border-2 border-gold text-black hover:bg-gold/10 hover:border-gold/80",children:"Cancel"}),e.jsxs(i,{onClick:sa,className:"w-full sm:flex-1 bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white border-2 border-purple-500 h-10 sm:h-9 text-sm mb-2 sm:mb-0",disabled:!d.subject||!d.message,children:[e.jsx(Ce,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"sm:hidden",children:"Send"}),e.jsx("span",{className:"hidden sm:inline",children:"Send Notification"})]})]})})]})})]}),Te.show&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>he({show:!1,admissionId:null,studentName:""}),children:e.jsxs("div",{className:"bg-background rounded-2xl shadow-2xl w-full max-w-md",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsx("h3",{className:"text-lg font-heading font-bold text-red-600",children:"Confirm Deletion"}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>he({show:!1,admissionId:null,studentName:""}),children:e.jsx(j,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("p",{className:"text-foreground mb-4",children:["Are you sure you want to delete the admission record for ",e.jsx("strong",{children:Te.studentName}),"?"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"This action cannot be undone. All information including documents will be permanently deleted from Supabase."}),e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx("input",{type:"checkbox",id:"neverAskAgain",checked:fs,onChange:s=>Qe(s.target.checked),className:"w-4 h-4 rounded border-border"}),e.jsx("label",{htmlFor:"neverAskAgain",className:"text-sm text-muted-foreground cursor-pointer",children:"Don't ask me again"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 p-4 border-t border-border",children:[e.jsx(i,{variant:"outline",onClick:()=>{he({show:!1,admissionId:null,studentName:""}),Qe(!1)},children:"Cancel"}),e.jsx(i,{onClick:Ht,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Permanently"})]})]})}),p==="topscorerslearnmore"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-heading font-bold text-foreground",children:"Top Scorers Learn More Content"}),e.jsx(i,{variant:"outline",onClick:()=>m("dashboard"),size:"sm",children:"Back to Dashboard"})]}),e.jsx(l.Suspense,{fallback:e.jsx(S,{}),children:e.jsx(_a,{})})]})}),kt&&ls&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-card rounded-xl w-full max-w-2xl border border-border/50 overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border/30",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Report Card"}),G&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[G.subject," - By ",G.teacherName]})]}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{Ts(!1),Rs(null),Es(null)},children:e.jsx(j,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex-1 overflow-auto bg-black/20 flex items-center justify-center p-4",children:e.jsx("img",{src:ls,alt:"Report Card",className:"max-w-full max-h-[calc(90vh-200px)] object-contain rounded-lg"})}),G&&e.jsxs("div",{className:"border-t border-border/30 p-4 bg-muted/20",children:[G.notes&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs font-semibold text-muted-foreground mb-1",children:"Notes:"}),e.jsx("p",{className:"text-sm text-foreground",children:G.notes})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:[new Date(G.createdAt).toLocaleDateString()," at ",new Date(G.createdAt).toLocaleTimeString()]}),e.jsxs(i,{size:"sm",variant:"outline",onClick:()=>{const s=document.createElement("a");s.href=ls,s.download=`report-${G.studentName}-${new Date(G.createdAt).getTime()}.png`,document.body.appendChild(s),s.click(),document.body.removeChild(s)},children:[e.jsx(hs,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})]})}),Ct&&le.length>0&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-card rounded-xl w-full max-w-2xl border border-border/50 overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border/30",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Remark Images"}),O&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[O.subject||"General"," - ",O.type==="good"?"Good":"Bad"," Remark"]})]}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{Ls(!1),Ms([]),$e(0),Bs(null)},children:e.jsx(j,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex-1 overflow-auto bg-black/20 flex items-center justify-center p-4",children:e.jsx("img",{src:le[q],alt:`Remark image ${q+1}`,className:"max-w-full max-h-[calc(90vh-200px)] object-contain rounded-lg"})}),e.jsxs("div",{className:"border-t border-border/30 p-4 bg-muted/20",children:[O&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Message:"}),e.jsx("p",{className:"text-sm text-foreground whitespace-pre-line line-clamp-2",children:O.message})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:le.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(i,{size:"sm",variant:"outline",onClick:()=>$e(Math.max(0,q-1)),disabled:q===0,children:"Previous"}),e.jsxs("span",{className:"text-xs text-muted-foreground px-2",children:[q+1," / ",le.length]}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>$e(Math.min(le.length-1,q+1)),disabled:q===le.length-1,children:"Next"})]})}),e.jsxs(i,{size:"sm",variant:"outline",onClick:()=>{const s=document.createElement("a");s.href=le[q],s.download=`remark-${O==null?void 0:O.studentName}-${q+1}-${new Date((O==null?void 0:O.createdAt)||"").getTime()}.png`,document.body.appendChild(s),s.click(),document.body.removeChild(s)},children:[e.jsx(hs,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})]})}),At&&oe.length>0&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-card rounded-xl w-full max-w-2xl border border-border/50 overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border/30",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Teacher Remark Images"}),U&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[U.subject||"General"," - ",U.type==="good"?"Good":"Bad"," Remark"]})]}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{zs(!1),_s([]),Fe(0),$s(null)},children:e.jsx(j,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex-1 overflow-auto bg-black/20 flex items-center justify-center p-4",children:e.jsx("img",{src:oe[K],alt:`Teacher remark image ${K+1}`,className:"max-w-full max-h-[calc(90vh-200px)] object-contain rounded-lg"})}),e.jsxs("div",{className:"border-t border-border/30 p-4 bg-muted/20",children:[U&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Message:"}),e.jsx("p",{className:"text-sm text-foreground whitespace-pre-line line-clamp-2",children:U.message})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:oe.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(i,{size:"sm",variant:"outline",onClick:()=>Fe(Math.max(0,K-1)),disabled:K===0,children:"Previous"}),e.jsxs("span",{className:"text-xs text-muted-foreground px-2",children:[K+1," / ",oe.length]}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>Fe(Math.min(oe.length-1,K+1)),disabled:K===oe.length-1,children:"Next"})]})}),e.jsxs(i,{size:"sm",variant:"outline",onClick:()=>{const s=document.createElement("a");s.href=oe[K],s.download=`teacher-remark-${(U==null?void 0:U.studentName)||"unknown"}-${K+1}-${new Date((U==null?void 0:U.date)||"").getTime()}.png`,document.body.appendChild(s),s.click(),document.body.removeChild(s)},children:[e.jsx(hs,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})]})}),Xe.show&&e.jsx(l.Suspense,{fallback:e.jsx(S,{}),children:e.jsx(Pa,{documentUrl:Xe.url,documentName:Xe.name,onClose:()=>J({show:!1,url:"",name:""})})})]})};export{Sr as default};
