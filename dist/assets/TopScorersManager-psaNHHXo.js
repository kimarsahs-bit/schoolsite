import{r as d,j as e,B as i,m,A as Y,X as w}from"./index-vcAYm6vD.js";import{I as x}from"./input-CVoIJ2zH.js";import{T as N}from"./textarea-B1JbTjEM.js";import{U as de}from"./users-DshTqfGB.js";import{B as F}from"./book-open-Cck4FFnk.js";import{C as L}from"./calendar-Cyjlwh6t.js";import{P as B}from"./plus-CSXBcpgr.js";import{S as T}from"./square-pen-BVw1FIsV.js";import{T as z}from"./trash-2-04KiNg8K.js";import{C as me}from"./camera-Bc_Ov7XJ.js";import{S as E}from"./save-5ZuEQXRf.js";import{S as xe}from"./star-C15iVDB7.js";import{A as he}from"./award-Bdl_Spfw.js";import{M as ge}from"./medal-C43PF4zz.js";import{C as ue}from"./crown-CU2Xsw6S.js";const Te=()=>{const[h,C]=d.useState("students"),[b,M]=d.useState([]),[g,k]=d.useState([]),[u,S]=d.useState([]),[a,r]=d.useState(null),[c,v]=d.useState(null),[o,y]=d.useState(null),[Z,j]=d.useState(!1),[q,f]=d.useState(!1),[W,p]=d.useState(!1),O=d.useRef(null);d.useEffect(()=>{const s=localStorage.getItem("royal-academy-top-scorers"),l=localStorage.getItem("royal-academy-categories"),n=localStorage.getItem("royal-academy-years");if(s&&M(JSON.parse(s)),l&&k(JSON.parse(l)),n&&S(JSON.parse(n)),!l){const t=[{id:"all",name:"All Subjects",icon:"BookOpen"},{id:"science",name:"Science",icon:"Zap"},{id:"mathematics",name:"Mathematics",icon:"Target"},{id:"english",name:"English",icon:"BookOpen"},{id:"overall",name:"Overall Performance",icon:"Crown"}];k(t),localStorage.setItem("royal-academy-categories",JSON.stringify(t))}if(!n){const t=[{id:"2024",name:"2024"},{id:"2023",name:"2023"},{id:"2022",name:"2022"}];S(t),localStorage.setItem("royal-academy-years",JSON.stringify(t))}},[]);const P=s=>{M(s),localStorage.setItem("royal-academy-top-scorers",JSON.stringify(s))},D=s=>{k(s),localStorage.setItem("royal-academy-categories",JSON.stringify(s))},R=s=>{S(s),localStorage.setItem("royal-academy-years",JSON.stringify(s))},X=s=>new Promise((l,n)=>{const t=new FileReader;t.readAsDataURL(s),t.onload=()=>l(t.result),t.onerror=I=>n(I)}),_=async s=>{if(!s||!a)return;const l=a.images||[],t=5-l.length;if(t<=0){alert("Maximum 5 images allowed per student");return}const I=Array.from(s).slice(0,t),J=[];for(const U of I)if(U.type.startsWith("image/"))try{const A=await X(U);J.push(A)}catch(A){console.error("Error converting image:",A)}const G=[...l,...J];r({...a,images:G,image:G[0]||a.image})},$=s=>{if(!a)return;const l=a.images.filter((n,t)=>t!==s);r({...a,images:l,image:l[0]||"/placeholder-image.svg"})},H=s=>{if(!a)return;const l=a.images[s];r({...a,image:l})},K=()=>{const s={id:Date.now(),name:"",slug:"",grade:"",subject:"overall",score:"",year:"2024",rank:1,achievements:[],image:"/placeholder-image.svg",images:[],description:"",fullBio:"",subjects:[],extracurricular:[],awards:[],futureGoals:"",universityAcceptances:[],testimonial:"",testimonialBy:""};r(s),j(!0)},Q=s=>{r({...s}),j(!0)},V=()=>{if(!a)return;const s=a.id===0||!b.find(l=>l.id===a.id)?[...b,{...a,id:a.id||Date.now()}]:b.map(l=>l.id===a.id?a:l);P(s),j(!1),r(null)},ee=s=>{if(confirm("Are you sure you want to delete this student?")){const l=b.filter(n=>n.id!==s);P(l)}},se=()=>{v({id:"",name:"",icon:"BookOpen"}),f(!0)},ae=s=>{v({...s}),f(!0)},le=()=>{if(!c||!c.name)return;const s=c.id||c.name.toLowerCase().replace(/\s+/g,"-"),l={...c,id:s},n=c.id&&g.find(t=>t.id===c.id)?g.map(t=>t.id===c.id?l:t):[...g,l];D(n),f(!1),v(null)},te=s=>{if(confirm("Are you sure you want to delete this category?")){const l=g.filter(n=>n.id!==s);D(l)}},ie=()=>{y({id:"",name:""}),p(!0)},re=s=>{y({...s}),p(!0)},ne=()=>{if(!o||!o.name)return;const s=o.id||o.name,l={...o,id:s},n=o.id&&u.find(t=>t.id===o.id)?u.map(t=>t.id===o.id?l:t):[...u,l];R(n),p(!1),y(null)},ce=s=>{if(confirm("Are you sure you want to delete this year?")){const l=u.filter(n=>n.id!==s);R(l)}},oe=s=>{switch(s){case 1:return e.jsx(ue,{className:"h-5 w-5 text-gold"});case 2:return e.jsx(ge,{className:"h-5 w-5 text-gray-400"});case 3:return e.jsx(he,{className:"h-5 w-5 text-amber-600"});default:return e.jsx(xe,{className:"h-5 w-5 text-blue-500"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-heading font-bold text-gradient-gold text-center sm:text-left",children:"Top Scorers Management"}),e.jsx("div",{className:"flex flex-col sm:flex-row items-center gap-2 w-full",children:e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsxs(i,{variant:h==="students"?"default":"outline",onClick:()=>C("students"),size:"sm",className:"flex-1 sm:flex-none",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden xs:inline",children:"Students"}),e.jsx("span",{className:"xs:hidden",children:"Students"})]}),e.jsxs(i,{variant:h==="categories"?"default":"outline",onClick:()=>C("categories"),size:"sm",className:"flex-1 sm:flex-none",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden xs:inline",children:"Categories"}),e.jsx("span",{className:"xs:hidden",children:"Cats"})]}),e.jsxs(i,{variant:h==="years"?"default":"outline",onClick:()=>C("years"),size:"sm",className:"flex-1 sm:flex-none",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden xs:inline",children:"Years"}),e.jsx("span",{className:"xs:hidden",children:"Years"})]})]})})]}),h==="students"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Manage Students"}),e.jsxs(i,{onClick:K,className:"bg-gradient-to-r from-gold to-yellow-500 text-black",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Add Student"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(s=>e.jsxs(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"card-3d p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-12 h-12 rounded-full object-cover border-2 border-gold/30"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-foreground",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.grade})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[oe(s.rank),e.jsxs("span",{className:"text-sm font-medium",children:["#",s.rank]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Score:"}),e.jsx("span",{className:"font-semibold text-gold",children:s.score})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>Q(s),className:"flex-1",children:[e.jsx(T,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsx(i,{variant:"destructive",size:"sm",onClick:()=>ee(s.id),children:e.jsx(z,{className:"h-3 w-3"})})]})]},s.id))})]}),h==="categories"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Manage Categories"}),e.jsxs(i,{onClick:se,className:"bg-gradient-to-r from-gold to-yellow-500 text-black",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Add Category"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(s=>e.jsxs(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"card-3d p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{className:"h-5 w-5 text-gold"}),e.jsx("span",{className:"font-semibold",children:s.name})]})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>ae(s),className:"flex-1",children:[e.jsx(T,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsx(i,{variant:"destructive",size:"sm",onClick:()=>te(s.id),children:e.jsx(z,{className:"h-3 w-3"})})]})]},s.id))})]}),h==="years"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Manage Years"}),e.jsxs(i,{onClick:ie,className:"bg-gradient-to-r from-gold to-yellow-500 text-black",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Add Year"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:u.map(s=>e.jsxs(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"card-3d p-4 text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-3",children:e.jsx(L,{className:"h-8 w-8 text-gold"})}),e.jsx("h4",{className:"font-semibold text-lg mb-3",children:s.name}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>re(s),className:"flex-1",children:[e.jsx(T,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsx(i,{variant:"destructive",size:"sm",onClick:()=>ce(s.id),children:e.jsx(z,{className:"h-3 w-3"})})]})]},s.id))})]}),e.jsx(Y,{children:Z&&a&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>j(!1),children:e.jsxs(m.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-background rounded-2xl shadow-2xl max-w-4xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-hidden mx-2 sm:mx-0",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[e.jsx("h3",{className:"text-xl font-heading font-bold",children:a.id?"Edit Student":"Add New Student"}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>j(!1),children:e.jsx(w,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"p-4 sm:p-6 overflow-y-auto max-h-[calc(95vh-140px)] sm:max-h-[calc(90vh-140px)]",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-gold",children:"Basic Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Name *"}),e.jsx(x,{value:a.name,onChange:s=>r({...a,name:s.target.value,slug:s.target.value.toLowerCase().replace(/\s+/g,"-")}),placeholder:"Student name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Grade *"}),e.jsx(x,{value:a.grade,onChange:s=>r({...a,grade:s.target.value}),placeholder:"e.g., Grade 12"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Subject Category *"}),e.jsx("select",{value:a.subject,onChange:s=>r({...a,subject:s.target.value}),className:"w-full p-3 border border-border rounded-lg bg-background",children:g.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Year *"}),e.jsx("select",{value:a.year,onChange:s=>r({...a,year:s.target.value}),className:"w-full p-3 border border-border rounded-lg bg-background",children:u.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rank *"}),e.jsx(x,{type:"number",min:"1",value:a.rank,onChange:s=>r({...a,rank:parseInt(s.target.value)||1})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Score *"}),e.jsx(x,{value:a.score,onChange:s=>r({...a,score:s.target.value}),placeholder:"e.g., 98.5%"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Student Images (1-5 images)"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{ref:O,type:"file",accept:"image/*",multiple:!0,onChange:s=>_(s.target.files),className:"hidden"}),e.jsxs(i,{type:"button",variant:"outline",onClick:()=>{var s;return(s=O.current)==null?void 0:s.click()},className:"w-full",disabled:a.images.length>=5,children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Upload Images from Device (",a.images.length,"/5)"]})]}),a.images.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"text-sm font-medium",children:"Uploaded Images:"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:a.images.map((s,l)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:s,alt:`Student ${l+1}`,className:"w-full h-24 object-cover rounded-lg border-2 border-border"}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center space-x-2",children:[e.jsx(i,{type:"button",size:"sm",variant:"outline",onClick:()=>H(l),className:"text-xs",children:a.image===s?"Primary":"Set Primary"}),e.jsx(i,{type:"button",size:"sm",variant:"destructive",onClick:()=>$(l),children:e.jsx(w,{className:"h-3 w-3"})})]}),a.image===s&&e.jsx("div",{className:"absolute -top-2 -right-2 bg-gold text-black text-xs px-2 py-1 rounded-full font-bold",children:"PRIMARY"})]},l))})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Or Image URL"}),e.jsx(x,{value:a.image,onChange:s=>r({...a,image:s.target.value}),placeholder:"https://..."})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-gold",children:"Detailed Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Short Description"}),e.jsx(N,{value:a.description,onChange:s=>r({...a,description:s.target.value}),placeholder:"Brief description...",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Full Biography"}),e.jsx(N,{value:a.fullBio,onChange:s=>r({...a,fullBio:s.target.value}),placeholder:"Detailed biography...",rows:4})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Achievements (comma-separated)"}),e.jsx(N,{value:a.achievements.join(", "),onChange:s=>r({...a,achievements:s.target.value.split(",").map(l=>l.trim()).filter(l=>l)}),placeholder:"Achievement 1, Achievement 2, ...",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Future Goals"}),e.jsx(N,{value:a.futureGoals,onChange:s=>r({...a,futureGoals:s.target.value}),placeholder:"Future aspirations...",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Testimonial"}),e.jsx(N,{value:a.testimonial,onChange:s=>r({...a,testimonial:s.target.value}),placeholder:"Faculty testimonial...",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Testimonial By"}),e.jsx(x,{value:a.testimonialBy,onChange:s=>r({...a,testimonialBy:s.target.value}),placeholder:"e.g., Dr. Sarah Johnson, Principal"})]})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-border",children:[e.jsx(i,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsxs(i,{onClick:V,className:"bg-gradient-to-r from-gold to-yellow-500 text-black",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Save Student"]})]})]})})}),e.jsx(Y,{children:q&&c&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>f(!1),children:e.jsxs(m.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-background rounded-2xl shadow-2xl max-w-md w-full",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[e.jsx("h3",{className:"text-xl font-heading font-bold",children:c.id?"Edit Category":"Add New Category"}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>f(!1),children:e.jsx(w,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Category Name *"}),e.jsx(x,{value:c.name,onChange:s=>v({...c,name:s.target.value}),placeholder:"e.g., Science"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Icon"}),e.jsxs("select",{value:c.icon,onChange:s=>v({...c,icon:s.target.value}),className:"w-full p-3 border border-border rounded-lg bg-background",children:[e.jsx("option",{value:"BookOpen",children:"BookOpen"}),e.jsx("option",{value:"Zap",children:"Zap"}),e.jsx("option",{value:"Target",children:"Target"}),e.jsx("option",{value:"Crown",children:"Crown"}),e.jsx("option",{value:"Trophy",children:"Trophy"}),e.jsx("option",{value:"GraduationCap",children:"GraduationCap"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-border",children:[e.jsx(i,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsxs(i,{onClick:le,className:"bg-gradient-to-r from-gold to-yellow-500 text-black",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Save Category"]})]})]})})}),e.jsx(Y,{children:W&&o&&e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>p(!1),children:e.jsxs(m.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-background rounded-2xl shadow-2xl max-w-md w-full",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[e.jsx("h3",{className:"text-xl font-heading font-bold",children:o.id?"Edit Year":"Add New Year"}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>p(!1),children:e.jsx(w,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Year *"}),e.jsx(x,{value:o.name,onChange:s=>y({...o,name:s.target.value}),placeholder:"e.g., 2024"})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-border",children:[e.jsx(i,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsxs(i,{onClick:ne,className:"bg-gradient-to-r from-gold to-yellow-500 text-black",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Save Year"]})]})]})})})]})};export{Te as default};
