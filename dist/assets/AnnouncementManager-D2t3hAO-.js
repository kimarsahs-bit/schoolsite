import{c as z,r,j as e,B as n,A as O,m as b,X as M}from"./index-vcAYm6vD.js";import{I as L}from"./input-CVoIJ2zH.js";import{T as U}from"./textarea-B1JbTjEM.js";import{S as B,d as J,e as V,f as H,g as p}from"./select-BHw13X9t.js";import{A as $,a as q}from"./alert-BYJYiRk6.js";import{E as F}from"./eye-off-DPvmRXZA.js";import{E as y}from"./eye-CF1wM1sA.js";import{P as R}from"./plus-CSXBcpgr.js";import{S as W}from"./save-5ZuEQXRf.js";import{B as N}from"./bell-D_AoMh8q.js";import{C as X}from"./clock-B1zj3MLd.js";import{S as Y}from"./send-B5PAKnV6.js";import{S as G}from"./square-pen-BVw1FIsV.js";import{T as K}from"./trash-2-04KiNg8K.js";import{I as Q}from"./info-DY3hXfGU.js";import{C as Z}from"./circle-alert-D_zFa0RS.js";import"./index-XrueaTAc.js";import"./chevron-down-D_kuZwQK.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=z("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]),be=()=>{const[i,f]=r.useState([]),[v,c]=r.useState(!1),[a,d]=r.useState(null),[x,j]=r.useState(!1),[u,k]=r.useState(!1),[w,m]=r.useState("");r.useEffect(()=>{const s=localStorage.getItem("royal-academy-announcements");if(s)f(JSON.parse(s));else{const t=[{id:1,title:"Welcome to New Academic Year",message:"Classes for the new academic year will begin on September 1st. Please check your course schedules.",timestamp:new Date().toISOString(),type:"info",unread:!0,published:!0},{id:2,title:"Library Hours Extended",message:"The library will now be open until 22:00 on weekdays to support your studies.",timestamp:new Date(Date.now()-864e5).toISOString(),type:"info",unread:!0,published:!0}];f(t),localStorage.setItem("royal-academy-announcements",JSON.stringify(t))}},[]);const g=s=>{f(s),localStorage.setItem("royal-academy-announcements",JSON.stringify(s))},S=()=>{const s={id:Date.now(),title:"",message:"",timestamp:new Date().toISOString(),type:"info",unread:!0,published:!1};d(s),j(!0),c(!0)},A=s=>{d({...s}),j(!1),c(!0)},C=()=>{if(!a||!a.title.trim()||!a.message.trim()){alert("Please fill in both title and message");return}const s=x?[...i,a]:i.map(t=>t.id===a.id?a:t);g(s),c(!1),d(null),m(x?"Announcement created successfully!":"Announcement updated successfully!"),setTimeout(()=>m(""),3e3)},I=s=>{if(confirm("Are you sure you want to delete this announcement?")){const t=i.filter(o=>o.id!==s);g(t),m("Announcement deleted successfully!"),setTimeout(()=>m(""),3e3)}},E=s=>{const t=i.map(l=>l.id===s?{...l,published:!l.published,timestamp:l.published?l.timestamp:new Date().toISOString()}:l);g(t);const o=t.find(l=>l.id===s);m(o!=null&&o.published?"Announcement published!":"Announcement unpublished!"),setTimeout(()=>m(""),3e3)},h=(s,t)=>{a&&d({...a,[s]:t})},P=s=>new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}),T=s=>{switch(s){case"urgent":return Z;case"important":return N;case"announcement":return _;default:return Q}},D=s=>{switch(s){case"urgent":return"text-red-600 bg-red-100 dark:bg-red-900/30 dark:text-red-300";case"important":return"text-orange-600 bg-orange-100 dark:bg-orange-900/30 dark:text-orange-300";case"announcement":return"text-blue-600 bg-blue-100 dark:bg-blue-900/30 dark:text-blue-300";default:return"text-gray-600 bg-gray-100 dark:bg-gray-800 dark:text-gray-300"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-heading font-bold text-foreground",children:"Announcement Manager"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Create and manage school announcements for students and staff"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-3",children:[e.jsxs(n,{onClick:()=>k(!u),variant:"outline",size:"sm",className:"w-full sm:w-auto",children:[u?e.jsx(F,{className:"h-4 w-4 mr-2"}):e.jsx(y,{className:"h-4 w-4 mr-2"}),u?"Hide Preview":"Show Preview"]}),e.jsxs(n,{onClick:S,className:"w-full sm:w-auto bg-gradient-to-r from-royal to-gold text-white",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"New Announcement"]})]})]}),w&&e.jsx($,{children:e.jsx(q,{children:w})}),e.jsx(O,{children:v&&a&&e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:e.jsxs(b.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-card rounded-lg sm:rounded-xl p-3 sm:p-4 lg:p-6 w-full max-w-[calc(100vw-16px)] sm:max-w-2xl max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4 lg:mb-6",children:[e.jsx("h3",{className:"text-base sm:text-lg lg:text-xl font-heading font-bold truncate pr-2",children:x?"Create New Announcement":"Edit Announcement"}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>c(!1),className:"h-8 w-8 p-0 flex-shrink-0",children:e.jsx(M,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium mb-1 sm:mb-2 block",children:"Title"}),e.jsx(L,{value:a.title,onChange:s=>h("title",s.target.value),placeholder:"Enter announcement title",className:"text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium mb-1 sm:mb-2 block",children:"Type"}),e.jsxs(B,{value:a.type,onValueChange:s=>h("type",s),children:[e.jsx(J,{className:"text-sm",children:e.jsx(V,{})}),e.jsxs(H,{children:[e.jsx(p,{value:"info",children:"Information"}),e.jsx(p,{value:"announcement",children:"Announcement"}),e.jsx(p,{value:"important",children:"Important"}),e.jsx(p,{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium mb-1 sm:mb-2 block",children:"Message"}),e.jsx(U,{value:a.message,onChange:s=>h("message",s.target.value),placeholder:"Enter announcement message",rows:3,className:"text-sm resize-none"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:a.published,onChange:s=>h("published",s.target.checked),className:"rounded"}),e.jsx("span",{className:"text-xs sm:text-sm",children:"Publish immediately"})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center sm:justify-end gap-2 sm:gap-3 mt-4 sm:mt-6 pt-3 sm:pt-6 border-t",children:[e.jsx(n,{variant:"outline",onClick:()=>c(!1),className:"w-full sm:w-auto",children:"Cancel"}),e.jsxs(n,{onClick:C,className:"w-full sm:w-auto bg-gradient-to-r from-royal to-gold text-white",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),x?"Create":"Update"," Announcement"]})]})]})})}),e.jsx("div",{className:"space-y-4",children:i.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(N,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No announcements created yet."}),e.jsx("p",{className:"text-sm",children:"Create your first announcement to get started."})]}):i.map(s=>{const t=T(s.type);return e.jsx(b.div,{layout:!0,className:"bg-card border border-border rounded-lg p-3 sm:p-4 lg:p-6 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(t,{className:"h-4 w-4 sm:h-5 sm:w-5 text-muted-foreground flex-shrink-0"}),e.jsx("h3",{className:"font-semibold text-foreground text-sm sm:text-base lg:text-lg truncate",children:s.title})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:`text-[10px] sm:text-xs px-2 py-1 rounded-full flex-shrink-0 ${D(s.type)}`,children:s.type}),s.published?e.jsx("span",{className:"text-[10px] sm:text-xs px-2 py-1 rounded-full bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300 flex-shrink-0",children:"Published"}):e.jsx("span",{className:"text-[10px] sm:text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300 flex-shrink-0",children:"Draft"})]})]}),e.jsx("p",{className:"text-muted-foreground mb-3 leading-relaxed text-sm sm:text-base break-words",children:s.message}),e.jsx("div",{className:"flex items-center space-x-4 text-[10px] sm:text-xs text-muted-foreground",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(X,{className:"h-3 w-3 flex-shrink-0"}),e.jsx("span",{className:"break-all",children:P(s.timestamp)})]})})]}),e.jsxs("div",{className:"flex flex-row sm:flex-col lg:flex-row items-center gap-1 sm:gap-2 flex-shrink-0",children:[e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>E(s.id),className:`h-8 w-8 sm:h-9 sm:w-auto p-0 sm:px-3 ${s.published?"text-orange-600 hover:text-orange-700":"text-green-600 hover:text-green-700"}`,title:s.published?"Unpublish":"Publish",children:[e.jsx(Y,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline ml-2",children:s.published?"Unpublish":"Publish"})]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>A(s),className:"h-8 w-8 sm:h-9 sm:w-auto p-0 sm:px-3",title:"Edit",children:[e.jsx(G,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline ml-2",children:"Edit"})]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>I(s.id),className:"text-red-600 hover:text-red-700 h-8 w-8 sm:h-9 sm:w-auto p-0 sm:px-3",title:"Delete",children:[e.jsx(K,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline ml-2",children:"Delete"})]})]})]})},s.id)})}),u&&e.jsx("div",{className:"bg-card border border-border rounded-lg p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-3 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Live Preview"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"See how announcements appear to students and staff"})]}),e.jsxs(n,{variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"View Student Notifications"]})]})})]})};export{be as default};
