import{r as g,u as k,j as e,m as I,B as w}from"./index-vcAYm6vD.js";import{I as N}from"./input-CVoIJ2zH.js";import{A as C,a as L}from"./alert-BYJYiRk6.js";import{A}from"./arrow-left-DhQ25n61.js";import{G as D}from"./graduation-cap-P36faES5.js";import{C as O}from"./circle-alert-D_zFa0RS.js";const U=()=>{const[s,v]=g.useState(""),[o,j]=g.useState(""),[x,m]=g.useState(""),[y,b]=g.useState(!1),f=k(),S=async l=>{l.preventDefault(),b(!0),m(""),await new Promise(n=>setTimeout(n,1e3));try{const n=JSON.parse(localStorage.getItem("royal-academy-students")||"[]"),h=JSON.parse(localStorage.getItem("royal-academy-auth-students")||"[]");if(console.log("=== LOGIN ATTEMPT ==="),console.log("Trying to login with:",{studentUsername:s,studentId:o}),console.log("Available students in royal-academy-students:",n),console.log("Available auth students in royal-academy-auth-students:",h),n.length===0&&h.length===0){m("No students found in the system. Please ask your teacher to create your account.");return}let a=h.find(t=>{var i,u,p;const r=t.username===s||t.name===s||t.fullName===s||((i=t.username)==null?void 0:i.toLowerCase())===s.toLowerCase()||((u=t.name)==null?void 0:u.toLowerCase())===s.toLowerCase()||((p=t.fullName)==null?void 0:p.toLowerCase())===s.toLowerCase(),d=t.studentId===o||t.id===o,c=t.status!=="banned";return console.log("Checking auth student:",t,{usernameMatch:r,idMatch:d,statusOk:c}),r&&d&&c});if(!a&&(a=n.find(t=>{var i,u;const r=t.name===s||t.fullName===s||((i=t.name)==null?void 0:i.toLowerCase())===s.toLowerCase()||((u=t.fullName)==null?void 0:u.toLowerCase())===s.toLowerCase(),d=t.id===o,c=t.status==="active"||!t.status;return console.log("Checking regular student:",t,{usernameMatch:r,idMatch:d,statusOk:c}),r&&d&&c}),a)){console.log("Found student in regular database, syncing to auth database...");const t={...a,username:a.name||a.fullName,studentId:a.id,type:"student",password:`${(a.name||a.fullName).split(" ")[0].toLowerCase()}123`,createdAt:new Date().toISOString()},r=[...h,t];localStorage.setItem("royal-academy-auth-students",JSON.stringify(r)),console.log("Student synced to auth database:",t)}console.log("Found student:",a),a?(localStorage.setItem("studentAuth","true"),localStorage.setItem("studentEmail",a.email),localStorage.setItem("studentId",a.studentId||a.id),localStorage.setItem("studentName",a.username||a.name||a.fullName),localStorage.setItem("currentStudent",JSON.stringify(a)),console.log("[StudentAuth] Login successful, auth set for:",a.email),f("/student-dashboard",{replace:!0})):m("Invalid student username or student ID. Please check your credentials.")}catch{m("Login failed. Please try again.")}b(!1)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-royal-blue via-royal-purple to-royal-gold flex items-center justify-center p-2 sm:p-4 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-blue-500/20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-20 right-10 w-72 h-72 bg-purple-500/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-96 h-96 bg-cyan-500/10 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2 animate-pulse",style:{animationDelay:"2s"}})]}),e.jsxs(I.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md relative z-10",children:[e.jsx("div",{className:"mb-3 sm:mb-4",children:e.jsxs(w,{variant:"ghost",onClick:()=>f(-1),className:"back-btn flex items-center space-x-2",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{children:"Back"})]})}),e.jsxs("div",{className:"bg-card/95 backdrop-blur-sm rounded-2xl shadow-2xl p-4 sm:p-8 border border-cyan-500/30 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 rounded-2xl pointer-events-none",style:{background:"linear-gradient(45deg, transparent, rgba(0, 255, 255, 0.1), transparent)",animation:"shimmer 3s infinite"}}),e.jsxs("div",{className:"text-center mb-6 sm:mb-8 relative z-10",children:[e.jsx("div",{className:"mx-auto w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-full flex items-center justify-center mb-3 sm:mb-4 shadow-lg shadow-cyan-500/50",children:e.jsx(D,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white"})}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white mb-1 sm:mb-2 drop-shadow-lg",children:"Student Portal"}),e.jsx("p",{className:"text-sm text-cyan-300/80",children:"Access your academic dashboard"})]}),e.jsxs("form",{onSubmit:S,className:"space-y-4 sm:space-y-6 relative z-10",children:[x&&e.jsxs(C,{variant:"destructive",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx(L,{className:"text-sm",children:x})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"Student Username"}),e.jsx(N,{type:"text",value:s,onChange:l=>v(l.target.value),placeholder:"Enter your full name",required:!0,className:"h-9 sm:h-11 text-sm text-black dark:text-foreground placeholder:text-gray-500 dark:placeholder:text-gray-400 bg-white dark:bg-background border-gray-300 dark:border-cyan-500/50 focus:border-cyan-400 focus:ring-cyan-500/20"})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"Student ID"}),e.jsx(N,{type:"text",value:o,onChange:l=>j(l.target.value),placeholder:"Enter your student ID (e.g., STU123456)",required:!0,className:"h-9 sm:h-11 text-sm text-black dark:text-foreground placeholder:text-gray-500 dark:placeholder:text-gray-400 bg-white dark:bg-background border-gray-300 dark:border-cyan-500/50 focus:border-cyan-400 focus:ring-cyan-500/20"})]}),e.jsx(w,{type:"submit",disabled:y,className:"w-full h-10 sm:h-11 bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-400 hover:to-blue-400 text-white font-semibold text-sm shadow-lg shadow-cyan-500/50 hover:shadow-cyan-400/70 transition-all",children:y?"Signing in...":"Sign In"})]}),e.jsx("div",{className:"mt-4 sm:mt-6 text-center relative z-10",children:e.jsx("p",{className:"text-xs sm:text-sm text-cyan-300/80",children:"Need help? Contact your teacher or administrator"})})]})]}),e.jsx("style",{children:`
        @keyframes shimmer {
          0%, 100% { opacity: 0; }
          50% { opacity: 1; }
        }
      `})]})};export{U as default};
