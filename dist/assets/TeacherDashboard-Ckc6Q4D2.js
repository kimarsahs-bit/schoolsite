import{c as _s,r as o,j as e,m as j,B as l,X as k,n as xa,u as ua,s as ha,a as z}from"./index-vcAYm6vD.js";import{I as T}from"./input-CVoIJ2zH.js";import{T as wt}from"./textarea-B1JbTjEM.js";import{V as pt,a as bt,M as ga,b as pa}from"./video-D4_ojB7t.js";import{U as ze}from"./users-DshTqfGB.js";import{M as ba}from"./monitor-DiJ6JYFs.js";import{Z as fa,a as ja,R as Na}from"./zoom-out-Bm9_1osx.js";import{U as Ls}from"./user-BFMo7NJs.js";import{G as ya}from"./graduation-cap-P36faES5.js";import{B as we}from"./bell-D_AoMh8q.js";import{S as Ie}from"./square-pen-BVw1FIsV.js";import{M as Re,S as ft}from"./send-B5PAKnV6.js";import{T as Te}from"./trash-2-04KiNg8K.js";import{L as va}from"./log-out-mu1-Tcny.js";import{B as Ve}from"./book-open-Cck4FFnk.js";import{C as ys}from"./circle-check-big-DY665Rq5.js";import{S as vs}from"./star-C15iVDB7.js";import{U as ws}from"./user-plus-DbdgVC5U.js";import{C as Ge}from"./credit-card-C0BXHBU5.js";import{C as jt}from"./calendar-Cyjlwh6t.js";import{C as wa}from"./chart-column-DPWbzElM.js";import{F as Bs}from"./file-text-v4HcC1Hx.js";import{P as qs}from"./plus-CSXBcpgr.js";import{C as Vs}from"./camera-Bc_Ov7XJ.js";import{L as Sa}from"./lock-CMMJp4dt.js";import{C as Gs}from"./circle-alert-D_zFa0RS.js";import{D as ka}from"./download-DqcvXZsi.js";import{U as Nt}from"./upload-DXS06rhK.js";import{E as yt}from"./eye-CF1wM1sA.js";import{D as vt}from"./dollar-sign-B_CmodGE.js";import{C as Ca}from"./clock-B1zj3MLd.js";import{I as Ia}from"./image-Bjk6VXQq.js";import{S as Ra}from"./save-5ZuEQXRf.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=_s("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=_s("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=_s("MonitorOff",[["path",{d:"M17 17H4a2 2 0 0 1-2-2V5c0-1.5 1-2 1-2",key:"k0q8oc"}],["path",{d:"M22 15V5a2 2 0 0 0-2-2H9",key:"cp1ac0"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Ys=768;function Ea(){const[C,$]=o.useState(void 0);return o.useEffect(()=>{const R=window.matchMedia(`(max-width: ${Ys-1}px)`),E=()=>{$(window.innerWidth<Ys)};return R.addEventListener("change",E),$(window.innerWidth<Ys),()=>R.removeEventListener("change",E)},[]),!!C}const Oa=({teacherName:C,teacherEmail:$,teacherClass:R,teacherSection:E,onClose:le})=>{const[F,K]=o.useState(!1),[I,A]=o.useState(""),[y,q]=o.useState(""),[x,re]=o.useState(!1),[J,Se]=o.useState(!1),[p,G]=o.useState(!1),[Q,ce]=o.useState(0),H=o.useRef(null),U=o.useRef(null),pe=o.useRef(null);o.useEffect(()=>{if(F){const b=setInterval(()=>{var Z;const ne=JSON.parse(localStorage.getItem("royal-academy-live-broadcasts")||"[]").find(ks=>ks.teacherEmail===$);ne&&ce(((Z=ne.viewers)==null?void 0:Z.length)||0)},2e3);return()=>clearInterval(b)}},[F,$]);const N=async()=>{try{const b=await navigator.mediaDevices.getUserMedia({video:!0,audio:J});H.current&&(H.current.srcObject=b),U.current=b,re(!0)}catch(b){alert("Failed to access camera. Please allow camera permissions."),console.error(b)}},L=()=>{U.current&&(U.current.getTracks().forEach(b=>b.stop()),U.current=null),H.current&&(H.current.srcObject=null),re(!1)},Y=async()=>{if(J)U.current&&U.current.getAudioTracks().forEach(b=>b.enabled=!1),Se(!1);else{if(U.current)U.current.getAudioTracks().forEach(b=>b.enabled=!0);else try{const b=await navigator.mediaDevices.getUserMedia({video:x,audio:!0});x&&H.current&&(H.current.srcObject=b),U.current=b}catch{alert("Failed to access microphone.");return}Se(!0)}},de=async()=>{try{const b=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0});H.current&&(H.current.srcObject=b),U.current&&U.current.getTracks().forEach(be=>be.stop()),pe.current=b,G(!0),re(!1),b.getVideoTracks()[0].onended=()=>{Ye()}}catch(b){alert("Failed to start screen sharing."),console.error(b)}},Ye=()=>{pe.current&&(pe.current.getTracks().forEach(b=>b.stop()),pe.current=null),H.current&&(H.current.srcObject=null),G(!1)},Zs=()=>{if(!I.trim()){alert("Please enter a class title!");return}const b=JSON.parse(localStorage.getItem("royal-academy-live-broadcasts")||"[]"),be={id:`${$}-${Date.now()}`,teacherName:C,teacherEmail:$,teacherClass:R,teacherSection:E,title:I,description:y,startedAt:new Date().toISOString(),isActive:!0,isCameraOn:x,isMicOn:J,isScreenSharing:p,viewers:[]},ne=b.filter(Z=>Z.teacherEmail!==$);ne.push(be),localStorage.setItem("royal-academy-live-broadcasts",JSON.stringify(ne)),K(!0)},Ss=()=>{L(),Ye();const be=JSON.parse(localStorage.getItem("royal-academy-live-broadcasts")||"[]").filter(ne=>ne.teacherEmail!==$);localStorage.setItem("royal-academy-live-broadcasts",JSON.stringify(be)),K(!1),ce(0)};return o.useEffect(()=>{if(F){const b=setInterval(()=>{const ne=JSON.parse(localStorage.getItem("royal-academy-live-broadcasts")||"[]").map(Z=>Z.teacherEmail===$?{...Z,isCameraOn:x,isMicOn:J,isScreenSharing:p,lastUpdate:new Date().toISOString()}:Z);localStorage.setItem("royal-academy-live-broadcasts",JSON.stringify(ne))},1e3);return()=>clearInterval(b)}},[F,x,J,p,$]),e.jsx("div",{className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",children:e.jsx(j.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-card rounded-xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(pt,{className:"h-6 w-6 text-royal"}),e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:F?"ðŸ”´ Live Class":"Start Live Class"}),F&&e.jsx("span",{className:"bg-red-500 text-white px-3 py-1 rounded-full text-sm animate-pulse",children:"LIVE"})]}),e.jsx(l,{variant:"ghost",onClick:le,children:e.jsx(k,{className:"h-5 w-5"})})]}),F&&e.jsx("div",{className:"mb-4 p-4 bg-muted/20 rounded-lg border border-border/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:I}),e.jsx("p",{className:"text-sm text-muted-foreground",children:y})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-green-500/20 text-green-400 px-4 py-2 rounded-lg",children:[e.jsx(ze,{className:"h-5 w-5"}),e.jsx("span",{className:"font-bold text-lg",children:Q}),e.jsx("span",{className:"text-sm",children:"watching"})]})]})}),!F&&e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-foreground",children:"Class Title"}),e.jsx(T,{value:I,onChange:b=>A(b.target.value),placeholder:"e.g., Mathematics - Algebra Chapter 5",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-foreground",children:"Description"}),e.jsx(wt,{value:y,onChange:b=>q(b.target.value),placeholder:"What will you teach in this class?",rows:3,className:"w-full"})]}),e.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:e.jsxs("p",{className:"text-sm text-foreground",children:[e.jsx("strong",{children:"Broadcasting to:"})," Class ",R,E]})})]}),e.jsxs("div",{className:"mb-6 bg-black rounded-lg overflow-hidden aspect-video relative",children:[x||p?e.jsx("video",{ref:H,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-contain"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(bt,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Camera Off"})]})}),F&&e.jsx("div",{className:"absolute top-4 left-4 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold animate-pulse",children:"ðŸ”´ LIVE"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 mb-6",children:[e.jsxs(l,{onClick:x?L:N,variant:x?"default":"outline",className:"w-full",disabled:p,children:[x?e.jsx(pt,{className:"h-4 w-4 mr-2"}):e.jsx(bt,{className:"h-4 w-4 mr-2"}),x?"Camera On":"Camera Off"]}),e.jsxs(l,{onClick:Y,variant:J?"default":"outline",className:"w-full",children:[J?e.jsx(ga,{className:"h-4 w-4 mr-2"}):e.jsx(pa,{className:"h-4 w-4 mr-2"}),J?"Mic On":"Mic Off"]}),e.jsxs(l,{onClick:p?Ye:de,variant:p?"default":"outline",className:"w-full",children:[p?e.jsx(ba,{className:"h-4 w-4 mr-2"}):e.jsx(Ma,{className:"h-4 w-4 mr-2"}),p?"Sharing":"Share Screen"]}),F?e.jsxs(l,{onClick:Ss,className:"w-full md:col-span-2 bg-gradient-to-r from-red-500 to-red-600 text-white",children:[e.jsx(Da,{className:"h-4 w-4 mr-2"}),"End Broadcast"]}):e.jsxs(l,{onClick:Zs,className:"w-full md:col-span-2 bg-gradient-to-r from-green-500 to-emerald-500 text-white",children:[e.jsx(Aa,{className:"h-4 w-4 mr-2"}),"Go Live"]})]}),e.jsxs("div",{className:"bg-muted/20 rounded-lg p-4 border border-border/30",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Instructions:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"â€¢ Turn on camera or share screen before going live"}),e.jsxs("li",{children:["â€¢ Only students from Class ",R,E," can join"]}),e.jsx("li",{children:"â€¢ Student count updates in real-time"}),e.jsx("li",{children:'â€¢ Click "End Broadcast" to stop the class'})]})]})]})})})},Pa=({image:C,onSave:$,onCancel:R})=>{const[E,le]=o.useState(1),[F,K]=o.useState(0),[I,A]=o.useState({x:0,y:0}),y=o.useRef(null),q=o.useRef(!1),x=o.useRef({x:0,y:0}),re=()=>{le(N=>Math.min(N+.1,3))},J=()=>{le(N=>Math.max(N-.1,.5))},Se=()=>{K(N=>(N+90)%360)},p=N=>{q.current=!0,x.current={x:N.clientX-I.x,y:N.clientY-I.y}},G=N=>{q.current&&A({x:N.clientX-x.current.x,y:N.clientY-x.current.y})},Q=()=>{q.current=!1},ce=N=>{q.current=!0,x.current={x:N.touches[0].clientX-I.x,y:N.touches[0].clientY-I.y}},H=N=>{q.current&&A({x:N.touches[0].clientX-x.current.x,y:N.touches[0].clientY-x.current.y})},U=()=>{q.current=!1},pe=()=>{if(!y.current)return;const N=document.createElement("canvas"),L=N.getContext("2d");if(!L)return;const Y=300;N.width=Y,N.height=Y;const de=new Image;de.src=C,de.onload=()=>{L.clearRect(0,0,Y,Y),L.beginPath(),L.arc(Y/2,Y/2,Y/2,0,2*Math.PI),L.clip(),L.save(),L.translate(Y/2,Y/2),L.rotate(F*Math.PI/180),L.scale(E,E),L.translate(-de.width/2,-de.height/2),L.drawImage(de,(Y/2-de.width*E/2)/E,(Y/2-de.height*E/2)/E),L.restore(),$(N.toDataURL("image/jpeg",.9))}};return e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"bg-card rounded-xl p-6 w-full max-w-md border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Adjust Profile Photo"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:R,className:"h-8 w-8 p-0",children:e.jsx("span",{className:"sr-only",children:"Close"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{ref:y,className:"relative w-full h-64 rounded-lg overflow-hidden bg-muted border border-border cursor-move",onMouseDown:p,onMouseMove:G,onMouseUp:Q,onMouseLeave:Q,onTouchStart:ce,onTouchMove:H,onTouchEnd:U,children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("img",{src:C,alt:"Profile preview",className:"max-w-full max-h-full object-contain",style:{transform:`translate(${I.x}px, ${I.y}px) scale(${E}) rotate(${F}deg)`,transition:q.current?"none":"transform 0.2s ease"}})}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-white/50"}),e.jsx("div",{className:"absolute inset-4 rounded-full border-2 border-white/30"}),e.jsx("div",{className:"absolute inset-8 rounded-full border border-white/20"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-32 h-32 rounded-full border border-dashed border-white/40"})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[e.jsxs(l,{variant:"outline",size:"sm",onClick:J,disabled:E<=.5,children:[e.jsx(fa,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Zoom Out"})]}),e.jsxs("div",{className:"flex items-center px-3 py-1 bg-muted rounded-md text-sm",children:[Math.round(E*100),"%"]}),e.jsxs(l,{variant:"outline",size:"sm",onClick:re,disabled:E>=3,children:[e.jsx(ja,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Zoom In"})]}),e.jsxs(l,{variant:"outline",size:"sm",onClick:Se,children:[e.jsx(Na,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Rotate"})]})]}),e.jsxs("div",{className:"flex space-x-2 pt-2",children:[e.jsx(l,{variant:"outline",onClick:R,className:"flex-1",children:"Cancel"}),e.jsxs(l,{onClick:pe,className:"flex-1 bg-gradient-to-r from-gold to-yellow-500 text-black",children:[e.jsx(xa,{className:"h-4 w-4 mr-2"}),"Apply Now"]})]})]})]})})},hl=()=>{var ut,ht,gt;const[C,$]=o.useState(""),[R,E]=o.useState(""),[le,F]=o.useState(""),K=ua();o.useEffect(()=>{const s=localStorage.getItem("teacherEmail")||"",t=localStorage.getItem("teacherName")||"",a=localStorage.getItem("teacherSubject")||"";$(s),E(t),F(a)},[]);const[I,A]=o.useState("dashboard"),[y,q]=o.useState("8"),[x,re]=o.useState("A"),[J,Se]=o.useState(""),[p,G]=o.useState([]),[Q,ce]=o.useState([]),[H,U]=o.useState([]),[pe,N]=o.useState(!1),[L,Y]=o.useState(!1),[de,Ye]=o.useState(!1),[Zs,Ss]=o.useState(!1),[b,be]=o.useState(null),[ne,Z]=o.useState(!1),[ks,St]=o.useState(!1),[fe,_e]=o.useState(null),[v,_]=o.useState({reportImage:"",notes:"",subject:""}),[je,Ze]=o.useState([]),[kt,Cs]=o.useState(!1),[$e,Is]=o.useState(null),[Fe,Xs]=o.useState(null),[Ne,Xe]=o.useState("today"),[Ae,We]=o.useState([]),[Ke,Ws]=o.useState(""),[ye,Ct]=o.useState(new Date().toISOString().split("T")[0]),[Qe,Rs]=o.useState(null),Ks=o.useRef(null),es=o.useRef(null),It=Ea(),[c,me]=o.useState({fullName:"",email:"",rollNumber:"",parentEmail:"",phone:"",class:"8",section:"A",image:""}),ee=["1","2","3","4","5","6","7","8","9","10","11","12"],oe=["A","B","C","D","E"],[B,ve]=o.useState({title:"",description:"",subject:"",class:"8",section:"A",dueDate:"",attachments:[]}),[g,se]=o.useState({studentId:"",type:"good",message:"",subject:"",images:[]}),[xe,As]=o.useState(null),[Qs,Ds]=o.useState(-1),[Rt,Je]=o.useState(!1),[Ms,He]=o.useState(null),[De,et]=o.useState([]),[ss,st]=o.useState([]),[Es,Me]=o.useState(!1),[w,X]=o.useState(null),[S,Ee]=o.useState({amount:"",months:[],notes:""}),[Os,Ps]=o.useState(ee[0]||""),[Ts,zs]=o.useState(oe[0]||""),[$s,Fs]=o.useState("");o.useEffect(()=>{Es&&(Ps(y||ee[0]||""),zs(x||oe[0]||""),Fs(""),X(null))},[Es]);const[At,Js]=o.useState(!1),[Dt,ts]=o.useState(!1),[D,ue]=o.useState({subject:"",message:"",photo1:"",photo2:""}),[tt,Ue]=o.useState(!1),[ke,as]=o.useState([]),[Le,ls]=o.useState(null);ke.filter(s=>s.status==="unread").length;const[Mt,rs]=o.useState(!1),[ie,Oe]=o.useState({subject:"",message:""}),[Et,ns]=o.useState(!1),[te,os]=o.useState(null),[ds,is]=o.useState(""),[Ot,cs]=o.useState(!1),[d,P]=o.useState({subject:"",message:"",targetType:"all",targetClass:"",targetSection:"",targetStudentId:"",photo1:"",photo2:""}),[Pe,ms]=o.useState([]),[Pt,at]=o.useState(!1),[ae,xs]=o.useState(null),[Tt,us]=o.useState(!1),zt=["January","February","March","April","May","June","July","August","September","October","November","December"],lt=new Date().getFullYear(),[O,Ce]=o.useState({name:R,photo:"",bio:"",phone:"",qualification:""}),[$t,hs]=o.useState(!1),[Ft,rt]=o.useState(""),[Be,gs]=o.useState({}),[nt,Jt]=o.useState({}),[Ht,ps]=o.useState(!1),[bs,fs]=o.useState(null);o.useEffect(()=>{const s=localStorage.getItem("teacherEmail")||"",t=localStorage.getItem("teacherName")||"",a=localStorage.getItem("teacherSubject")||"";$(s),E(t),F(a);const r=ha("royal-academy-holidays",qe=>{console.log("[TeacherDashboard] Holidays updated from Supabase"),We(qe)}),n=localStorage.getItem("royal-academy-students");n&&G(JSON.parse(n));const i=localStorage.getItem("royal-academy-homework");i&&ce(JSON.parse(i));const m=localStorage.getItem("royal-academy-attendance");m&&U(JSON.parse(m));const u=localStorage.getItem("royal-academy-student-reports");u&&Ze(JSON.parse(u));const h=localStorage.getItem("royal-academy-holidays");h&&We(JSON.parse(h));const V=localStorage.getItem(`teacher-profile-${C}`);V&&Ce(JSON.parse(V));const M=localStorage.getItem("royal-academy-fee-records");M&&et(JSON.parse(M));const f=localStorage.getItem("royal-academy-payment-requests");f&&st(JSON.parse(f));const he=localStorage.getItem("royal-academy-notifications");if(he){const Hs=JSON.parse(he).filter(Us=>Us.fromId===C);as(Hs)}const ge=localStorage.getItem("royal-academy-student-notifications");if(ge){const Hs=JSON.parse(ge).filter(Us=>Us.senderId===C);ms(Hs)}return()=>{r()}},[K,C]);const Ut=()=>{localStorage.removeItem("teacherAuth"),localStorage.removeItem("teacherEmail"),localStorage.removeItem("teacherName"),localStorage.removeItem("teacherSubject"),sessionStorage.clear(),setTimeout(()=>{window.location.href="/teacher"},100)},js=s=>new Promise((t,a)=>{const r=new FileReader;r.readAsDataURL(s),r.onload=()=>t(r.result),r.onerror=n=>a(n)}),Lt=async(s,t)=>{if(!s)return;const a=[];for(const r of Array.from(s))if(r.type.startsWith("image/"))try{const n=await js(r);a.push(n)}catch(n){console.error("Error converting image:",n)}ve(r=>({...r,attachments:[...r.attachments,...a]}))},Bt=async()=>{if(Qe){const s=Q.map(t=>t.id===Qe.id?{...t,...B,subject:le,createdBy:R}:t);ce(s),localStorage.setItem("royal-academy-homework",JSON.stringify(s)),await z("royal-academy-homework",s),alert(`Homework "${B.title}" updated successfully!`)}else{const s={id:Date.now().toString(),...B,subject:le,createdAt:new Date().toISOString(),createdBy:R},t=[...Q,s];ce(t),localStorage.setItem("royal-academy-homework",JSON.stringify(t)),await z("royal-academy-homework",t),alert(`Homework "${s.title}" has been sent to Class ${s.class}-${s.section} students!`)}N(!1),Rs(null),ve({title:"",description:"",subject:"",class:"8",section:"A",dueDate:"",attachments:[]})},qt=s=>{Rs(s),ve({title:s.title,description:s.description,subject:s.subject,class:s.class,section:s.section,dueDate:s.dueDate,attachments:s.attachments}),N(!0)},Vt=async s=>{if(confirm("Are you sure you want to delete this homework? This action cannot be undone.")){const t=Q.filter(a=>a.id!==s);ce(t),localStorage.setItem("royal-academy-homework",JSON.stringify(t)),await z("royal-academy-homework",t),alert("Homework deleted successfully!")}},Gt=async()=>{if(!c.fullName||!c.email||!c.rollNumber||!c.class||!c.section){alert("Please fill all required fields");return}try{if(Fe){const s=p.map(r=>r.id===Fe?{...r,name:c.fullName,rollNumber:c.rollNumber,class:c.class,section:c.section,email:c.email,parentEmail:c.parentEmail,phone:c.phone,image:c.image||r.image}:r);G(s),localStorage.setItem("royal-academy-students",JSON.stringify(s));const a=JSON.parse(localStorage.getItem("royal-academy-auth-students")||"[]").map(r=>r.studentId===Fe?{...r,username:c.fullName,email:c.email,name:c.fullName,rollNumber:c.rollNumber,class:c.class,section:c.section,parentEmail:c.parentEmail,phone:c.phone}:r);localStorage.setItem("royal-academy-auth-students",JSON.stringify(a)),alert("Student updated successfully!"),Xs(null)}else{const s=`STU${Date.now().toString().slice(-6)}`,t=`${c.fullName.split(" ")[0].toLowerCase()}123`,a={id:s,name:c.fullName,rollNumber:c.rollNumber,class:c.class,section:c.section,email:c.email,parentEmail:c.parentEmail,phone:c.phone,image:c.image||"/placeholder-student.jpg",status:"active",attendance:[],remarks:[]},r=JSON.parse(localStorage.getItem("royal-academy-students")||"[]");localStorage.setItem("royal-academy-students",JSON.stringify([...r,a]));const n=JSON.parse(localStorage.getItem("royal-academy-auth-students")||"[]"),i={...a,username:c.fullName,studentId:s,type:"student",password:t,createdAt:new Date().toISOString()};localStorage.setItem("royal-academy-auth-students",JSON.stringify([...n,i])),alert(`Student account created successfully!

Login Credentials:
Email: ${c.email}
Password: ${t}
Student ID: ${s}`),G(m=>[...m,a])}A("students"),me({fullName:"",email:"",rollNumber:"",parentEmail:"",phone:"",class:"1",section:"A",image:""})}catch(s){alert(`Failed to ${Fe?"update":"create"} student account. Please try again.`),console.error(`Error ${Fe?"updating":"creating"} student:`,s)}},Yt=async()=>{const s=p.filter(f=>f.class===y&&f.section===x),t=new Date,a=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),i=`${a}-${r}-${n}`,m={id:Date.now().toString(),date:i,class:y,section:x,students:s.map(f=>({studentId:f.id,status:Be[f.id]||"present",remarks:nt[f.id]||""})),teacherId:C},u=[...H,m];U(u),localStorage.setItem("royal-academy-attendance",JSON.stringify(u));const h=p.map(f=>{if(f.class===y&&f.section===x){const ge=(f.attendance||[]).filter(qe=>qe.date!==i);return{...f,attendance:[...ge,{date:i,status:Be[f.id]||"present",remarks:nt[f.id]||""}]}}return f});G(h),localStorage.setItem("royal-academy-students",JSON.stringify(h)),await z("royal-academy-students",h);const M=JSON.parse(localStorage.getItem("royal-academy-auth-students")||"[]").map(f=>{const he=h.find(ge=>ge.id===f.studentId||ge.id===f.id||ge.email===f.email||ge.rollNumber===f.rollNumber);return he?{...f,attendance:he.attendance||[]}:f});localStorage.setItem("royal-academy-auth-students",JSON.stringify(M)),await z("royal-academy-auth-students",M),console.log("Attendance updated:",{date:i,studentsUpdated:s.length,authStudentsUpdated:M.filter(f=>s.some(he=>he.id===f.studentId||he.email===f.email)).length}),alert(`Attendance taken for Class ${y}-${x}!`),gs({}),Jt({})},Ns=async(s,t)=>{var u;const a=p.map(h=>{if(h.id===s){let V=[...h.attendance||[]];const M=V.findIndex(f=>f.date===ye);if(t==="remove")M!==-1&&V.splice(M,1);else{const f={date:ye,status:t,remarks:""};M!==-1?V[M]=f:V.push(f)}return{...h,attendance:V}}return h});G(a),localStorage.setItem("royal-academy-students",JSON.stringify(a)),await z("royal-academy-students",a);const n=JSON.parse(localStorage.getItem("royal-academy-auth-students")||"[]").map(h=>{const V=a.find(M=>M.id===h.studentId||M.id===h.id||M.email===h.email||M.name===h.name||M.name===h.fullName||M.name===h.name||M.rollNumber===h.rollNumber);return V?{...h,attendance:V.attendance||[]}:h});localStorage.setItem("royal-academy-auth-students",JSON.stringify(n)),await z("royal-academy-auth-students",n),console.log("Edit day attendance updated:",{date:ye,studentId:s,status:t,authStudentUpdated:n.some(h=>h.studentId===s||h.id===s)});const i=((u=p.find(h=>h.id===s))==null?void 0:u.name)||"Student",m=new Date(ye).toLocaleDateString();alert(t==="remove"?`Attendance removed for ${i} on ${m}`:`${i} marked as ${t} for ${m}`)},_t=async()=>{var m;if(!g.studentId||!g.message){alert("Please select a student and enter a message");return}const s=p.find(u=>u.id===g.studentId);if(!s){alert("Student not found in teacher's student list");return}const t={id:xe?xe.id:Date.now().toString(),date:xe?xe.date:new Date().toISOString().split("T")[0],type:g.type,message:g.message,subject:g.subject||le,images:g.images||[]},a=p.map(u=>{if(u.id===s.id){let h=[...u.remarks||[]];return xe&&Qs>=0?h[Qs]=t:h.push(t),{...u,remarks:h}}return u});G(a),localStorage.setItem("royal-academy-students",JSON.stringify(a)),await z("royal-academy-students",a);const r=JSON.parse(localStorage.getItem("royal-academy-auth-students")||"[]");console.log("Updating auth students for remarks sync..."),console.log("Target student:",s),console.log("Current auth students:",r);let n=!1;const i=r.map(u=>{var V;return u.studentId===s.id||u.id===s.id||u.email===s.email||u.name===s.name||u.fullName===s.name||u.name===s.fullName||u.rollNumber===s.rollNumber?(console.log("Found matching auth student, updating remarks..."),n=!0,{...u,remarks:((V=a.find(M=>M.id===s.id))==null?void 0:V.remarks)||[]}):u});if(!n){console.log("No matching auth student found, creating new one...");const u={id:s.id,studentId:s.id,email:s.email,name:s.name,fullName:s.name,class:s.class,section:s.section,rollNumber:s.rollNumber,remarks:((m=a.find(h=>h.id===s.id))==null?void 0:m.remarks)||[]};i.push(u),console.log("Created new auth student:",u)}localStorage.setItem("royal-academy-auth-students",JSON.stringify(i)),await z("royal-academy-auth-students",i),console.log("Updated auth students saved:",i),alert(`${g.type==="good"?"Good":"Bad"} remark ${xe?"updated":"added"} for ${s.name}!`),Ss(!1),As(null),Ds(-1),se({studentId:"",type:"good",message:"",subject:"",images:[]})},Zt=(s,t,a)=>{As(s),Ds(t),se({studentId:a,type:s.type,message:s.message,subject:s.subject,images:s.images||s.image?[s.image]:[]})},Xt=(s,t)=>{if(confirm("Are you sure you want to delete this remark?")){const a=p.map(i=>{if(i.id===t){const m=(i.remarks||[]).filter((u,h)=>h!==s);return{...i,remarks:m}}return i});G(a),localStorage.setItem("royal-academy-students",JSON.stringify(a));const n=JSON.parse(localStorage.getItem("royal-academy-auth-students")||"[]").map(i=>{const m=a.find(u=>u.id===i.studentId||u.id===i.id||u.email===i.email||u.name===i.name||u.rollNumber===i.rollNumber);return m?(console.log("Updating auth student remarks after deletion:",i),{...i,remarks:m.remarks}):i});localStorage.setItem("royal-academy-auth-students",JSON.stringify(n)),console.log("Auth students updated after remark deletion:",n),alert("Remark deleted successfully!")}},W=()=>p.filter(s=>s.class===y&&s.section===x),ot=()=>p.filter(s=>{const t=s.class===y,a=s.section===x,r=J?s.rollNumber.toString()===J:!0;return t&&a&&r}),dt=()=>p.filter(s=>{const t=Os?s.class===Os:!0,a=Ts?s.section===Ts:!0,r=$s?s.rollNumber.toString()===$s:!0;return t&&a&&r}),it=async s=>{var a;const t=(a=s.target.files)==null?void 0:a[0];if(t)try{const r=await js(t);_({...v,reportImage:r})}catch{alert("Error uploading image. Please try again.")}},Wt=async()=>{if(!fe||!v.reportImage||!v.notes){alert("Please select a student, upload an image, and add notes");return}const s={id:Date.now().toString(),studentId:fe.id,studentName:fe.name,teacherId:C,teacherName:R,subject:v.subject||le,reportImage:v.reportImage,notes:v.notes,createdAt:new Date().toISOString(),class:fe.class,section:fe.section},t=[...je,s];Ze(t),localStorage.setItem("royal-academy-student-reports",JSON.stringify(t)),await z("royal-academy-student-reports",t),alert(`Report sent to ${fe.name} successfully!`),_({reportImage:"",notes:"",subject:""}),_e(null),Z(!1)},Kt=async s=>{if(confirm("Are you sure you want to delete this report? This action cannot be undone.")){const t=je.filter(a=>a.id!==s);Ze(t),localStorage.setItem("royal-academy-student-reports",JSON.stringify(t)),await z("royal-academy-student-reports",t),alert("Report deleted successfully!")}},Qt=async()=>{if(!bs||!v.reportImage||!v.notes){alert("Please ensure all fields are filled and an image is uploaded.");return}const s=je.map(t=>t.id===bs.id?{...t,subject:v.subject,reportImage:v.reportImage,notes:v.notes,teacherId:C,teacherName:R}:t);Ze(s),localStorage.setItem("royal-academy-student-reports",JSON.stringify(s)),await z("royal-academy-student-reports",s),alert(`Report for ${bs.studentName} updated successfully!`),ps(!1),fs(null),_({reportImage:"",notes:"",subject:""})},ea=s=>{fs(s),_({subject:s.subject,reportImage:s.reportImage,notes:s.notes}),ps(!0)},sa=async()=>{if(!w||!S.amount||S.months.length===0){alert("Please select a student, enter amount, and select at least one month");return}const s={id:Date.now().toString(),studentId:w.id,studentName:w.name,class:w.class,section:w.section,amount:parseFloat(S.amount),months:S.months,notes:S.notes,teacherId:C,teacherName:R,createdAt:new Date().toISOString(),status:"pending"},t=[...ss,s];st(t),localStorage.setItem("royal-academy-payment-requests",JSON.stringify(t)),await z("royal-academy-payment-requests",t);const a=S.months.map(n=>({id:`${Date.now()}-${n}`,studentId:w.id,studentName:w.name,class:w.class,section:w.section,month:n,year:lt,amount:parseFloat(S.amount)/S.months.length,status:"pending",notes:S.notes,teacherId:C,createdAt:new Date().toISOString()})),r=[...De,...a];et(r),localStorage.setItem("royal-academy-fee-records",JSON.stringify(r)),await z("royal-academy-fee-records",r),alert(`Payment request created for ${w.name}!
Amount: â‚¹${S.amount}
Months: ${S.months.join(", ")}`),Ee({amount:"",months:[],notes:""}),X(null),Me(!1)},ta=s=>{const t=De.filter(i=>i.studentId===s),a=t.filter(i=>i.status==="pending").map(i=>i.month),r=t.filter(i=>i.status==="paid").map(i=>i.month),n=t.filter(i=>i.status==="pending").reduce((i,m)=>i+m.amount,0);return{pendingMonths:a,paidMonths:r,totalPending:n,totalRecords:t.length}},aa=s=>{Ee(t=>({...t,months:t.months.includes(s)?t.months.filter(a=>a!==s):[...t.months,s]}))},la=s=>{const t={studentId:s,redirectFrom:"teacher",teacherId:C,teacherName:R,timestamp:new Date().toISOString()};localStorage.setItem("payment-redirect-info",JSON.stringify(t)),K("/student-auth?action=payment")},ra=()=>{if(!D.subject||!D.message){alert("Please fill in both subject and message");return}const s={id:Date.now().toString(),fromId:C,fromName:R,fromType:"teacher",toId:"principal@royalacademy.edu",toName:"Principal",toType:"principal",subject:D.subject,message:D.message,photo1:D.photo1,photo2:D.photo2,createdAt:new Date().toISOString(),status:"unread",replies:[]},a=[...JSON.parse(localStorage.getItem("royal-academy-notifications")||"[]"),s];localStorage.setItem("royal-academy-notifications",JSON.stringify(a)),alert(`Notification sent to Principal successfully!
Subject: ${D.subject}`),ue({subject:"",message:"",photo1:"",photo2:""}),ts(!1)},ct=s=>{ls(s),Oe({subject:s.subject,message:s.message}),rs(!0)},na=()=>{if(!Le||!ie.subject||!ie.message){alert("Please fill in both subject and message");return}const s={...Le,subject:ie.subject,message:ie.message},a=JSON.parse(localStorage.getItem("royal-academy-notifications")||"[]").map(r=>r.id===Le.id?s:r);localStorage.setItem("royal-academy-notifications",JSON.stringify(a)),as(r=>r.map(n=>n.id===Le.id?s:n)),alert("Notification updated successfully!"),rs(!1),ls(null),Oe({subject:"",message:""})},mt=s=>{if(!confirm("Are you sure you want to delete this notification?"))return;const a=JSON.parse(localStorage.getItem("royal-academy-notifications")||"[]").filter(r=>r.id!==s);localStorage.setItem("royal-academy-notifications",JSON.stringify(a)),as(r=>r.filter(n=>n.id!==s)),alert("Notification deleted successfully!")},xt=s=>{os(s),ns(!0)},oa=()=>{if(!te||!ds){alert("Please enter a reply message");return}const s={id:Date.now().toString(),fromId:C,fromName:R,fromType:"teacher",message:ds,createdAt:new Date().toISOString()},t={...te,replies:[...te.replies||[],s]},r=JSON.parse(localStorage.getItem("royal-academy-notifications")||"[]").map(n=>n.id===te.id?t:n);localStorage.setItem("royal-academy-notifications",JSON.stringify(r)),as(n=>n.map(i=>i.id===te.id?t:i)),alert("Reply sent successfully!"),is(""),ns(!1),os(null)},da=()=>{if(!d.subject||!d.message){alert("Please fill in both subject and message");return}if(d.targetType==="class"&&!d.targetClass){alert("Please select a class");return}if(d.targetType==="section"&&(!d.targetClass||!d.targetSection)){alert("Please select both class and section");return}if(d.targetType==="student"&&!d.targetStudentId){alert("Please select a student");return}const s={id:Date.now().toString(),subject:d.subject,message:d.message,senderType:"teacher",senderId:C,senderName:R,targetType:d.targetType,targetClass:d.targetClass,targetSection:d.targetSection,targetStudentId:d.targetStudentId,photo1:d.photo1,photo2:d.photo2,createdAt:new Date().toISOString(),status:"unread"},a=[...JSON.parse(localStorage.getItem("royal-academy-student-notifications")||"[]"),s];localStorage.setItem("royal-academy-student-notifications",JSON.stringify(a));let r="";switch(d.targetType){case"all":r="all students";break;case"class":r=`Class ${d.targetClass}`;break;case"section":r=`Class ${d.targetClass}-${d.targetSection}`;break;case"student":const i=p.find(m=>m.id===d.targetStudentId);r=i?i.name:"selected student";break}alert(`Notification sent to ${r} successfully!
Subject: ${d.subject}`),P({subject:"",message:"",targetType:"all",targetClass:"",targetSection:"",targetStudentId:"",photo1:"",photo2:""}),cs(!1);const n=[...Pe,s];ms(n)},ia=s=>{xs(s),P({subject:s.subject,message:s.message,targetType:s.targetType,targetClass:s.targetClass,targetSection:s.targetSection,targetStudentId:s.targetStudentId,photo1:s.photo1||"",photo2:s.photo2||""}),us(!0)},ca=()=>{if(!ae||!d.subject||!d.message){alert("Please fill in both subject and message");return}const s={...ae,subject:d.subject,message:d.message,targetType:d.targetType,targetClass:d.targetClass,targetSection:d.targetSection,targetStudentId:d.targetStudentId},a=JSON.parse(localStorage.getItem("royal-academy-student-notifications")||"[]").map(r=>r.id===ae.id?s:r);localStorage.setItem("royal-academy-student-notifications",JSON.stringify(a)),ms(r=>r.map(n=>n.id===ae.id?s:n)),alert("Student notification updated successfully!"),us(!1),xs(null),P({subject:"",message:"",targetType:"all",targetClass:"",targetSection:"",targetStudentId:"",photo1:"",photo2:""})},ma=s=>{if(!confirm("Are you sure you want to delete this student notification?"))return;const a=JSON.parse(localStorage.getItem("royal-academy-student-notifications")||"[]").filter(r=>r.id!==s);localStorage.setItem("royal-academy-student-notifications",JSON.stringify(a)),ms(r=>r.filter(n=>n.id!==s)),alert("Student notification deleted successfully!")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-royal via-royal/90 to-gold/20",children:[e.jsxs("div",{className:"bg-gradient-to-r from-royal via-purple-900 to-royal backdrop-blur-md border-b border-gold/30 sticky top-0 z-40 shadow-lg",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gold/10 via-transparent to-gold/10"}),e.jsx("div",{className:"px-2 py-2 sm:px-4 sm:py-3 lg:px-6 lg:py-6 relative",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 min-w-0 flex-1",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[O.photo?e.jsx("img",{src:O.photo,alt:"Profile",className:"h-10 w-10 sm:h-14 sm:w-14 lg:h-16 lg:w-16 rounded-full object-cover border-2 border-gold shadow-lg ring-2 ring-gold/20"}):e.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 lg:w-16 lg:h-16 rounded-full bg-gradient-to-br from-gold via-yellow-400 to-gold flex items-center justify-center shadow-lg ring-2 ring-gold/20",children:e.jsx(Ls,{className:"h-5 w-5 sm:h-7 sm:w-7 lg:h-8 lg:w-8 text-royal"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 bg-green-500 rounded-full border-2 border-white flex items-center justify-center",children:e.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-white rounded-full"})})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h1",{className:"text-sm sm:text-base md:text-lg lg:text-2xl font-heading font-bold text-white mb-0.5 sm:mb-1 tracking-wide leading-tight truncate",children:O.name||R}),e.jsxs("div",{className:"flex flex-col space-y-0.5 sm:space-y-1",children:[e.jsxs("p",{className:"text-gold/90 text-[10px] sm:text-xs md:text-sm font-medium flex items-center",children:[e.jsx(ya,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[le," Teacher"]})]}),e.jsx("p",{className:"hidden md:block text-white/80 text-[10px] sm:text-xs font-medium",children:"Royal Academy â€¢ Excellence in Education"})]})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-3 lg:space-y-0 lg:space-x-6",children:[e.jsxs("div",{className:"hidden lg:flex items-center space-x-6",children:[e.jsx("button",{onClick:()=>K("/"),className:"text-white/80 hover:text-gold transition-all duration-300 text-sm font-medium hover:scale-105",children:"Home"}),e.jsx("button",{onClick:()=>K("/about"),className:"text-white/80 hover:text-gold transition-all duration-300 text-sm font-medium hover:scale-105",children:"About"}),e.jsx("button",{onClick:()=>K("/courses"),className:"text-white/80 hover:text-gold transition-all duration-300 text-sm font-medium hover:scale-105",children:"Courses"}),e.jsx("button",{onClick:()=>K("/admissions"),className:"text-white/80 hover:text-gold transition-all duration-300 text-sm font-medium hover:scale-105",children:"Admissions"}),e.jsx("button",{onClick:()=>K("/gallery"),className:"text-white/80 hover:text-gold transition-all duration-300 text-sm font-medium hover:scale-105",children:"Gallery"})]}),e.jsxs("div",{className:"flex items-center justify-center lg:justify-end space-x-1 sm:space-x-2 w-full lg:w-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>Ue(!tt),className:"relative bg-white/10 border-white/20 text-white dark:text-white hover:bg-white/20 hover:border-gold/50 transition-all duration-300 backdrop-blur-sm rounded-lg overflow-hidden w-8 h-8 sm:w-9 sm:h-9 p-1.5 sm:p-2 lg:w-auto lg:h-auto lg:px-3 lg:py-2",children:[e.jsx(we,{className:"h-4 w-4"}),ke.filter(s=>s.status==="unread").length>0&&e.jsx("span",{className:"pointer-events-none absolute top-0.5 right-0.5 h-4 w-4 lg:h-5 lg:w-5 bg-gradient-to-r from-red-500 to-red-600 text-white text-[10px] rounded-full flex items-center justify-center shadow-lg",children:ke.filter(s=>s.status==="unread").length})]}),tt&&(It?e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-3",onClick:()=>Ue(!1),children:e.jsxs("div",{className:"bg-card border border-border rounded-xl w-full max-w-[calc(100vw-24px)] max-h-[85vh] overflow-hidden",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b border-border",children:[e.jsx("h3",{className:"font-semibold text-foreground text-sm sm:text-base",children:"Notifications"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>Ue(!1),className:"h-8 w-8 p-0",children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"overflow-y-auto scrollbar-thin scrollbar-thumb-muted-foreground/30 scrollbar-track-transparent hover:scrollbar-thumb-muted-foreground/50",style:{maxHeight:"calc(85vh - 60px)"},children:ke.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground text-sm",children:"No notifications"}):ke.map(s=>e.jsxs("div",{className:"p-3 sm:p-4 border-b border-border hover:bg-muted/50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2 gap-2",children:[e.jsx("h4",{className:"text-sm font-medium text-foreground break-words flex-1",children:s.subject}),e.jsx("span",{className:`px-2 py-1 rounded text-xs flex-shrink-0 ${s.status==="unread"?"bg-blue-500/20 text-blue-400":"bg-muted text-muted-foreground"}`,children:s.status==="unread"?"New":"Read"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mb-2",children:["To: ",s.toName," â€¢ ",new Date(s.createdAt).toLocaleDateString()]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2 break-words whitespace-pre-wrap",children:s.message}),s.replies&&s.replies.length>0&&e.jsxs("div",{className:"mt-2 p-2 bg-green-500/10 rounded border-l-2 border-green-500",children:[e.jsx("p",{className:"text-xs font-medium text-green-400 mb-1",children:"Principal Reply:"}),e.jsx("p",{className:"text-xs text-foreground break-words whitespace-pre-wrap",children:s.replies[s.replies.length-1].message}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(s.replies[s.replies.length-1].createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>ct(s),className:"h-6 px-2 text-xs text-blue-600 hover:text-blue-700",children:[e.jsx(Ie,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>xt(s),className:"h-6 px-2 text-xs text-green-600 hover:text-green-700",children:[e.jsx(Re,{className:"h-3 w-3 mr-1"}),"Reply"]}),e.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>mt(s.id),className:"h-6 px-2 text-xs text-red-600 hover:text-red-700",children:[e.jsx(Te,{className:"h-3 w-3 mr-1"}),"Delete"]})]})]},s.id))})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>Ue(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-[calc(100vw-4rem)] sm:w-80 teacher-notification-dropdown bg-card border border-border rounded-lg shadow-lg z-50 max-h-96 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"My Notifications & Replies"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>Ue(!1),className:"h-8 w-8 p-0 hover:bg-muted",children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-muted-foreground/30 scrollbar-track-transparent hover:scrollbar-thumb-muted-foreground/50",children:ke.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No notifications"}):ke.map(s=>e.jsxs("div",{className:"p-4 border-b border-border hover:bg-muted/50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-foreground",children:s.subject}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.status==="unread"?"bg-blue-500/20 text-blue-400":"bg-muted text-muted-foreground"}`,children:s.status==="unread"?"New Reply":"Read"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mb-2",children:["To: ",s.toName," â€¢ ",new Date(s.createdAt).toLocaleDateString()]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2 break-words whitespace-pre-wrap",children:s.message}),s.replies&&s.replies.length>0&&e.jsxs("div",{className:"mt-2 p-2 bg-green-500/10 rounded border-l-2 border-green-500",children:[e.jsx("p",{className:"text-xs font-medium text-green-400 mb-1",children:"Principal Reply:"}),e.jsx("p",{className:"text-xs text-foreground break-words whitespace-pre-wrap",children:s.replies[s.replies.length-1].message}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(s.replies[s.replies.length-1].createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>ct(s),className:"h-6 px-2 text-xs text-blue-600 hover:text-blue-700",children:[e.jsx(Ie,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>xt(s),className:"h-6 px-2 text-xs text-green-600 hover:text-green-700",children:[e.jsx(Re,{className:"h-3 w-3 mr-1"}),"Reply"]}),e.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>mt(s.id),className:"h-6 px-2 text-xs text-red-600 hover:text-red-700",children:[e.jsx(Te,{className:"h-3 w-3 mr-1"}),"Delete"]})]})]},s.id))})]})]}))]}),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>cs(!0),className:"bg-gradient-to-r from-purple-500/20 to-purple-600/20 border-purple-400/30 text-white dark:text-white hover:from-purple-500/30 hover:to-purple-600/30 hover:border-purple-300/50 transition-all duration-300 backdrop-blur-sm shadow-lg px-1.5 py-1.5 sm:px-2 sm:py-2 lg:px-3 lg:py-2",children:[e.jsx(we,{className:"h-3 w-3 sm:h-4 sm:w-4 lg:mr-2"}),e.jsx("span",{className:"hidden lg:inline font-medium",children:"Notify Students"}),e.jsx("span",{className:"hidden sm:inline lg:hidden text-xs font-medium ml-1",children:"Notify"})]}),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>at(!0),className:"bg-gradient-to-r from-indigo-500/20 to-indigo-600/20 border-indigo-400/30 text-white dark:text-white hover:from-indigo-500/30 hover:to-indigo-600/30 hover:border-indigo-300/50 transition-all duration-300 backdrop-blur-sm shadow-lg relative px-1.5 py-1.5 sm:px-2 sm:py-2 lg:px-3 lg:py-2",children:[e.jsx(Re,{className:"h-3 w-3 sm:h-4 sm:w-4 lg:mr-2"}),e.jsx("span",{className:"hidden lg:inline font-medium",children:"Manage Sent"}),e.jsx("span",{className:"hidden sm:inline lg:hidden text-xs font-medium ml-1",children:"Manage"}),Pe.length>0&&e.jsx("span",{className:"absolute top-0.5 right-0.5 lg:relative lg:top-0 lg:right-0 lg:ml-2 px-1 py-0.5 lg:px-2 lg:py-1 bg-gradient-to-r from-gold to-yellow-500 text-royal text-xs rounded-full font-bold shadow-md",children:Pe.length})]}),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>ts(!0),className:"bg-gradient-to-r from-blue-500/20 to-blue-600/20 border-blue-400/30 text-white dark:text-white hover:from-blue-500/30 hover:to-blue-600/30 hover:border-blue-300/50 transition-all duration-300 backdrop-blur-sm shadow-lg px-1.5 py-1.5 sm:px-2 sm:py-2 lg:px-3 lg:py-2",children:[e.jsx(we,{className:"h-3 w-3 sm:h-4 sm:w-4 lg:mr-2"}),e.jsx("span",{className:"hidden lg:inline font-medium",children:"Notify Principal"}),e.jsx("span",{className:"hidden sm:inline lg:hidden text-xs font-medium ml-1",children:"Principal"})]}),e.jsxs(l,{variant:"outline",size:"sm",onClick:Ut,className:"bg-gradient-to-r from-red-500/20 to-red-600/20 border-red-400/30 text-white dark:text-white hover:from-red-500/30 hover:to-red-600/30 hover:border-red-300/50 transition-all duration-300 backdrop-blur-sm shadow-lg px-1.5 py-1.5 sm:px-2 sm:py-2 lg:px-3 lg:py-2",children:[e.jsx(va,{className:"h-3 w-3 sm:h-4 sm:w-4 lg:mr-2"}),e.jsx("span",{className:"hidden lg:inline font-medium",children:"Logout"}),e.jsx("span",{className:"hidden sm:inline lg:hidden text-xs font-medium ml-1",children:"Exit"})]})]})]})]})})]}),e.jsxs("div",{className:"px-4 py-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 lg:py-6",children:[I==="dashboard"&&e.jsxs("div",{className:"space-y-3 lg:space-y-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3 lg:gap-4",children:[e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-card/95 backdrop-blur-md rounded-lg lg:rounded-xl p-3 lg:p-6 border border-border/50",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:space-x-3 space-y-1.5 lg:space-y-0",children:[e.jsx("div",{className:"w-8 h-8 lg:w-12 lg:h-12 rounded-full bg-blue-500/20 flex items-center justify-center mx-auto lg:mx-0",children:e.jsx(ze,{className:"h-4 w-4 lg:h-6 lg:w-6 text-blue-400"})}),e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsx("p",{className:"text-lg lg:text-2xl font-bold text-foreground",children:p.length}),e.jsx("p",{className:"text-[11px] lg:text-sm text-muted-foreground",children:"Total Students"})]})]})}),e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-card/95 backdrop-blur-md rounded-lg lg:rounded-xl p-3 lg:p-6 border border-border/50",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:space-x-3 space-y-1.5 lg:space-y-0",children:[e.jsx("div",{className:"w-8 h-8 lg:w-12 lg:h-12 rounded-full bg-green-500/20 flex items-center justify-center mx-auto lg:mx-0",children:e.jsx(Ve,{className:"h-4 w-4 lg:h-6 lg:w-6 text-green-400"})}),e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsx("p",{className:"text-lg lg:text-2xl font-bold text-foreground",children:Q.length}),e.jsx("p",{className:"text-[11px] lg:text-sm text-muted-foreground",children:"Homework Assigned"})]})]})}),e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-card/95 backdrop-blur-md rounded-lg lg:rounded-xl p-3 lg:p-6 border border-border/50",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:space-x-3 space-y-1.5 lg:space-y-0",children:[e.jsx("div",{className:"w-8 h-8 lg:w-12 lg:h-12 rounded-full bg-purple-500/20 flex items-center justify-center mx-auto lg:mx-0",children:e.jsx(ys,{className:"h-4 w-4 lg:h-6 lg:w-6 text-purple-400"})}),e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsx("p",{className:"text-lg lg:text-2xl font-bold text-foreground",children:H.length}),e.jsx("p",{className:"text-[11px] lg:text-sm text-muted-foreground",children:"Attendance Records"})]})]})}),e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-card/95 backdrop-blur-md rounded-lg lg:rounded-xl p-3 lg:p-6 border border-border/50",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:space-x-3 space-y-1.5 lg:space-y-0",children:[e.jsx("div",{className:"w-8 h-8 lg:w-12 lg:h-12 rounded-full bg-gold/20 flex items-center justify-center mx-auto lg:mx-0",children:e.jsx(vs,{className:"h-4 w-4 lg:h-6 lg:w-6 text-gold"})}),e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsx("p",{className:"text-lg lg:text-2xl font-bold text-foreground",children:ee.length}),e.jsx("p",{className:"text-[11px] lg:text-sm text-muted-foreground",children:"Classes Available"})]})]})})]}),e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-card/95 backdrop-blur-md rounded-lg lg:rounded-xl p-3 sm:p-4 lg:p-6 border border-gold/40",children:[e.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-heading font-bold bg-gradient-to-r from-gold via-yellow-400 to-sky-400 bg-clip-text text-transparent mb-2 sm:mb-3 lg:mb-6",children:"Quick Actions"}),e.jsx("div",{className:"rounded-md overflow-hidden bg-border/30 sm:bg-transparent",children:e.jsx("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 sm:gap-3 lg:gap-4",children:[{title:"Send Homework",desc:"Assign homework with photos",icon:Ve,action:()=>A("homework")},{title:"Take Attendance",desc:"Mark student attendance",icon:ys,action:()=>A("attendance")},{title:"Create Student ID",desc:"Register new students",icon:ws,action:()=>A("createstudent")},{title:"View Students",desc:"Manage student records",icon:ze,action:()=>A("students")},{title:"Add Remarks",desc:"Give good/bad remarks",icon:Re,action:()=>A("remarks")},{title:"Fee Management",desc:"Manage student fees",icon:Ge,action:()=>A("fees")},{title:"Syllabus",desc:"View syllabus",icon:Ve,action:()=>window.open("/syllabus","_blank")},{title:"Holidays",desc:"View holidays",icon:jt,action:()=>window.open("/holiday","_blank")}].map((s,t)=>e.jsx(j.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5+t*.05},onClick:s.action,className:"p-3 sm:p-4 lg:p-4 rounded-lg bg-card/80 border border-border/30 hover:bg-card/95 transition-shadow duration-200 cursor-pointer flex flex-col items-center justify-center gap-3 shadow-sm hover:shadow-md",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center w-full",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 rounded-full bg-gradient-to-br from-royal/10 to-sky-200/5 flex items-center justify-center flex-shrink-0 shadow-sm",children:e.jsx(s.icon,{className:"h-5 w-5 sm:h-6 sm:w-6 lg:h-7 lg:w-7 text-gold"})}),e.jsxs("div",{className:"flex-1 min-w-0 w-full",children:[e.jsx("h3",{className:"font-semibold text-foreground text-sm sm:text-base lg:text-sm leading-tight text-center px-1 break-words",children:s.title}),e.jsx("p",{className:"text-[11px] sm:text-sm text-muted-foreground leading-tight block text-center px-2 break-words mt-1",children:s.desc})]})]})},s.title))})})]}),e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-card/95 backdrop-blur-md rounded-lg lg:rounded-xl p-4 lg:p-6 border border-border/50",children:[e.jsx("h2",{className:"text-lg lg:text-xl font-heading font-bold text-foreground mb-4 lg:mb-6",children:"Recent Activity"}),e.jsxs("div",{className:"space-y-3 lg:space-y-4",children:[Q.slice(-3).map((s,t)=>e.jsxs("div",{className:"flex items-center space-x-3 lg:space-x-4 p-3 lg:p-4 bg-muted/20 rounded-lg hover:bg-muted/30 transition-colors duration-200",children:[e.jsx("div",{className:"w-10 h-10 lg:w-12 lg:h-12 rounded-full bg-blue-500/20 flex items-center justify-center flex-shrink-0",children:e.jsx(Ve,{className:"h-4 w-4 lg:h-5 lg:w-5 text-blue-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-foreground text-sm lg:text-base truncate",children:s.title}),e.jsxs("p",{className:"text-xs lg:text-sm text-muted-foreground truncate",children:["Class ",s.class,"-",s.section," â€¢ Due: ",s.dueDate]})]})]},s.id)),Q.length===0&&e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No recent homework assigned"})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2 mb-4 sm:mb-6",children:[{id:"dashboard",label:"Dashboard",icon:wa},{id:"homework",label:"Homework",icon:Ve},{id:"attendance",label:"Attendance",icon:ys},{id:"students",label:"Students",icon:ze},{id:"createstudent",label:"Create Student",icon:ws},{id:"remarks",label:"Remarks",icon:Re},{id:"studentreport",label:"Student Report",icon:Bs},{id:"fees",label:"Fee Management",icon:Ge}].map(s=>e.jsxs(l,{variant:I===s.id?"default":"outline",onClick:()=>A(s.id),size:"sm",className:`flex items-center space-x-1 sm:space-x-2 h-9 px-2 sm:px-3 ${I===s.id?"bg-primary text-primary-foreground border-primary":"bg-white dark:bg-background text-black dark:text-foreground border-gray-300 dark:border-border hover:bg-gray-100 dark:hover:bg-muted"}`,children:[e.jsx(s.icon,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline text-xs sm:text-sm",children:s.label})]},s.id))}),I==="homework"&&e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsx("h2",{className:"text-lg sm:text-2xl font-heading font-bold text-white",children:"Homework Management"}),e.jsxs(l,{onClick:()=>N(!0),className:"bg-gradient-to-r from-gold to-yellow-500 text-black h-9 sm:h-10 w-full sm:w-auto",children:[e.jsx(qs,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Create Homework"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-6",children:Q.map(s=>e.jsxs(j.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-card/95 backdrop-blur-md rounded-xl p-4 sm:p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:[e.jsx("h3",{className:"font-bold text-black dark:text-foreground text-sm sm:text-base",children:s.title}),e.jsxs("span",{className:"text-xs bg-gold/20 text-gold px-2 py-1 rounded-full flex-shrink-0",children:[s.class,"-",s.section]})]}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-3 sm:mb-4",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between text-[10px] sm:text-xs text-muted-foreground mb-3 sm:mb-4",children:[e.jsxs("span",{children:["Due: ",s.dueDate]}),e.jsxs("span",{children:[s.attachments.length," attachments"]})]}),e.jsxs("div",{className:"flex space-x-2 pt-2 border-t border-border/30",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>qt(s),className:"flex-1 text-xs h-8 sm:h-9",children:"âœï¸ Edit"}),e.jsx(l,{variant:"destructive",size:"sm",onClick:()=>Vt(s.id),className:"flex-1 text-xs h-8 sm:h-9",children:"ðŸ—‘ï¸ Delete"})]})]},s.id))})]})]}),pe&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-3 sm:p-4",children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white dark:bg-white text-black rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-border",children:[e.jsx("h3",{className:"text-base sm:text-xl font-heading font-bold text-black dark:text-foreground",children:Qe?"Edit Homework":"Create Homework"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{N(!1),Rs(null)},className:"h-8 w-8 sm:h-9 sm:w-9 p-0",children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"p-4 sm:p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2 text-black dark:text-foreground",children:"Title *"}),e.jsx(T,{value:B.title,onChange:s=>ve({...B,title:s.target.value}),placeholder:"Enter homework title",className:"h-9 sm:h-10 text-sm text-black dark:text-black placeholder:text-gray-500 dark:placeholder:text-gray-400 bg-white dark:bg-white border border-gray-300 dark:border-gray-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2 text-black dark:text-foreground",children:"Description *"}),e.jsx("textarea",{value:B.description,onChange:s=>ve({...B,description:s.target.value}),placeholder:"Enter homework description",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-300 rounded-lg resize-none text-sm text-black dark:text-black placeholder:text-gray-500 dark:placeholder:text-gray-400 bg-white dark:bg-white"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2 text-black dark:text-foreground",children:"Class *"}),e.jsx("select",{value:B.class,onChange:s=>ve({...B,class:s.target.value}),className:"w-full p-2 sm:p-3 rounded-lg bg-white dark:bg-white text-sm text-black dark:text-black border border-gray-300 dark:border-gray-300",children:ee.map(s=>e.jsxs("option",{value:s,children:["Class ",s]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2 text-black dark:text-foreground",children:"Section *"}),e.jsx("select",{value:B.section,onChange:s=>ve({...B,section:s.target.value}),className:"w-full p-2 sm:p-3 rounded-lg bg-white dark:bg-white text-sm text-black dark:text-black border border-gray-300 dark:border-gray-300",children:oe.map(s=>e.jsxs("option",{value:s,children:["Section ",s]},s))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2 text-black dark:text-foreground",children:"Due Date *"}),e.jsx(T,{type:"date",value:B.dueDate,onChange:s=>ve({...B,dueDate:s.target.value}),className:"h-9 sm:h-10 text-sm text-black dark:text-black placeholder:text-gray-500 dark:placeholder:text-gray-400 bg-white dark:bg-white border border-gray-300 dark:border-gray-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2 text-black dark:text-foreground",children:"Attach Photos"}),e.jsx("input",{ref:Ks,type:"file",accept:"image/*",multiple:!0,onChange:s=>Lt(s.target.files),className:"hidden"}),e.jsxs(l,{type:"button",variant:"outline",onClick:()=>{var s;return(s=Ks.current)==null?void 0:s.click()},className:"w-full h-9 sm:h-10 text-sm bg-gradient-to-r from-sky-400 via-sky-500 to-gold text-white font-medium border-none shadow-md hover:from-sky-500 hover:via-sky-600 hover:to-yellow-400",children:[e.jsx(Vs,{className:"h-4 w-4 mr-2"}),"Upload Photos (",B.attachments.length,")"]})]}),B.attachments.length>0&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:B.attachments.map((s,t)=>e.jsx("img",{src:s,alt:`Attachment ${t+1}`,className:"w-full h-16 sm:h-20 object-cover rounded-lg border"},t))})]})}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-2 sm:gap-3 sm:space-x-0 p-4 sm:p-6 border-t border-border",children:[e.jsx(l,{variant:"outline",onClick:()=>N(!1),className:"h-9 sm:h-10 text-sm",children:"Cancel"}),e.jsxs(l,{onClick:Bt,className:"bg-gradient-to-r from-gold to-yellow-500 text-black h-9 sm:h-10 text-sm",children:[e.jsx(ft,{className:"h-4 w-4 mr-2"}),Qe?"Update Homework":"Send Homework"]})]})]})}),I==="createstudent"&&e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-4 sm:mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-4 sm:p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base sm:text-xl font-heading font-bold text-foreground",children:"Create Student ID"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Register new students and generate login credentials"})]}),e.jsx(l,{variant:"outline",onClick:()=>A("dashboard"),className:"text-muted-foreground hover:text-foreground h-8 w-8 sm:h-9 sm:w-9 p-0",children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Full Name *"}),e.jsx(T,{value:c.fullName,onChange:s=>me({...c,fullName:s.target.value}),placeholder:"Enter student's full name",className:"w-full h-9 sm:h-10 text-sm text-black dark:text-foreground placeholder:text-gray-500 dark:placeholder:text-gray-400 bg-white dark:bg-background border-gray-300 dark:border-border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Email Address *"}),e.jsx(T,{type:"email",value:c.email,onChange:s=>me({...c,email:s.target.value}),placeholder:"Enter student's email",className:"w-full h-9 sm:h-10 text-sm text-black dark:text-foreground placeholder:text-gray-500 dark:placeholder:text-gray-400 bg-white dark:bg-background border-gray-300 dark:border-border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Roll Number *"}),e.jsx(T,{value:c.rollNumber,onChange:s=>me({...c,rollNumber:s.target.value}),placeholder:"Enter roll number",className:"w-full h-9 sm:h-10 text-sm text-black dark:text-foreground placeholder:text-gray-500 dark:placeholder:text-gray-400 bg-white dark:bg-background border-gray-300 dark:border-border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Parent Email"}),e.jsx(T,{type:"email",value:c.parentEmail,onChange:s=>me({...c,parentEmail:s.target.value}),placeholder:"Enter parent's email",className:"w-full h-9 sm:h-10 text-sm text-black dark:text-foreground placeholder:text-gray-500 dark:placeholder:text-gray-400 bg-white dark:bg-background border-gray-300 dark:border-border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Phone Number"}),e.jsx(T,{value:c.phone,onChange:s=>me({...c,phone:s.target.value}),placeholder:"Enter phone number",className:"w-full h-9 sm:h-10 text-sm"})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Class *"}),e.jsx("select",{value:c.class,onChange:s=>me({...c,class:s.target.value}),className:"w-full p-2 sm:p-3 border border-border rounded-lg bg-background text-sm",children:ee.map(s=>e.jsxs("option",{value:s,children:["Class ",s]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Section *"}),e.jsx("select",{value:c.section,onChange:s=>me({...c,section:s.target.value}),className:"w-full p-2 sm:p-3 border border-border rounded-lg bg-background text-sm",children:oe.map(s=>e.jsxs("option",{value:s,children:["Section ",s]},s))})]})]}),e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Sa,{className:"h-4 w-4 text-blue-400"}),e.jsx("h4",{className:"text-xs sm:text-sm font-semibold text-blue-400",children:"Password Information"})]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Student passwords are automatically generated using the format: firstname123 (e.g., john123). Login credentials will be displayed after account creation."})]}),e.jsxs(l,{onClick:Gt,className:"w-full bg-gradient-to-r from-gold to-yellow-500 text-black font-semibold py-3 h-10 sm:h-11 text-sm",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Create Student Account"]})]})]})]})}),I==="students"&&e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-4 sm:mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-4 sm:p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base sm:text-xl font-heading font-bold text-foreground",children:"View Students"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Manage student records and information"})]}),e.jsx(l,{variant:"outline",onClick:()=>A("dashboard"),className:"text-muted-foreground hover:text-foreground h-8 w-8 sm:h-9 sm:w-9 p-0",children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4 mb-4 sm:mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Class"}),e.jsx("select",{value:y,onChange:s=>q(s.target.value),className:"w-full p-2 sm:p-3 border border-border rounded-lg bg-background text-sm",children:ee.map(s=>e.jsxs("option",{value:s,children:["Class ",s]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Section"}),e.jsx("select",{value:x,onChange:s=>re(s.target.value),className:"w-full p-2 sm:p-3 border border-border rounded-lg bg-background text-sm",children:oe.map(s=>e.jsxs("option",{value:s,children:["Section ",s]},s))})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:W().length>0?W().map(s=>e.jsxs("div",{className:"bg-muted/20 rounded-lg p-3 sm:p-4 border border-border/30",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 mb-2 sm:mb-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gradient-to-r from-gold to-yellow-500 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-black font-semibold text-xs sm:text-sm",children:s.name.split(" ").map(t=>t[0]).join("").slice(0,2)})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"font-semibold text-foreground text-sm sm:text-base truncate",children:s.name}),e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["Roll: ",s.rollNumber]})]})]}),e.jsxs("div",{className:"space-y-1 text-xs sm:text-sm mb-2 sm:mb-3",children:[e.jsxs("p",{className:"truncate",children:[e.jsx("span",{className:"text-muted-foreground",children:"Email:"})," ",s.email]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Class:"})," ",s.class,"-",s.section]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Phone:"})," ",s.phone]}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("p",{className:"truncate min-w-0",children:[e.jsx("span",{className:"text-muted-foreground",children:"ID:"})," ",s.id]}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{navigator.clipboard.writeText(s.id),alert("Student ID copied to clipboard!")},title:"Copy Student ID",className:"h-6 sm:h-7 px-2 text-[10px] sm:text-xs flex-shrink-0",children:"Copy ID"})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{className:`px-2 py-1 text-[10px] sm:text-xs rounded-full ${s.status==="banned"?"bg-red-500/10 text-red-400 border border-red-500/30":"bg-green-500/10 text-green-400 border border-green-500/30"}`,children:s.status==="banned"?"Banned":"Active"})})]}),e.jsxs("div",{className:"flex gap-1 flex-wrap",children:[e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{const t=p.map(n=>n.id===s.id?{...n,status:n.status==="banned"?"active":"banned"}:n);G(t),localStorage.setItem("royal-academy-students",JSON.stringify(t));const r=JSON.parse(localStorage.getItem("royal-academy-auth-students")||"[]").map(n=>n.studentId===s.id?{...n,status:n.status==="banned"?"active":"banned"}:n);localStorage.setItem("royal-academy-auth-students",JSON.stringify(r)),alert(`Student ${s.status==="banned"?"unbanned":"banned"} successfully!`)},title:s.status==="banned"?"Unban Student":"Ban Student",className:`h-6 px-2 text-xs ${s.status==="banned"?"text-green-600 hover:text-green-700":"text-red-600 hover:text-red-700"}`,children:s.status==="banned"?"Unban":"Ban"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{me({fullName:s.name,email:s.email,rollNumber:s.rollNumber,class:s.class,section:s.section,parentEmail:s.parentEmail||"",phone:s.phone||"",image:s.image||""}),Xs(s.id),A("createstudent")},title:"Edit Student",className:"h-6 px-2 text-xs text-blue-600 hover:text-blue-700",children:"Edit"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{if(confirm(`Are you sure you want to delete ${s.name}? This action cannot be undone.`)){const t=p.filter(n=>n.id!==s.id);G(t),localStorage.setItem("royal-academy-students",JSON.stringify(t));const r=JSON.parse(localStorage.getItem("royal-academy-auth-students")||"[]").filter(n=>n.studentId!==s.id);localStorage.setItem("royal-academy-auth-students",JSON.stringify(r)),alert(`Student ${s.name} deleted successfully!`)}},title:"Delete Student",className:"h-6 px-2 text-xs text-red-600 hover:text-red-700",children:"Delete"})]})]},s.id)):e.jsxs("div",{className:"col-span-full text-center text-muted-foreground py-8",children:["No students found in Class ",y,"-",x]})}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs(l,{onClick:()=>A("createstudent"),className:"bg-gradient-to-r from-gold to-yellow-500 text-black",children:[e.jsx(ws,{className:"h-4 w-4 mr-2"}),"Add New Student"]})})]})}),I==="attendance"&&e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-3 sm:mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-3 sm:p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-6",children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[e.jsx("h2",{className:"text-sm sm:text-xl font-heading font-bold text-foreground",children:"Attendance Management"}),e.jsx("p",{className:"text-xs text-muted-foreground hidden sm:block",children:"Mark attendance and manage holidays"})]}),e.jsx(l,{variant:"outline",onClick:()=>A("dashboard"),className:"text-muted-foreground hover:text-foreground h-7 w-7 sm:h-9 sm:w-9 p-0 flex-shrink-0",children:e.jsx(k,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3 sm:mb-6 border-b border-border/50 pb-2",children:[e.jsx(l,{variant:Ne==="today"?"default":"ghost",onClick:()=>Xe("today"),className:"text-xs h-7 px-2 sm:text-sm sm:h-9 sm:px-3",children:"Today's Attendance"}),e.jsxs(l,{variant:Ne==="editday"?"default":"ghost",onClick:()=>Xe("editday"),className:"text-xs h-7 px-2 sm:text-sm sm:h-9 sm:px-3",children:[e.jsx("span",{className:"hidden sm:inline",children:"Edit Any Day"}),e.jsx("span",{className:"sm:hidden",children:"Edit Day"})]}),e.jsxs(l,{variant:Ne==="calendar"?"default":"ghost",onClick:()=>Xe("calendar"),className:"text-xs h-7 px-2 sm:text-sm sm:h-9 sm:px-3",children:[e.jsx("span",{className:"hidden sm:inline",children:"Attendance Calendar"}),e.jsx("span",{className:"sm:hidden",children:"Calendar"})]}),e.jsxs(l,{variant:Ne==="holidays"?"default":"ghost",onClick:()=>Xe("holidays"),className:"text-xs h-7 px-2 sm:text-sm sm:h-9 sm:px-3",children:[e.jsx("span",{className:"hidden sm:inline",children:"Manage Holidays"}),e.jsx("span",{className:"sm:hidden",children:"Holidays"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-4 mb-4 sm:mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Class"}),e.jsx("select",{value:y,onChange:s=>q(s.target.value),className:"w-full p-2 sm:p-3 border border-border rounded-lg bg-background text-sm",children:ee.map(s=>e.jsxs("option",{value:s,children:["Class ",s]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Section"}),e.jsx("select",{value:x,onChange:s=>re(s.target.value),className:"w-full p-2 sm:p-3 border border-border rounded-lg bg-background text-sm",children:oe.map(s=>e.jsxs("option",{value:s,children:["Section ",s]},s))})]})]}),Ne==="today"&&e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-3 sm:mb-4 gap-2",children:[e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["Date: ",new Date().toLocaleDateString()," (",new Date().toLocaleDateString("en-US",{weekday:"long"}),")"]}),new Date().getDay()===0&&e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-500/10 text-blue-400 border border-blue-500/30 self-start sm:self-auto",children:"Sunday - Holiday"})]}),W().length>0?e.jsxs(e.Fragment,{children:[W().map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 sm:p-4 bg-muted/20 rounded-lg border border-border/30 gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-gradient-to-r from-gold to-yellow-500 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-black font-semibold text-xs",children:s.name.split(" ").map(t=>t[0]).join("").slice(0,2)})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"font-medium text-foreground text-sm sm:text-base truncate",children:s.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Roll: ",s.rollNumber]})]})]}),e.jsxs("div",{className:"flex space-x-1 sm:space-x-2 flex-shrink-0",children:[e.jsxs(l,{size:"sm",onClick:()=>gs(t=>({...t,[s.id]:"present"})),className:`text-xs px-2 py-1 h-7 sm:h-8 sm:px-3 ${Be[s.id]==="present"?"bg-green-600 hover:bg-green-700 text-white":"bg-green-100 hover:bg-green-200 text-green-800 border border-green-300"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"âœ“ Present"}),e.jsx("span",{className:"sm:hidden",children:"âœ“"})]}),e.jsxs(l,{size:"sm",onClick:()=>gs(t=>({...t,[s.id]:"absent"})),className:`text-xs px-2 py-1 h-7 sm:h-8 sm:px-3 ${Be[s.id]==="absent"?"bg-red-600 hover:bg-red-700 text-white":"bg-red-100 hover:bg-red-200 text-red-800 border border-red-300"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"âœ— Absent"}),e.jsx("span",{className:"sm:hidden",children:"âœ—"})]}),e.jsxs(l,{size:"sm",onClick:()=>gs(t=>({...t,[s.id]:"late"})),className:`text-xs px-2 py-1 h-7 sm:h-8 sm:px-3 ${Be[s.id]==="late"?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-yellow-100 hover:bg-yellow-200 text-yellow-800 border border-yellow-300"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"â° Late"}),e.jsx("span",{className:"sm:hidden",children:"â°"})]})]})]},s.id)),e.jsx("div",{className:"text-center mt-4 sm:mt-6",children:e.jsxs(l,{onClick:Yt,className:"bg-gradient-to-r from-gold to-yellow-500 text-black w-full sm:w-auto h-9 sm:h-10",children:[e.jsx(ys,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Submit Attendance"]})})]}):e.jsxs("div",{className:"text-center text-muted-foreground py-6 sm:py-8 text-sm",children:["No students found in Class ",y,"-",x]})]}),Ne==="editday"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"bg-muted/20 rounded-lg p-3 sm:p-4 border border-border/30",children:[e.jsx("h4",{className:"font-semibold mb-2 sm:mb-3 text-foreground text-sm sm:text-base",children:"Select Date to Edit:"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsx("input",{type:"date",value:ye,onChange:s=>Ct(s.target.value),className:"p-2 sm:p-3 border border-border rounded-lg bg-background text-sm"}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:new Date(ye).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-3 sm:mb-4 gap-2",children:[e.jsxs("h4",{className:"font-semibold text-foreground text-sm sm:text-base",children:["Edit Attendance for ",new Date(ye).toLocaleDateString()]}),e.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground",children:["Class ",y,"-",x]})]}),W().length>0?e.jsx(e.Fragment,{children:W().map(s=>{var r;const t=(r=s.attendance)==null?void 0:r.find(n=>n.date===ye),a=(t==null?void 0:t.status)||"not-marked";return e.jsxs("div",{className:"flex items-center justify-between p-2 sm:p-4 bg-muted/20 rounded-lg border border-border/30 gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-gradient-to-r from-gold to-yellow-500 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-black font-semibold text-xs",children:s.name.split(" ").map(n=>n[0]).join("").slice(0,2)})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"font-medium text-foreground text-sm sm:text-base truncate",children:s.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Roll: ",s.rollNumber]}),t&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Current: ",e.jsx("span",{className:`font-medium ${a==="present"?"text-green-600":a==="absent"?"text-red-600":a==="late"?"text-yellow-600":"text-gray-600"}`,children:a==="not-marked"?"Not Marked":a.charAt(0).toUpperCase()+a.slice(1)})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 sm:space-x-2 flex-shrink-0",children:[e.jsxs(l,{size:"sm",onClick:()=>Ns(s.id,"present"),className:`text-xs px-2 py-1 h-7 sm:h-8 sm:px-3 ${a==="present"?"bg-green-600 hover:bg-green-700 text-white":"bg-green-100 hover:bg-green-200 text-green-800 border border-green-300"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"âœ“ Present"}),e.jsx("span",{className:"sm:hidden",children:"âœ“"})]}),e.jsxs(l,{size:"sm",onClick:()=>Ns(s.id,"absent"),className:`text-xs px-2 py-1 h-7 sm:h-8 sm:px-3 ${a==="absent"?"bg-red-600 hover:bg-red-700 text-white":"bg-red-100 hover:bg-red-200 text-red-800 border border-red-300"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"âœ— Absent"}),e.jsx("span",{className:"sm:hidden",children:"âœ—"})]}),e.jsxs(l,{size:"sm",onClick:()=>Ns(s.id,"late"),className:`text-xs px-2 py-1 h-7 sm:h-8 sm:px-3 ${a==="late"?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-yellow-100 hover:bg-yellow-200 text-yellow-800 border border-yellow-300"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"â° Late"}),e.jsx("span",{className:"sm:hidden",children:"â°"})]}),t&&e.jsxs(l,{size:"sm",onClick:()=>Ns(s.id,"remove"),className:"text-xs px-2 py-1 h-7 sm:h-8 sm:px-3 bg-gray-100 hover:bg-gray-200 text-gray-800 border border-gray-300",children:[e.jsx("span",{className:"hidden sm:inline",children:"âœ• Remove"}),e.jsx("span",{className:"sm:hidden",children:"âœ•"})]})]})]},s.id)})}):e.jsxs("div",{className:"text-center text-muted-foreground py-6 sm:py-8 text-sm",children:["No students found in Class ",y,"-",x]})]})]}),Ne==="calendar"&&e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"text-center mb-3 sm:mb-4",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-2",children:["Attendance Calendar - ",new Date().getFullYear()]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 sm:gap-4 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 bg-green-500 rounded"}),e.jsx("span",{children:"Present"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 bg-red-500 rounded-full"}),e.jsx("span",{children:"Absent"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-0 h-0 border-l-2 border-r-2 border-b-4 border-l-transparent border-r-transparent border-b-gray-400"}),e.jsx("span",{className:"ml-2",children:"Not Updated"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 bg-blue-500 rounded"}),e.jsx("span",{children:"Holiday"})]})]})]}),W().length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-xs sm:text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border/50",children:[e.jsx("th",{className:"text-left py-2 pr-2 sm:pr-4 sticky left-0 bg-card text-xs sm:text-sm",children:"Student"}),Array.from({length:30},(s,t)=>e.jsx("th",{className:"text-center py-2 px-1 min-w-[20px] sm:min-w-[24px] text-xs",children:t+1},t))]})}),e.jsx("tbody",{children:W().map(s=>e.jsxs("tr",{className:"border-b border-border/30",children:[e.jsx("td",{className:"py-2 pr-2 sm:pr-4 font-medium sticky left-0 bg-card text-xs sm:text-sm truncate max-w-[80px] sm:max-w-none",children:e.jsx("span",{className:"block truncate",children:s.name})}),Array.from({length:30},(t,a)=>{var u;const r=new Date;r.setDate(a+1);const n=r.toISOString().split("T")[0],i=r.getDay()===0||Ae.includes(n),m=(u=s.attendance)==null?void 0:u.find(h=>h.date===n);return e.jsx("td",{className:"text-center py-2 px-1",children:i?e.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 bg-blue-500 rounded mx-auto",title:"Holiday"}):m?m.status==="present"?e.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 bg-green-500 rounded mx-auto",title:"Present"}):m.status==="absent"?e.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 bg-red-500 rounded-full mx-auto",title:"Absent"}):e.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 bg-yellow-500 rounded mx-auto",title:"Late"}):e.jsx("div",{className:"w-0 h-0 border-l-2 border-r-2 border-b-4 border-l-transparent border-r-transparent border-b-gray-400 mx-auto",title:"Not Updated"})},a)})]},s.id))})]})}):e.jsxs("div",{className:"text-center text-muted-foreground py-6 sm:py-8 text-sm",children:["No students found in Class ",y,"-",x]})]}),Ne==="holidays"&&e.jsx("div",{className:"space-y-3 sm:space-y-4",children:e.jsxs("div",{className:"mb-4 sm:mb-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:"Manage Holidays"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[e.jsx("input",{type:"date",value:Ke,onChange:s=>Ws(s.target.value),className:"flex-1 p-2 sm:p-3 border border-border rounded-lg bg-background text-sm"}),e.jsx(l,{onClick:async()=>{if(Ke&&!Ae.includes(Ke)){const s=[...Ae,Ke];We(s),localStorage.setItem("royal-academy-holidays",JSON.stringify(s)),await z("royal-academy-holidays",s),Ws(""),alert("Holiday added successfully!")}},className:"bg-gradient-to-r from-gold to-yellow-500 text-black h-9 sm:h-10 w-full sm:w-auto text-sm",children:"Add Holiday"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm sm:text-base",children:"Current Holidays:"}),Ae.length>0?e.jsx("div",{className:"grid gap-2",children:Ae.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-2 sm:p-3 bg-muted/20 rounded-lg border border-border/30 gap-2",children:[e.jsx("span",{className:"text-xs sm:text-sm flex-1 min-w-0 truncate",children:new Date(s).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}),e.jsx(l,{variant:"destructive",size:"sm",onClick:async()=>{const a=Ae.filter((r,n)=>n!==t);We(a),localStorage.setItem("royal-academy-holidays",JSON.stringify(a)),await z("royal-academy-holidays",a),alert("Holiday removed successfully!")},className:"text-xs h-7 px-2 sm:h-8 sm:px-3 flex-shrink-0",children:"Remove"})]},t))}):e.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm",children:"No holidays added yet."})]}),e.jsx("div",{className:"mt-3 sm:mt-4 p-2 sm:p-3 bg-blue-500/10 rounded-lg border border-blue-500/30",children:e.jsx("p",{className:"text-xs sm:text-sm text-blue-400",children:"ðŸ“… Note: All Sundays are automatically marked as holidays and will appear in blue on the calendar."})})]})})]})}),I==="remarks"&&e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-4 sm:mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-4 sm:p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[e.jsx("h2",{className:"text-base sm:text-xl font-heading font-bold text-foreground",children:xe?"Edit Remark | à¤°à¤¿à¤®à¤¾à¤°à¥à¤• à¤à¤¡à¤¿à¤Ÿ à¤•à¤°à¥‡à¤‚":"Add Remarks | à¤°à¤¿à¤®à¤¾à¤°à¥à¤• à¤œà¥‹à¤¡à¤¼à¥‡à¤‚"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:xe?"Modify the selected remark | à¤šà¥à¤¨à¥‡ à¤—à¤ à¤°à¤¿à¤®à¤¾à¤°à¥à¤• à¤•à¥‹ à¤¬à¤¦à¤²à¥‡à¤‚":"Give positive or constructive feedback to students | à¤›à¤¾à¤¤à¥à¤°à¥‹à¤‚ à¤•à¥‹ à¤¸à¤•à¤¾à¤°à¤¾à¤¤à¥à¤®à¤• à¤¯à¤¾ à¤°à¤šà¤¨à¤¾à¤¤à¥à¤®à¤• à¤«à¥€à¤¡à¤¬à¥ˆà¤• à¤¦à¥‡à¤‚"})]}),e.jsx(l,{variant:"outline",onClick:()=>A("dashboard"),className:"text-muted-foreground hover:text-foreground h-8 w-8 sm:h-9 sm:w-9 p-0 flex-shrink-0",children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Class"}),e.jsx("select",{value:y,onChange:s=>q(s.target.value),className:"w-full p-3 border border-border rounded-lg bg-background",children:ee.map(s=>e.jsxs("option",{value:s,children:["Class ",s]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Section"}),e.jsx("select",{value:x,onChange:s=>re(s.target.value),className:"w-full p-3 border border-border rounded-lg bg-background",children:oe.map(s=>e.jsxs("option",{value:s,children:["Section ",s]},s))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Search by Roll Number (Optional)"}),e.jsx("input",{type:"text",placeholder:"Enter roll number to filter student...",className:"w-full p-3 border border-border rounded-lg bg-background text-foreground",onChange:s=>{const t=s.target.value.trim();if(t){const a=W().find(r=>r.rollNumber.toString()===t);a&&se({...g,studentId:a.id})}}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Student"}),e.jsxs("select",{value:g.studentId,onChange:s=>se({...g,studentId:s.target.value}),className:"w-full p-3 border border-border rounded-lg bg-background",children:[e.jsx("option",{value:"",children:"Choose a student..."}),W().map(s=>e.jsxs("option",{value:s.id,children:[s.name," (Roll: ",s.rollNumber,")"]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Remark Type"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs(l,{type:"button",variant:g.type==="good"?"default":"outline",onClick:()=>se({...g,type:"good"}),className:"flex items-center space-x-2",children:[e.jsx(vs,{className:"h-4 w-4"}),e.jsx("span",{children:"Positive"})]}),e.jsxs(l,{type:"button",variant:g.type==="bad"?"destructive":"outline",onClick:()=>se({...g,type:"bad"}),className:"flex items-center space-x-2",children:[e.jsx(Gs,{className:"h-4 w-4"}),e.jsx("span",{children:"Needs Improvement"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Subject"}),e.jsx(T,{value:g.subject,onChange:s=>se({...g,subject:s.target.value}),placeholder:"e.g., Mathematics, Behavior, Homework"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Message"}),e.jsx("textarea",{value:g.message,onChange:s=>se({...g,message:s.target.value}),placeholder:"Enter your remark or feedback...",rows:4,className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Attach Images (Optional) - Max 6 Photos"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:s=>{const t=Array.from(s.target.files||[]);if(t.length>0){if(g.images.length+t.length>6){alert("Maximum 6 images allowed per remark");return}Promise.all(t.map(a=>js(a))).then(a=>{se({...g,images:[...g.images,...a]})})}},className:"w-full p-3 border border-border rounded-lg bg-background text-foreground"}),g.images.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Attached Images (",g.images.length,"/6)"]}),e.jsx(l,{type:"button",variant:"outline",size:"sm",onClick:()=>se({...g,images:[]}),children:"Remove All"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:g.images.map((s,t)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:s,alt:`Remark attachment ${t+1}`,className:"w-full h-24 object-cover rounded-lg border border-border cursor-pointer",onClick:()=>{He({src:s,title:`Remark Image ${t+1}`}),Je(!0)}}),e.jsx(l,{type:"button",variant:"destructive",size:"sm",onClick:()=>{const a=g.images.filter((r,n)=>n!==t);se({...g,images:a})},className:"absolute top-1 right-1 h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(k,{className:"h-3 w-3"})})]},t))})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs(l,{onClick:_t,className:"bg-gradient-to-r from-gold to-yellow-500 text-black",disabled:!g.studentId||!g.message,children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),xe?"Update Remark":"Add Remark"]})})]}),g.studentId&&(()=>{const s=p.find(t=>t.id===g.studentId);return s&&s.remarks&&s.remarks.length>0})()&&e.jsxs("div",{className:"mt-8 border-t border-border/30 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Existing Remarks for ",(ut=p.find(s=>s.id===g.studentId))==null?void 0:ut.name]}),e.jsxs(l,{onClick:()=>{As(null),Ds(-1),se({...g,type:"good",message:"",subject:"",images:[]})},className:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white",size:"sm",children:[e.jsx(qs,{className:"h-4 w-4 mr-2"}),"Add New Remark"]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-blue-500/10 rounded-lg border border-blue-500/30",children:[e.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"ðŸ“ How to Edit Remarks | à¤°à¤¿à¤®à¤¾à¤°à¥à¤• à¤•à¥ˆà¤¸à¥‡ à¤à¤¡à¤¿à¤Ÿ à¤•à¤°à¥‡à¤‚"}),e.jsxs("div",{className:"text-sm text-blue-100 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"English:"}),' Click the "âœï¸ Edit" button on any remark to modify it. Click "ðŸ—‘ï¸ Delete" to remove it permanently.']}),e.jsxs("p",{children:[e.jsx("strong",{children:"à¤¹à¤¿à¤‚à¤¦à¥€:"}),' à¤•à¤¿à¤¸à¥€ à¤­à¥€ à¤°à¤¿à¤®à¤¾à¤°à¥à¤• à¤•à¥‹ à¤¬à¤¦à¤²à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ "âœï¸ Edit" à¤¬à¤Ÿà¤¨ à¤ªà¤° à¤•à¥à¤²à¤¿à¤• à¤•à¤°à¥‡à¤‚à¥¤ à¤‡à¤¸à¥‡ à¤¹à¤®à¥‡à¤¶à¤¾ à¤•à¥‡ à¤²à¤¿à¤ à¤¹à¤Ÿà¤¾à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ "ðŸ—‘ï¸ Delete" à¤ªà¤° à¤•à¥à¤²à¤¿à¤• à¤•à¤°à¥‡à¤‚à¥¤']}),e.jsxs("p",{children:[e.jsx("strong",{children:"English:"})," You can add images to remarks and edit them later. Changes are saved automatically."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"à¤¹à¤¿à¤‚à¤¦à¥€:"})," à¤†à¤ª à¤°à¤¿à¤®à¤¾à¤°à¥à¤• à¤®à¥‡à¤‚ à¤‡à¤®à¥‡à¤œ à¤œà¥‹à¤¡à¤¼ à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚ à¤”à¤° à¤¬à¤¾à¤¦ à¤®à¥‡à¤‚ à¤‰à¤¨à¥à¤¹à¥‡à¤‚ à¤à¤¡à¤¿à¤Ÿ à¤•à¤° à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚à¥¤ à¤¬à¤¦à¤²à¤¾à¤µ à¤…à¤ªà¤¨à¥‡ à¤†à¤ª à¤¸à¥‡à¤µ à¤¹à¥‹ à¤œà¤¾à¤¤à¥‡ à¤¹à¥ˆà¤‚à¥¤"]})]})]}),e.jsx("div",{className:"space-y-3",children:(gt=(ht=p.find(s=>s.id===g.studentId))==null?void 0:ht.remarks)==null?void 0:gt.map((s,t)=>{var a,r,n;return e.jsxs("div",{className:`p-4 rounded-lg border ${s.type==="good"?"bg-green-500/10 border-green-500/30":"bg-red-500/10 border-red-500/30"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[s.type==="good"?e.jsx(vs,{className:"h-4 w-4 text-green-400 fill-green-400"}):e.jsx(Gs,{className:"h-4 w-4 text-red-400"}),e.jsx("span",{className:`font-medium text-sm ${s.type==="good"?"text-green-400":"text-red-400"}`,children:s.type==="good"?"Good Remark":"Area to Improve"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(s.date).toLocaleDateString()}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>Zt(s,t,g.studentId),className:"h-6 px-2 text-xs",children:"âœï¸ Edit"}),e.jsx(l,{variant:"destructive",size:"sm",onClick:()=>Xt(t,g.studentId),className:"h-6 px-2 text-xs",children:"ðŸ—‘ï¸ Delete"})]})]}),e.jsx("p",{className:`text-sm mb-2 ${s.type==="good"?"text-green-100":"text-red-100"}`,children:s.message}),(s.images&&s.images.length>0||s.image)&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"grid grid-cols-3 gap-2",children:(s.images||(s.image?[s.image]:[])).map((i,m)=>e.jsx("div",{className:"relative group",children:e.jsx("img",{src:i,alt:`Remark attachment ${m+1}`,className:"w-full h-24 object-cover rounded-lg border border-border cursor-pointer",onClick:()=>{He({src:i,title:`Remark Image ${m+1} - ${s.subject||"General"}`}),Je(!0)}})},m))}),(((a=s.images)==null?void 0:a.length)>0||s.image)&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[((r=s.images)==null?void 0:r.length)||1," image",(((n=s.images)==null?void 0:n.length)||1)>1?"s":""," attached"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Subject: ",s.subject||"General"]})]},t)})})]})]})}),I==="studentreport"&&e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-4 sm:mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-4 sm:p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[e.jsx("h2",{className:"text-base sm:text-xl font-heading font-bold text-foreground",children:"Student Report"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Generate and view detailed student performance reports"})]}),e.jsx(l,{variant:"outline",onClick:()=>A("dashboard"),className:"text-muted-foreground hover:text-foreground h-8 w-8 sm:h-9 sm:w-9 p-0 flex-shrink-0",children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4 mb-4 sm:mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-2",children:"Class"}),e.jsx("select",{value:y,onChange:s=>q(s.target.value),className:"w-full p-2 sm:p-3 border border-border rounded-lg bg-background text-sm",children:ee.map(s=>e.jsxs("option",{value:s,children:["Class ",s]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Section"}),e.jsx("select",{value:x,onChange:s=>re(s.target.value),className:"w-full p-3 border border-border rounded-lg bg-background",children:oe.map(s=>e.jsxs("option",{value:s,children:["Section ",s]},s))})]})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[e.jsxs("h3",{className:"text-sm sm:text-lg font-semibold text-foreground",children:["Class ",y,"-",x," Student Reports"]}),e.jsxs(l,{variant:"outline",className:"flex items-center space-x-2 h-8 sm:h-9 text-xs sm:text-sm w-full sm:w-auto",onClick:()=>{const s=W();if(s.length===0){alert("No students found in this class");return}alert(`Generating reports for ${s.length} students...`)},children:[e.jsx(ka,{className:"h-4 w-4"}),e.jsx("span",{children:"Export All Reports"})]})]}),W().length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:W().map(s=>{const t=s.attendance.length>0?Math.round(s.attendance.filter(n=>n.status==="present").length/s.attendance.length*100):0,a=s.remarks.filter(n=>n.type==="good").length,r=s.remarks.filter(n=>n.type==="bad").length;return e.jsxs(j.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-muted/20 rounded-lg p-4 border border-border/30 hover:shadow-lg transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-royal to-gold flex items-center justify-center text-white font-bold",children:s.name.split(" ").map(n=>n[0]).join("")}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Roll: ",s.rollNumber]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Attendance"}),e.jsxs("span",{className:`text-sm font-medium ${t>=90?"text-green-500":t>=75?"text-yellow-500":"text-red-500"}`,children:[t,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Good Remarks"}),e.jsx("span",{className:"text-sm font-medium text-green-500",children:a})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Areas to Improve"}),e.jsx("span",{className:"text-sm font-medium text-red-500",children:r})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Overall Grade"}),e.jsx("span",{className:`text-sm font-bold px-2 py-1 rounded ${t>=90&&a>=r?"bg-green-100 text-green-800":t>=75?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:t>=90&&a>=r?"A":t>=75?"B":"C"})]})]}),s.remarks.length>0&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-border/30",children:[e.jsx("h5",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Recent Remarks"}),e.jsx("div",{className:"space-y-1",children:s.remarks.slice(-2).map((n,i)=>e.jsxs("div",{className:"text-xs p-2 rounded bg-muted/30",children:[e.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[n.type==="good"?e.jsx(vs,{className:"h-3 w-3 text-green-500"}):e.jsx(Gs,{className:"h-3 w-3 text-red-500"}),e.jsx("span",{className:"font-medium",children:n.subject})]}),e.jsx("p",{className:"text-muted-foreground",children:n.message})]},i))})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(l,{size:"sm",variant:"outline",className:"flex-1 text-xs",onClick:()=>{_e(s),Z(!0)},children:[e.jsx(Nt,{className:"h-3 w-3 mr-1"}),"Send Report"]}),e.jsxs(l,{size:"sm",variant:"outline",className:"flex-1 text-xs",onClick:()=>{je.filter(i=>i.studentId===s.id).length===0?alert("No reports sent to this student yet"):(Is(s),Cs(!0))},children:[e.jsx(yt,{className:"h-3 w-3 mr-1"}),"View Sent"]})]}),e.jsxs(l,{size:"sm",variant:"destructive",className:"w-full text-xs",onClick:()=>{je.filter(i=>i.studentId===s.id).length===0?alert("No reports sent to this student yet"):(Is(s),Cs(!0))},children:[e.jsx(Te,{className:"h-3 w-3 mr-1"}),"Delete Report"]})]})]},s.id)})}):e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(Bs,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsxs("p",{children:["No students found in Class ",y,"-",x]}),e.jsx("p",{className:"text-sm",children:"Add students to generate reports"})]})]})]})}),I==="fees"&&e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsx("h2",{className:"text-lg sm:text-2xl font-heading font-bold text-foreground",children:"Fee Management"}),e.jsxs(l,{onClick:()=>Me(!0),className:"bg-gradient-to-r from-gold to-yellow-500 text-black h-9 sm:h-10 w-full sm:w-auto",children:[e.jsx(qs,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Create Payment Request"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[e.jsx("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-4 sm:p-6 border border-border/50",children:e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-green-500/20 flex items-center justify-center flex-shrink-0",children:e.jsx(vt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:De.filter(s=>s.status==="paid").length}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Paid Fees"})]})]})}),e.jsx("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-4 sm:p-6 border border-border/50",children:e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-yellow-500/20 flex items-center justify-center flex-shrink-0",children:e.jsx(Ca,{className:"h-6 w-6 text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:De.filter(s=>s.status==="pending").length}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Pending Fees"})]})]})}),e.jsx("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-4 sm:p-6 border border-border/50",children:e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-blue-500/20 flex items-center justify-center flex-shrink-0",children:e.jsx(ze,{className:"h-6 w-6 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:ss.length}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Payment Requests"})]})]})})]}),e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-6 border border-border/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Students Fee Status"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-4 mb-6 gap-3",children:[e.jsxs("div",{className:"w-full sm:w-auto",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Class"}),e.jsx("select",{value:y,onChange:s=>q(s.target.value),className:"w-full px-2 py-1.5 sm:px-3 sm:py-2 border border-border rounded-lg bg-background text-foreground text-sm",children:ee.map(s=>e.jsxs("option",{value:s,children:["Class ",s]},s))})]}),e.jsxs("div",{className:"w-full sm:w-auto",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Section"}),e.jsx("select",{value:x,onChange:s=>re(s.target.value),className:"w-full px-2 py-1.5 sm:px-3 sm:py-2 border border-border rounded-lg bg-background text-foreground text-sm",children:oe.map(s=>e.jsxs("option",{value:s,children:["Section ",s]},s))})]}),e.jsxs("div",{className:"w-full sm:w-auto",children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Roll (Optional)"}),e.jsx("input",{type:"text",value:J,onChange:s=>Se(s.target.value.trim()),placeholder:"Enter roll number",className:"w-full px-2 py-1.5 sm:px-3 sm:py-2 border border-border rounded-lg bg-background text-foreground text-sm"})]})]}),e.jsx("div",{className:"flex justify-end mb-6",children:e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>Se(""),children:"Clear Roll Filter"})}),e.jsxs("div",{className:"space-y-4",children:[ot().map(s=>{const t=ta(s.id);return e.jsxs("div",{className:"border border-border/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:s.image||"/placeholder-student.jpg",alt:s.name,className:"w-16 h-16 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground text-sm sm:text-base",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Roll: ",s.rollNumber," â€¢ Class ",s.class,"-",s.section]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-foreground",children:["Pending: â‚¹",t.totalPending]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.pendingMonths.length," months due"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 sm:space-x-2",children:[e.jsxs(l,{variant:"outline",size:"sm",className:"h-7 sm:h-8 px-2 sm:px-3 text-xs sm:text-sm",onClick:()=>{X(s),Js(!0)},children:[e.jsx(yt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),e.jsx("span",{className:"hidden xs:inline",children:"View"})]}),e.jsxs(l,{variant:"outline",size:"sm",className:"h-7 sm:h-8 px-2 sm:px-3 text-xs sm:text-sm",onClick:()=>{X(s),Me(!0)},children:[e.jsx(Ge,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),e.jsx("span",{className:"hidden xs:inline",children:"Request"})]}),t.pendingMonths.length>0&&e.jsxs(l,{size:"sm",onClick:()=>la(s.id),className:"bg-gradient-to-r from-gold to-yellow-500 text-black h-7 sm:h-8 px-2 sm:px-3 text-xs sm:text-sm",children:[e.jsx(vt,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),e.jsx("span",{className:"hidden xs:inline",children:"Pay"})]})]})]})]}),(t.pendingMonths.length>0||t.paidMonths.length>0)&&e.jsx("div",{className:"mt-4 pt-4 border-t border-border/30",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.pendingMonths.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-red-400 mb-2",children:["Pending Months (",t.pendingMonths.length,"):"]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.pendingMonths.map(a=>e.jsx("span",{className:"px-2 py-1 bg-red-500/20 text-red-400 rounded text-xs",children:a},a))})]}),t.paidMonths.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-green-400 mb-2",children:["Paid Months (",t.paidMonths.length,"):"]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.paidMonths.map(a=>e.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 rounded text-xs",children:a},a))})]})]})})]},s.id)}),ot().length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ze,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:J?`No students found with Roll ${J} in Class ${y}-${x}`:`No students found in Class ${y}-${x}`})]})]})]})]}),I==="profile"&&e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-8",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl p-6 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-heading font-bold text-foreground",children:"Profile Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your profile information and photo"})]}),e.jsx(l,{variant:"outline",onClick:()=>A("dashboard"),className:"text-muted-foreground hover:text-foreground",children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Profile Photo"}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"relative",children:O.photo?e.jsx("img",{src:O.photo,alt:"Profile",className:"h-32 w-32 rounded-full object-cover border-4 border-gold"}):e.jsx("div",{className:"h-32 w-32 rounded-full bg-gradient-to-r from-gold to-yellow-500 flex items-center justify-center",children:e.jsx(Ls,{className:"h-16 w-16 text-black"})})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(l,{variant:"outline",onClick:()=>{const s=document.createElement("input");s.type="file",s.accept="image/*",s.onchange=async t=>{var r;const a=(r=t.target.files)==null?void 0:r[0];if(a){const n=await js(a);rt(n),hs(!0)}},s.click()},children:[e.jsx(Vs,{className:"h-4 w-4 mr-2"}),"Upload Photo"]}),O.photo&&e.jsxs(l,{variant:"outline",onClick:()=>{rt(O.photo),hs(!0)},children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Edit"]}),O.photo&&e.jsxs(l,{variant:"destructive",onClick:()=>Ce({...O,photo:""}),children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Remove"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Profile Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Full Name"}),e.jsx(T,{value:O.name,onChange:s=>Ce({...O,name:s.target.value}),placeholder:"Enter your full name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone Number"}),e.jsx(T,{value:O.phone,onChange:s=>Ce({...O,phone:s.target.value}),placeholder:"Enter your phone number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Qualification"}),e.jsx(T,{value:O.qualification,onChange:s=>Ce({...O,qualification:s.target.value}),placeholder:"e.g., M.Ed, B.Sc, Ph.D"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Bio"}),e.jsx("textarea",{value:O.bio,onChange:s=>Ce({...O,bio:s.target.value}),placeholder:"Tell us about yourself...",rows:4,className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground resize-none"})]}),e.jsxs(l,{onClick:()=>{localStorage.setItem(`teacher-profile-${C}`,JSON.stringify(O)),alert("Profile updated successfully!")},className:"w-full bg-gradient-to-r from-gold to-yellow-500 text-black",children:[e.jsx(Ls,{className:"h-4 w-4 mr-2"}),"Save Profile"]})]})]})]})}),ne&&fe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(j.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-card rounded-xl p-6 w-full max-w-md border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground",children:["Send Report to ",fe.name]}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{Z(!1),_e(null),_({reportImage:"",notes:"",subject:""})},children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Subject"}),e.jsx(T,{value:v.subject,onChange:s=>_({...v,subject:s.target.value}),placeholder:`e.g., ${le} or Behavior`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Report Image"}),e.jsx("div",{className:"border-2 border-dashed border-border rounded-lg p-4",children:v.reportImage?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:v.reportImage,alt:"Report preview",className:"w-full h-32 object-cover rounded"}),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>_({...v,reportImage:""}),className:"w-full",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Remove Image"]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx(Ia,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Upload report image (test paper, assignment, etc.)"}),e.jsxs(l,{variant:"outline",onClick:()=>{var s;return(s=es.current)==null?void 0:s.click()},children:[e.jsx(Vs,{className:"h-4 w-4 mr-2"}),"Choose Image"]}),e.jsx("input",{ref:es,type:"file",accept:"image/*",onChange:it,className:"hidden"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes for Student"}),e.jsx("textarea",{value:v.notes,onChange:s=>_({...v,notes:s.target.value}),placeholder:"Add notes about the report, feedback, or instructions...",rows:3,className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground resize-none"})]}),e.jsxs("div",{className:"flex space-x-2 pt-2",children:[e.jsx(l,{variant:"outline",onClick:()=>{Z(!1),_e(null),_({reportImage:"",notes:"",subject:""})},className:"flex-1",children:"Cancel"}),e.jsxs(l,{onClick:Wt,className:"flex-1 bg-gradient-to-r from-gold to-yellow-500 text-black",disabled:!v.reportImage||!v.notes,children:[e.jsx(ft,{className:"h-4 w-4 mr-2"}),"Send Report"]})]})]})]})}),kt&&$e&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(j.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-card rounded-xl p-6 w-full max-w-4xl max-h-[85vh] overflow-y-auto border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-heading font-bold text-foreground",children:["Reports Sent to ",$e.name,e.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:["(",je.filter(s=>s.studentId===$e.id).length," reports)"]})]}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{Cs(!1),Is(null)},children:e.jsx(k,{className:"h-4 w-4"})})]}),je.filter(s=>s.studentId===$e.id).length>0?e.jsx("div",{className:"space-y-4",children:je.filter(s=>s.studentId===$e.id).sort((s,t)=>new Date(t.createdAt).getTime()-new Date(s.createdAt).getTime()).map(s=>e.jsxs("div",{className:"bg-muted/20 rounded-lg p-4 border border-border/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground",children:s.subject}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[new Date(s.createdAt).toLocaleDateString()," â€¢ Sent by ",s.teacherName]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>ea(s),className:"text-gold hover:text-gold/80",children:e.jsx(Ie,{className:"h-4 w-4"})}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>Kt(s.id),className:"text-red-400 hover:text-red-300",children:e.jsx(Te,{className:"h-4 w-4"})})]})]}),s.reportImage&&e.jsx("div",{className:"mb-3",children:e.jsx("img",{src:s.reportImage,alt:"Report",className:"w-full max-w-md rounded-lg border border-border/30 cursor-pointer hover:scale-105 transition-transform",onClick:()=>{He({src:s.reportImage,title:`${s.subject} Report`}),Je(!0)}})}),s.notes&&e.jsx("div",{className:"bg-muted/30 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:s.notes})})]},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Bs,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground opacity-50"}),e.jsx("p",{className:"text-muted-foreground",children:"No reports sent to this student yet."})]})]})}),Ht&&bs&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(j.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-card rounded-xl p-6 w-full max-w-2xl max-h-[85vh] overflow-y-auto border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-heading font-bold text-foreground",children:"Edit Report"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{ps(!1),fs(null),_({reportImage:"",notes:"",subject:""})},children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Subject"}),e.jsx(T,{value:v.subject,onChange:s=>_({...v,subject:s.target.value}),placeholder:"Report subject"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Report Image"}),e.jsxs("div",{className:"space-y-3",children:[v.reportImage&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:v.reportImage,alt:"Report",className:"w-full max-w-md rounded-lg border border-border/30"}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>_({...v,reportImage:""}),className:"absolute top-2 right-2 bg-red-500/80 text-white hover:bg-red-600",children:e.jsx(Te,{className:"h-4 w-4"})})]}),e.jsx("input",{ref:es,type:"file",accept:"image/*",onChange:it,className:"hidden"}),e.jsxs(l,{type:"button",variant:"outline",onClick:()=>{var s;return(s=es.current)==null?void 0:s.click()},children:[e.jsx(Nt,{className:"h-4 w-4 mr-2"}),v.reportImage?"Change Image":"Upload Image"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Notes"}),e.jsx(wt,{value:v.notes,onChange:s=>_({...v,notes:s.target.value}),placeholder:"Add notes about the report...",rows:4})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 mt-6 pt-6 border-t",children:[e.jsx(l,{variant:"outline",onClick:()=>{ps(!1),fs(null),_({reportImage:"",notes:"",subject:""})},children:"Cancel"}),e.jsxs(l,{onClick:Qt,className:"bg-gradient-to-r from-royal to-gold text-white",children:[e.jsx(Ra,{className:"h-4 w-4 mr-2"}),"Update Report"]})]})]})}),Es&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(j.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-card rounded-xl p-6 w-full max-w-md border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground",children:["Create Payment Request",w&&` for ${w.name}`]}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{Me(!1),X(null),Ee({amount:"",months:[],notes:""})},children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[!w&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Class"}),e.jsx("select",{value:Os,onChange:s=>{Ps(s.target.value),X(null)},className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground",children:ee.map(s=>e.jsxs("option",{value:s,children:["Class ",s]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Section"}),e.jsx("select",{value:Ts,onChange:s=>{zs(s.target.value),X(null)},className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground",children:oe.map(s=>e.jsxs("option",{value:s,children:["Section ",s]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Roll (Optional)"}),e.jsx("input",{type:"text",value:$s,onChange:s=>{const t=s.target.value.trim();if(Fs(t),X(null),t){const a=dt().find(r=>r.rollNumber.toString()===t);a&&X(a)}},placeholder:"Enter roll number",className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground"})]})]}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{Ps(ee[0]||""),zs(oe[0]||""),Fs(""),X(null)},children:"Clear Filters"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Student"}),e.jsxs("select",{onChange:s=>{const t=p.find(a=>a.id===s.target.value);X(t||null)},className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground",children:[e.jsx("option",{value:"",children:"Choose a student..."}),dt().map(s=>e.jsxs("option",{value:s.id,children:[s.name," - Class ",s.class,"-",s.section," (Roll: ",s.rollNumber,")"]},s.id))]})]})]}),w&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Total Amount (â‚¹)"}),e.jsx(T,{type:"number",value:S.amount,onChange:s=>Ee({...S,amount:s.target.value}),placeholder:"Enter total amount",min:"0"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Select Months (",S.months.length," selected)"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-32 overflow-y-auto",children:zt.map(s=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:S.months.includes(s),onChange:()=>aa(s),className:"rounded"}),e.jsx("span",{className:"text-sm",children:s.slice(0,3)})]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:S.notes,onChange:s=>Ee({...S,notes:s.target.value}),placeholder:"Add any additional notes for the student...",rows:3,className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground resize-none"})]}),S.amount&&S.months.length>0&&e.jsxs("div",{className:"bg-muted/20 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm font-medium text-foreground mb-1",children:"Payment Summary:"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total: â‚¹",S.amount," for ",S.months.length," month(s)"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Per month: â‚¹",(parseFloat(S.amount)/S.months.length).toFixed(2)]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Months: ",S.months.join(", ")]})]})]}),e.jsxs("div",{className:"flex space-x-2 pt-2",children:[e.jsx(l,{variant:"outline",onClick:()=>{Me(!1),X(null),Ee({amount:"",months:[],notes:""})},className:"flex-1",children:"Cancel"}),e.jsxs(l,{onClick:sa,className:"flex-1 bg-gradient-to-r from-gold to-yellow-500 text-black",disabled:!w||!S.amount||S.months.length===0,children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Create Request"]})]})]})]})}),At&&w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(j.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-card rounded-xl p-6 w-full max-w-2xl border border-border/50 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground",children:["Fee Status - ",w.name]}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{Js(!1),X(null)},children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-muted/20 rounded-lg",children:[e.jsx("img",{src:w.image||"/placeholder-student.jpg",alt:w.name,className:"w-16 h-16 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground",children:w.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Roll: ",w.rollNumber," â€¢ Class ",w.class,"-",w.section]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Email: ",w.email]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-foreground mb-4",children:["Fee Records (",lt,")"]}),e.jsxs("div",{className:"space-y-3",children:[De.filter(s=>s.studentId===w.id).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-border/30 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-foreground",children:[s.month," ",s.year]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["â‚¹",s.amount]}),s.notes&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s.notes})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${s.status==="paid"?"bg-green-500/20 text-green-400":s.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:s.status.toUpperCase()}),s.paymentDate&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Paid: ",new Date(s.paymentDate).toLocaleDateString()]})]})]},s.id)),De.filter(s=>s.studentId===w.id).length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(jt,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No fee records found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a payment request to add fee records"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground mb-4",children:"Payment Requests"}),e.jsxs("div",{className:"space-y-3",children:[ss.filter(s=>s.studentId===w.id).map(s=>e.jsxs("div",{className:"p-3 border border-border/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("p",{className:"font-medium text-foreground",children:["â‚¹",s.amount]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${s.status==="paid"?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:s.status.toUpperCase()})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:["Months: ",s.months.join(", ")]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created: ",new Date(s.createdAt).toLocaleDateString()]}),s.notes&&e.jsx("p",{className:"text-xs text-muted-foreground mt-2 p-2 bg-muted/20 rounded",children:s.notes})]},s.id)),ss.filter(s=>s.studentId===w.id).length===0&&e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-muted-foreground text-sm",children:"No payment requests found"})})]})]}),e.jsx("div",{className:"flex space-x-2 pt-4 border-t border-border/30",children:e.jsxs(l,{variant:"outline",onClick:()=>{Js(!1),Me(!0)},className:"flex-1",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Create Payment Request"]})})]})]})}),Mt&&Le&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-3 sm:p-4",children:e.jsxs(j.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-card rounded-xl p-4 sm:p-6 w-full max-w-md border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-foreground",children:"Edit Notification"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{rs(!1),ls(null),Oe({subject:"",message:""})},children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Subject"}),e.jsx(T,{value:ie.subject,onChange:s=>Oe({...ie,subject:s.target.value}),placeholder:"Enter notification subject"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Message"}),e.jsx("textarea",{value:ie.message,onChange:s=>Oe({...ie,message:s.target.value}),placeholder:"Enter your message to the principal...",rows:4,className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground resize-none"})]}),e.jsxs("div",{className:"flex space-x-2 pt-2",children:[e.jsx(l,{variant:"outline",onClick:()=>{rs(!1),ls(null),Oe({subject:"",message:""})},className:"flex-1",children:"Cancel"}),e.jsxs(l,{onClick:na,className:"flex-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white",disabled:!ie.subject||!ie.message,children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Update Notification"]})]})]})]})}),Et&&te&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(j.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-card rounded-xl p-6 w-full max-w-2xl border border-border/50 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Reply to Notification"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{ns(!1),os(null),is("")},children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-muted/20 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-2",children:te.subject}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:te.message}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Sent: ",new Date(te.createdAt).toLocaleDateString()]})]}),te.replies&&te.replies.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Previous Replies:"}),e.jsx("div",{className:"space-y-2",children:te.replies.map(s=>e.jsxs("div",{className:"bg-muted/10 rounded-lg p-3 border-l-4 border-blue-500",children:[e.jsxs("p",{className:"text-sm text-blue-400 mb-1",children:[s.fromName," (",s.fromType,")"]}),e.jsx("p",{className:"text-sm text-foreground mb-1",children:s.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString()})]},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Your Reply"}),e.jsx("textarea",{value:ds,onChange:s=>is(s.target.value),placeholder:"Enter your reply message...",rows:4,className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground resize-none"})]}),e.jsxs("div",{className:"flex space-x-2 pt-2",children:[e.jsx(l,{variant:"outline",onClick:()=>{ns(!1),os(null),is("")},className:"flex-1",children:"Cancel"}),e.jsxs(l,{onClick:oa,className:"flex-1 bg-gradient-to-r from-green-500 to-green-600 text-white",disabled:!ds,children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"Send Reply"]})]})]})]})}),Pt&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:e.jsxs(j.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-card rounded-xl p-3 sm:p-6 w-full max-w-[calc(100vw-1rem)] sm:max-w-4xl max-h-[85vh] overflow-y-auto border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4 gap-2",children:[e.jsxs("h3",{className:"text-sm sm:text-lg font-semibold text-foreground leading-tight",children:["Manage Sent Student Notifications (",Pe.length,")"]}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>at(!1),className:"h-7 w-7 sm:h-8 sm:w-8 p-0 flex-shrink-0",children:e.jsx(k,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:Pe.length===0?e.jsxs("div",{className:"text-center py-6 sm:py-8",children:[e.jsx(we,{className:"h-10 w-10 sm:h-12 sm:w-12 mx-auto text-muted-foreground mb-3 sm:mb-4"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"No student notifications sent yet"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:'Click "Notify Students" to send your first notification'})]}):Pe.sort((s,t)=>new Date(t.createdAt).getTime()-new Date(s.createdAt).getTime()).map(s=>e.jsx("div",{className:"bg-muted/20 rounded-lg p-3 sm:p-4 border border-border/30",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between mb-2 sm:mb-3 gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-1 text-sm sm:text-base break-words",children:s.subject}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-2 break-words line-clamp-2",children:s.message}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-1 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"whitespace-nowrap",children:["Sent: ",new Date(s.createdAt).toLocaleDateString()]}),e.jsx("span",{className:"hidden sm:inline",children:"â€¢"}),e.jsxs("span",{className:"px-2 py-0.5 sm:py-1 bg-purple-500/20 text-purple-400 rounded text-[10px] sm:text-xs whitespace-nowrap",children:["Target: ",s.targetType==="all"?"All Students":s.targetType==="class"?`Class ${s.targetClass}`:s.targetType==="section"?`Class ${s.targetClass}-${s.targetSection}`:"Individual Student"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 sm:ml-4 flex-shrink-0",children:[e.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>ia(s),className:"h-7 px-2 sm:h-8 sm:px-3 text-blue-600 hover:text-blue-700",children:[e.jsx(Ie,{className:"h-3 w-3 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),e.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>ma(s.id),className:"h-7 px-2 sm:h-8 sm:px-3 text-red-600 hover:text-red-700",children:[e.jsx(Te,{className:"h-3 w-3 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})},s.id))})]})}),Tt&&ae&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-3 sm:p-4",children:e.jsxs(j.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-card rounded-xl p-4 sm:p-6 w-full max-w-lg border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-foreground",children:"Edit Student Notification"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{us(!1),xs(null),P({subject:"",message:"",targetType:"all",targetClass:"",targetSection:"",targetStudentId:"",photo1:"",photo2:""})},children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Subject"}),e.jsx(T,{value:d.subject,onChange:s=>P({...d,subject:s.target.value}),placeholder:"Enter notification subject",className:"h-8 sm:h-9 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Message"}),e.jsx("textarea",{value:d.message,onChange:s=>P({...d,message:s.target.value}),placeholder:"Enter your message to students...",rows:4,className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground resize-none"})]}),e.jsxs("div",{className:"bg-muted/20 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm font-medium text-foreground mb-1",children:"Current Target:"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[ae.targetType==="all"&&"All Students",ae.targetType==="class"&&`Class ${ae.targetClass}`,ae.targetType==="section"&&`Class ${ae.targetClass}-${ae.targetSection}`,ae.targetType==="student"&&"Individual Student"]})]}),e.jsxs("div",{className:"flex space-x-2 pt-2",children:[e.jsx(l,{variant:"outline",onClick:()=>{us(!1),xs(null),P({subject:"",message:"",targetType:"all",targetClass:"",targetSection:"",targetStudentId:"",photo1:"",photo2:""})},className:"flex-1",children:"Cancel"}),e.jsxs(l,{onClick:ca,className:"flex-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white",disabled:!d.subject||!d.message,children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Update Notification"]})]})]})]})}),Ot&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:e.jsxs(j.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-card rounded-xl p-6 w-full max-w-lg border border-border/50 max-h-[85vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 -mx-6 -mt-6 px-4 sm:px-6 pt-4 sm:pt-6 pb-3 bg-card/95 backdrop-blur z-10 border-b border-border/50 flex items-center justify-between",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-foreground",children:"Send Notification to Students"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{cs(!1),P({subject:"",message:"",targetType:"all",targetClass:"",targetSection:"",targetStudentId:"",photo1:"",photo2:""})},children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Send To"}),e.jsxs("select",{value:d.targetType,onChange:s=>P({...d,targetType:s.target.value,targetClass:"",targetSection:"",targetStudentId:""}),className:"w-full h-8 sm:h-9 px-2 py-1 sm:py-1.5 text-xs sm:text-sm border border-border rounded-lg bg-background text-foreground",children:[e.jsx("option",{value:"all",children:"All Students"}),e.jsx("option",{value:"class",children:"Specific Class"}),e.jsx("option",{value:"section",children:"Specific Section"}),e.jsx("option",{value:"student",children:"Individual Student"})]})]}),(d.targetType==="class"||d.targetType==="section"||d.targetType==="student")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Select Class"}),e.jsxs("select",{value:d.targetClass,onChange:s=>P({...d,targetClass:s.target.value,targetSection:"",targetStudentId:""}),className:"w-full h-8 sm:h-9 px-2 py-1 sm:py-1.5 text-xs sm:text-sm border border-border rounded-lg bg-background text-foreground",children:[e.jsx("option",{value:"",children:"Choose a class..."}),Array.from(new Set(p.map(s=>s.class))).map(s=>e.jsxs("option",{value:s,children:["Class ",s]},s))]})]}),(d.targetType==="section"||d.targetType==="student")&&d.targetClass&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Select Section"}),e.jsxs("select",{value:d.targetSection,onChange:s=>P({...d,targetSection:s.target.value,targetStudentId:""}),className:"w-full h-9 sm:h-10 px-3 py-1.5 sm:py-2 text-sm border border-border rounded-lg bg-background text-foreground",children:[e.jsx("option",{value:"",children:"Choose a section..."}),Array.from(new Set(p.filter(s=>s.class===d.targetClass).map(s=>s.section))).map(s=>e.jsxs("option",{value:s,children:["Section ",s]},s))]})]}),d.targetType==="student"&&d.targetClass&&d.targetSection&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Select Student"}),e.jsxs("select",{value:d.targetStudentId,onChange:s=>P({...d,targetStudentId:s.target.value}),className:"w-full h-9 sm:h-10 px-3 py-1.5 sm:py-2 text-sm border border-border rounded-lg bg-background text-foreground",children:[e.jsx("option",{value:"",children:"Choose a student..."}),p.filter(s=>s.class===d.targetClass&&s.section===d.targetSection).map(s=>e.jsxs("option",{value:s.id,children:[s.name," - Roll: ",s.rollNumber]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Subject"}),e.jsx(T,{value:d.subject,onChange:s=>P({...d,subject:s.target.value}),placeholder:"Enter notification subject"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Message"}),e.jsx("textarea",{value:d.message,onChange:s=>P({...d,message:s.target.value}),placeholder:"Enter your message to students...",rows:3,className:"w-full px-3 py-2 text-sm border border-border rounded-lg bg-background text-foreground resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Photo Attachments (Optional)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-muted-foreground mb-1",children:"Photo 1"}),e.jsx("input",{type:"file",accept:"image/*",onChange:s=>{var a;const t=(a=s.target.files)==null?void 0:a[0];if(t){const r=new FileReader;r.onload=n=>{var m;const i=(m=n.target)==null?void 0:m.result;P({...d,photo1:i})},r.readAsDataURL(t)}},className:"w-full h-8 sm:h-9 px-2 py-1 text-xs sm:text-sm border border-border rounded-lg bg-background text-foreground file:mr-2 file:py-1 file:px-2 file:rounded-md file:border-0 file:text-xs sm:file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),d.photo1&&e.jsxs("div",{className:"mt-2 relative",children:[e.jsx("img",{src:d.photo1,alt:"Photo 1 preview",className:"w-20 h-20 object-cover rounded border"}),e.jsx("button",{type:"button",onClick:()=>P({...d,photo1:""}),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600",children:"Ã—"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-muted-foreground mb-1",children:"Photo 2"}),e.jsx("input",{type:"file",accept:"image/*",onChange:s=>{var a;const t=(a=s.target.files)==null?void 0:a[0];if(t){const r=new FileReader;r.onload=n=>{var m;const i=(m=n.target)==null?void 0:m.result;P({...d,photo2:i})},r.readAsDataURL(t)}},className:"w-full h-8 sm:h-9 px-2 py-1 text-xs sm:text-sm border border-border rounded-lg bg-background text-foreground file:mr-2 file:py-1 file:px-2 file:rounded-md file:border-0 file:text-xs sm:file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),d.photo2&&e.jsxs("div",{className:"mt-2 relative",children:[e.jsx("img",{src:d.photo2,alt:"Photo 2 preview",className:"w-20 h-20 object-cover rounded border"}),e.jsx("button",{type:"button",onClick:()=>P({...d,photo2:""}),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600",children:"Ã—"})]})]})]})]}),e.jsx("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(we,{className:"h-4 w-4 text-purple-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-foreground mb-1",children:"Notification Target"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.targetType==="all"&&"This notification will be sent to all students in the school.",d.targetType==="class"&&d.targetClass&&`This notification will be sent to all students in Class ${d.targetClass}.`,d.targetType==="section"&&d.targetClass&&d.targetSection&&`This notification will be sent to all students in Class ${d.targetClass}-${d.targetSection}.`,d.targetType==="student"&&d.targetStudentId&&"This notification will be sent to the selected student only."]})]})]})}),e.jsxs("div",{className:"flex space-x-2 pt-2 sticky bottom-0 bg-card/95 -mx-6 px-6 pb-2 pt-3 border-t border-border/50",children:[e.jsx(l,{variant:"outline",onClick:()=>{cs(!1),P({subject:"",message:"",targetType:"all",targetClass:"",targetSection:"",targetStudentId:"",photo1:"",photo2:""})},className:"flex-1",children:"Cancel"}),e.jsxs(l,{onClick:da,className:"flex-1 bg-gradient-to-r from-purple-500 to-purple-600 text-white",disabled:!d.subject||!d.message,children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Send Notification"]})]})]})]})}),Dt&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:e.jsxs(j.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-card rounded-xl p-6 w-full max-w-md border border-border/50 max-h-[85vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 -mx-6 -mt-6 px-4 sm:px-6 pt-4 sm:pt-6 pb-3 bg-card/95 backdrop-blur z-10 border-b border-border/50 flex items-center justify-between",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-foreground",children:"Send Notification to Principal"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{ts(!1),ue({subject:"",message:"",photo1:"",photo2:""})},children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Subject"}),e.jsx(T,{value:D.subject,onChange:s=>ue({...D,subject:s.target.value}),placeholder:"Enter notification subject",className:"h-8 sm:h-9 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Message"}),e.jsx("textarea",{value:D.message,onChange:s=>ue({...D,message:s.target.value}),placeholder:"Enter your message to the principal...",rows:3,className:"w-full px-3 py-2 text-sm border border-border rounded-lg bg-background text-foreground resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium mb-1 sm:mb-2",children:"Photo Attachments (Optional)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-muted-foreground mb-1",children:"Photo 1"}),e.jsx("input",{type:"file",accept:"image/*",onChange:s=>{var a;const t=(a=s.target.files)==null?void 0:a[0];if(t){const r=new FileReader;r.onload=n=>{var m;const i=(m=n.target)==null?void 0:m.result;ue({...D,photo1:i})},r.readAsDataURL(t)}},className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs sm:file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),D.photo1&&e.jsxs("div",{className:"mt-2 relative",children:[e.jsx("img",{src:D.photo1,alt:"Photo 1 preview",className:"w-20 h-20 object-cover rounded border"}),e.jsx("button",{type:"button",onClick:()=>ue({...D,photo1:""}),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600",children:"Ã—"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-muted-foreground mb-1",children:"Photo 2"}),e.jsx("input",{type:"file",accept:"image/*",onChange:s=>{var a;const t=(a=s.target.files)==null?void 0:a[0];if(t){const r=new FileReader;r.onload=n=>{var m;const i=(m=n.target)==null?void 0:m.result;ue({...D,photo2:i})},r.readAsDataURL(t)}},className:"w-full px-3 py-2 border border-border rounded-lg bg-background text-foreground file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs sm:file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),D.photo2&&e.jsxs("div",{className:"mt-2 relative",children:[e.jsx("img",{src:D.photo2,alt:"Photo 2 preview",className:"w-20 h-20 object-cover rounded border"}),e.jsx("button",{type:"button",onClick:()=>ue({...D,photo2:""}),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600",children:"Ã—"})]})]})]})]}),e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(we,{className:"h-4 w-4 text-blue-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs sm:text-sm",children:[e.jsx("p",{className:"font-medium text-foreground mb-1",children:"Notification Info"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Attachments are optional. They will be sent to the principal along with your subject and message."})]})]})}),e.jsxs("div",{className:"flex space-x-2 pt-2 sticky bottom-0 bg-card/95 -mx-6 px-6 pb-2 pt-3 border-t border-border/50",children:[e.jsx(l,{variant:"outline",onClick:()=>{ts(!1),ue({subject:"",message:"",photo1:"",photo2:""})},className:"flex-1 sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2",children:"Cancel"}),e.jsxs(l,{onClick:ra,className:"flex-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white",disabled:!D.subject||!D.message,children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Send Notification"]})]})]})]})}),Rt&&Ms&&e.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[60] p-4",children:e.jsxs(j.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"relative max-w-[90vw] max-h-[90vh]",children:[e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>{Je(!1),He(null)},className:"absolute top-2 right-2 z-10 bg-black/50 text-white hover:bg-black/70",children:e.jsx(k,{className:"h-4 w-4"})}),e.jsx("div",{className:"absolute top-2 left-2 z-10 bg-black/50 text-white px-3 py-1 rounded text-sm",children:Ms.title}),e.jsx("img",{src:Ms.src,alt:"Remark attachment",className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl"}),e.jsx("div",{className:"absolute inset-0 -z-10",onClick:()=>{Je(!1),He(null)}})]})}),$t&&e.jsx(Pa,{image:Ft,onSave:s=>{Ce({...O,photo:s}),hs(!1);const t=`teacher-profile-${C}`,a={...O,photo:s};localStorage.setItem(t,JSON.stringify(a)),z(t,a)},onCancel:()=>hs(!1)}),ks&&e.jsx(Oa,{teacherName:R,teacherEmail:C,teacherClass:y,teacherSection:x,onClose:()=>St(!1)})]})};export{hl as default};
