import{c as A,r as c,g as k,j as e,B as l,A as E,m as x,X as S,a as p}from"./index-vcAYm6vD.js";import{I as h}from"./input-CVoIJ2zH.js";import{A as T,a as P}from"./alert-BYJYiRk6.js";import{P as D}from"./plus-CSXBcpgr.js";import{S as I}from"./save-5ZuEQXRf.js";import{S as z}from"./square-pen-BVw1FIsV.js";import{T as M}from"./trash-2-04KiNg8K.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=A("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),L=[{id:"academic",name:"Academic",color:"#3b82f6",description:"Academic events and programs"},{id:"sports",name:"Sports",color:"#f97316",description:"Athletic and sports activities"},{id:"arts",name:"Arts",color:"#ec4899",description:"Arts and cultural events"},{id:"social",name:"Social",color:"#fbbf24",description:"Social gatherings and community events"},{id:"cultural",name:"Cultural",color:"#8b5cf6",description:"Cultural celebrations and events"},{id:"technology",name:"Technology",color:"#10b981",description:"Technology and innovation events"}],X=()=>{const[i,g]=c.useState([]),[j,n]=c.useState(!1),[s,d]=c.useState(null),[m,y]=c.useState(!1),[f,r]=c.useState("");c.useEffect(()=>{v()},[]);const v=async()=>{const a=await k("royal-academy-event-categories",L);g(a)},C=()=>{const a={id:Date.now().toString(),name:"",color:"#3b82f6",description:""};d(a),y(!0),n(!0)},N=a=>{d({...a}),y(!1),n(!0)},b=async()=>{if(!s||!s.name.trim()){alert("Please enter a category name");return}if(i.find(t=>t.id!==s.id&&t.name.toLowerCase()===s.name.trim().toLowerCase())){alert("A category with this name already exists. Please choose a different name.");return}const o=m?[...i,{...s,name:s.name.trim()}]:i.map(t=>t.id===s.id?{...s,name:s.name.trim()}:t);try{await p("royal-academy-event-categories",o)?(g(o),n(!1),d(null),r(m?"Category created successfully!":"Category updated successfully!"),setTimeout(()=>r(""),3e3)):(r("Failed to save category. Please try again."),setTimeout(()=>r(""),3e3))}catch(t){console.error("Error saving category:",t),r("Error saving category. Please check your connection and try again."),setTimeout(()=>r(""),3e3)}},w=async a=>{if(confirm("Are you sure you want to delete this category?")){const o=i.filter(t=>t.id!==a);try{await p("royal-academy-event-categories",o)?(g(o),r("Category deleted successfully!"),setTimeout(()=>r(""),3e3)):(r("Failed to delete category. Please try again."),setTimeout(()=>r(""),3e3))}catch(t){console.error("Error deleting category:",t),r("Error deleting category. Please check your connection and try again."),setTimeout(()=>r(""),3e3)}}},u=(a,o)=>{s&&d({...s,[a]:o})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-heading font-bold text-foreground",children:"Category Manager"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Manage event categories"})]}),e.jsxs(l,{onClick:C,className:"w-full sm:w-auto bg-gradient-to-r from-royal to-gold text-white",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"New Category"]})]}),f&&e.jsx(T,{children:e.jsx(P,{children:f})}),e.jsx(E,{children:j&&s&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(x.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-card rounded-lg sm:rounded-xl p-4 sm:p-6 w-full max-w-md max-h-[90vh] overflow-y-auto mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-heading font-bold",children:m?"Create New Category":"Edit Category"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>n(!1),className:"h-8 w-8 p-0",children:e.jsx(S,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Category Name"}),e.jsx(h,{value:s.name,onChange:a=>u("name",a.target.value),placeholder:"Enter category name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Color"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"color",value:s.color,onChange:a=>u("color",a.target.value),className:"h-10 w-20 rounded border cursor-pointer"}),e.jsx(h,{value:s.color,onChange:a=>u("color",a.target.value),placeholder:"#3b82f6",className:"flex-1"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Description"}),e.jsx(h,{value:s.description,onChange:a=>u("description",a.target.value),placeholder:"Brief description of this category"})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 mt-6 pt-6 border-t",children:[e.jsx(l,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsxs(l,{onClick:b,className:"bg-gradient-to-r from-royal to-gold text-white",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),m?"Create":"Update"," Category"]})]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.length===0?e.jsxs("div",{className:"col-span-full text-center py-12 text-muted-foreground",children:[e.jsx(F,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No categories created yet."}),e.jsx("p",{className:"text-sm",children:"Create your first category to get started."})]}):i.map(a=>e.jsxs(x.div,{layout:!0,className:"bg-card border border-border rounded-lg p-4 hover:shadow-md transition-all duration-200",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:a.color}}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:a.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.description})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>N(a),className:"flex-1",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>w(a.id),className:"text-red-600 hover:text-red-700",children:e.jsx(M,{className:"h-4 w-4"})})]})]},a.id))})]})};export{X as default};
