import{u as y,r as d,j as e,m as c,B as m,X as w}from"./index-vcAYm6vD.js";import{I as h}from"./input-CVoIJ2zH.js";import{T as S}from"./textarea-B1JbTjEM.js";import{A as k}from"./arrow-left-DhQ25n61.js";import{U as u}from"./user-BFMo7NJs.js";import{C as P}from"./camera-Bc_Ov7XJ.js";import{M as C}from"./mail-MYJrtdEn.js";import{G as A}from"./graduation-cap-P36faES5.js";import{B as I}from"./book-open-Cck4FFnk.js";import{S as R}from"./save-5ZuEQXRf.js";const G=()=>{const x=y(),[a,f]=d.useState(null),[g,p]=d.useState(!0),[s,r]=d.useState({name:"",photo:"",bio:"",phone:"",interests:""}),j=t=>new Promise((o,i)=>{const l=new FileReader;l.readAsDataURL(t),l.onload=()=>o(l.result),l.onerror=n=>i(n)});d.useEffect(()=>{console.log("StudentProfileSettings: Checking authentication...");const t=localStorage.getItem("studentAuth"),o=localStorage.getItem("studentData");if(console.log("Auth status:",{isAuth:!!t,hasStudent:!!o}),console.log("Student data:",o),!t||!o){console.log("Authentication failed, redirecting to login"),x("/student-login");return}console.log("Authentication successful, loading profile...");const i=JSON.parse(o);f(i);const l=localStorage.getItem(`student-profile-${i.email}`);r(l?JSON.parse(l):n=>({...n,name:i.fullName})),p(!1)},[x]);const b=()=>{a&&(localStorage.setItem(`student-profile-${a.email}`,JSON.stringify(s)),alert("Profile updated successfully!"))},N=()=>{const t=document.createElement("input");t.type="file",t.accept="image/*",t.onchange=async o=>{var l;const i=(l=o.target.files)==null?void 0:l[0];if(i){const n=await j(i);r({...s,photo:n})}},t.click()},v=()=>{r({...s,photo:""})};return g?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted/20 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-royal border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading profile..."})]})}):a?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted/20",children:[e.jsx(c.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-card/95 backdrop-blur-md border-b border-border/50 sticky top-0 z-50",children:e.jsx("div",{className:"container-wide py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(m,{variant:"outline",onClick:()=>x("/student-dashboard"),className:"flex items-center space-x-2",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:"Back to Dashboard"})]})}),e.jsx("h1",{className:"text-2xl font-heading font-bold text-gradient-gold",children:"Profile Settings"}),e.jsx("div",{className:"w-32"})," "]})})}),e.jsx("div",{className:"container-wide py-12",children:e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-card/95 backdrop-blur-md rounded-xl border border-border/50 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-royal to-gold p-8 text-white",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"relative",children:s.photo?e.jsx("img",{src:s.photo,alt:"Profile",className:"h-24 w-24 rounded-full object-cover border-4 border-white/20"}):e.jsx("div",{className:"h-24 w-24 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(u,{className:"h-12 w-12 text-white"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-heading font-bold",children:s.name||a.fullName}),e.jsxs("p",{className:"text-white/80 text-lg",children:["Class ",a.class,a.section]}),e.jsxs("p",{className:"text-white/60",children:["Roll No: ",a.rollNumber]}),e.jsx("p",{className:"text-white/60",children:a.email})]})]})}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(c.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-heading font-bold text-foreground mb-4",children:"Profile Photo"}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"relative",children:s.photo?e.jsx("img",{src:s.photo,alt:"Profile",className:"h-32 w-32 rounded-full object-cover border-4 border-gold"}):e.jsx("div",{className:"h-32 w-32 rounded-full bg-gradient-to-r from-royal to-gold flex items-center justify-center",children:e.jsx(u,{className:"h-16 w-16 text-white"})})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(m,{variant:"outline",onClick:N,className:"flex items-center space-x-2",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{children:"Upload Photo"})]}),s.photo&&e.jsxs(m,{variant:"destructive",onClick:v,className:"flex items-center space-x-2",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{children:"Remove"})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-royal/10 to-gold/10 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-4",children:"Student Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(C,{className:"h-4 w-4 text-gold"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:a.email})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(A,{className:"h-4 w-4 text-gold"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Class ",a.class,a.section]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(I,{className:"h-4 w-4 text-gold"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Roll No: ",a.rollNumber]})]})]})]})]}),e.jsxs(c.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-heading font-bold text-foreground",children:"Profile Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-foreground",children:"Full Name"}),e.jsx(h,{value:s.name,onChange:t=>r({...s,name:t.target.value}),placeholder:"Enter your full name",className:"bg-background/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-foreground",children:"Phone Number"}),e.jsx(h,{value:s.phone,onChange:t=>r({...s,phone:t.target.value}),placeholder:"Enter your phone number",className:"bg-background/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-foreground",children:"Interests & Hobbies"}),e.jsx(h,{value:s.interests,onChange:t=>r({...s,interests:t.target.value}),placeholder:"e.g., Sports, Music, Art, Science",className:"bg-background/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-foreground",children:"About Me"}),e.jsx(S,{value:s.bio,onChange:t=>r({...s,bio:t.target.value}),placeholder:"Tell us about yourself...",rows:4,className:"bg-background/50"})]})]})]})]}),e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"mt-8 flex justify-center",children:e.jsxs(m,{onClick:b,className:"bg-gradient-to-r from-royal to-gold text-white hover:from-royal/80 hover:to-gold/80 px-8 py-3 text-lg",children:[e.jsx(R,{className:"h-5 w-5 mr-2"}),"Save Profile"]})})]})]})})})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-royal border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading profile..."})]})})};export{G as default};
