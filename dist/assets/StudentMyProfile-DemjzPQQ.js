import{u as p,r as x,j as e,B as m,m as N,X as j}from"./index-vcAYm6vD.js";import{I as u}from"./input-CVoIJ2zH.js";import{T as v}from"./textarea-B1JbTjEM.js";import{A as y}from"./arrow-left-DhQ25n61.js";import{H as w}from"./house-ClAQJ8-A.js";import{I as S}from"./info-DY3hXfGU.js";import{B as k}from"./book-open-Cck4FFnk.js";import{G as C}from"./graduation-cap-P36faES5.js";import{I}from"./image-Bjk6VXQq.js";import{U as f}from"./user-BFMo7NJs.js";import{C as P}from"./camera-Bc_Ov7XJ.js";function H(){const o=p(),[n,h]=x.useState(null),[r,l]=x.useState({name:"",phone:"",interests:"",bio:"",photo:""});x.useEffect(()=>{const t=localStorage.getItem("studentAuth"),i=localStorage.getItem("studentEmail");if(!t||t!=="true"){o("/student-auth");return}const c=localStorage.getItem("currentStudent");if(c)try{const s=JSON.parse(c),a={id:s.studentId||s.id,fullName:s.username||s.name||s.fullName,email:s.email||i||"",rollNumber:s.rollNumber||"N/A",class:s.class||"N/A",section:s.section||"A",status:s.status||"active"};h(a);const d=localStorage.getItem(`student-profile-${a.email}`);l(d?JSON.parse(d):{name:a.fullName,phone:"",interests:"",bio:"",photo:""})}catch(s){console.error("Error loading student data:",s)}else if(i){const a=JSON.parse(localStorage.getItem("royal-academy-students")||"[]").find(d=>d.email===i);if(a){h(a);const d=localStorage.getItem(`student-profile-${a.email}`);l(d?JSON.parse(d):{name:a.fullName||a.name,phone:"",interests:"",bio:"",photo:""})}}},[o]);const g=t=>new Promise((i,c)=>{const s=new FileReader;s.readAsDataURL(t),s.onload=()=>i(s.result),s.onerror=a=>c(a)}),b=()=>{n&&(localStorage.setItem(`student-profile-${n.email}`,JSON.stringify(r)),alert("Profile updated successfully!"),o("/student-dashboard"))};return n?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-royal/10 via-background to-gold/10",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-card/95 backdrop-blur-md border-b border-border/50",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(m,{variant:"ghost",size:"sm",onClick:()=>o("/student-dashboard"),className:"flex items-center",children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),e.jsx("h1",{className:"text-xl font-heading font-bold text-foreground",children:"My Profile"})]}),e.jsxs("div",{className:"hidden lg:flex items-center space-x-6",children:[e.jsxs("button",{onClick:()=>o("/"),className:"text-muted-foreground hover:text-foreground transition-colors text-sm flex items-center",children:[e.jsx(w,{className:"h-4 w-4 mr-1"}),"Home"]}),e.jsxs("button",{onClick:()=>o("/about"),className:"text-muted-foreground hover:text-foreground transition-colors text-sm flex items-center",children:[e.jsx(S,{className:"h-4 w-4 mr-1"}),"About"]}),e.jsxs("button",{onClick:()=>o("/courses"),className:"text-muted-foreground hover:text-foreground transition-colors text-sm flex items-center",children:[e.jsx(k,{className:"h-4 w-4 mr-1"}),"Courses"]}),e.jsxs("button",{onClick:()=>o("/admissions"),className:"text-muted-foreground hover:text-foreground transition-colors text-sm flex items-center",children:[e.jsx(C,{className:"h-4 w-4 mr-1"}),"Admissions"]}),e.jsxs("button",{onClick:()=>o("/gallery"),className:"text-muted-foreground hover:text-foreground transition-colors text-sm flex items-center",children:[e.jsx(I,{className:"h-4 w-4 mr-1"}),"Gallery"]})]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:e.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-card/95 backdrop-blur-md rounded-xl p-6 md:p-8 border border-border/50",children:[e.jsx("div",{className:"flex flex-col md:flex-row items-center md:items-start space-y-4 md:space-y-0 md:space-x-6 mb-8 pb-6 border-b border-border",children:e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h2",{className:"text-2xl font-heading font-bold text-foreground mb-2",children:n.fullName}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Class ",n.class,n.section]}),e.jsx("span",{className:"hidden md:inline",children:"â€¢"}),e.jsxs("span",{children:["Roll: ",n.rollNumber]}),e.jsx("span",{className:"hidden md:inline",children:"â€¢"}),e.jsx("span",{children:n.email})]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Profile Photo"}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"relative",children:r.photo?e.jsx("img",{src:r.photo,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-gold"}):e.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-royal to-gold flex items-center justify-center",children:e.jsx(f,{className:"h-16 w-16 text-white"})})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(m,{variant:"outline",onClick:()=>{const t=document.createElement("input");t.type="file",t.accept="image/*",t.onchange=async i=>{var s;const c=(s=i.target.files)==null?void 0:s[0];if(c){const a=await g(c);l({...r,photo:a})}},t.click()},children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Upload Photo"]}),r.photo&&e.jsxs(m,{variant:"destructive",onClick:()=>l({...r,photo:""}),children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Remove"]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Profile Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-40 h-40 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center mb-3 shadow-lg",children:e.jsx(f,{className:"h-16 w-16 text-white"})}),e.jsx("label",{className:"block text-sm font-medium mb-2 text-center",children:"Full Name"}),e.jsx(u,{value:r.name,onChange:t=>l({...r,name:t.target.value}),placeholder:"Enter your full name",className:"text-center"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-40 h-40 rounded-full bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center mb-3 shadow-lg",children:e.jsx("span",{className:"text-6xl",children:"ðŸ“±"})}),e.jsx("label",{className:"block text-sm font-medium mb-2 text-center",children:"Phone Number"}),e.jsx(u,{value:r.phone,onChange:t=>l({...r,phone:t.target.value}),placeholder:"Enter your phone number",className:"text-center"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-40 h-40 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center mb-3 shadow-lg",children:e.jsx("span",{className:"text-6xl",children:"ðŸŽ¨"})}),e.jsx("label",{className:"block text-sm font-medium mb-2 text-center",children:"Interests"}),e.jsx(u,{value:r.interests,onChange:t=>l({...r,interests:t.target.value}),placeholder:"e.g., Sports, Music, Art",className:"text-center"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-40 h-40 rounded-full bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center mb-3 shadow-lg",children:e.jsx("span",{className:"text-6xl",children:"ðŸ“"})}),e.jsx("label",{className:"block text-sm font-medium mb-2 text-center",children:"Bio"}),e.jsx(v,{value:r.bio,onChange:t=>l({...r,bio:t.target.value}),placeholder:"Tell us about yourself...",rows:4,className:"text-center"})]})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-border",children:e.jsxs(m,{onClick:b,className:"w-full bg-gradient-to-r from-royal to-gold text-white",size:"lg",children:[e.jsx(f,{className:"h-5 w-5 mr-2"}),"Save Profile"]})})]})})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading..."})})})}export{H as default};
