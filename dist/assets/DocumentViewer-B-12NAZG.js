import{c as D,r as w,j as e,X as h}from"./index-vcAYm6vD.js";import{B as i}from"./button-variants-BtDv6DLU.js";import{Z as $,a as O,R as k}from"./zoom-out-Bm9_1osx.js";import{D as p}from"./download-DqcvXZsi.js";import{C as u}from"./copy-Bub14O3W.js";import{S as C}from"./share-2-6yjGy1yT.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=D("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=D("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),_=({documentUrl:s,documentName:a,onClose:d})=>{const[r,g]=w.useState(100),[x,P]=w.useState(0),[c,l]=w.useState(!1),R=()=>{g(t=>Math.min(t+25,300))},S=()=>{g(t=>Math.max(t-25,25))},b=()=>{P(t=>(t+90)%360)},f=()=>{const t=window.open("","_blank");t&&(t.document.write(`
        <html>
          <head>
            <title>Print ${a}</title>
            <style>
              body { margin: 0; display: flex; justify-content: center; align-items: center; }
              img { max-width: 100%; height: auto; }
              @media print {
                body { margin: 0; }
                img { max-width: 100%; page-break-inside: avoid; }
              }
            </style>
          </head>
          <body>
            <img src="${s}" onload="window.print(); window.close();" />
          </body>
        </html>
      `),t.document.close())},I=async()=>{if(navigator.share)try{if(s&&s.startsWith("data:")){const o=await(await fetch(s)).blob(),m=new File([o],`${a}.png`,{type:o.type});await navigator.share({title:a,text:`Sharing ${a}`,files:[m]})}else await navigator.share({title:a,text:`Sharing ${a}`,url:s||""})}catch(t){console.error("Error sharing:",t),v()}else v()},v=()=>{if(!s){alert("No document URL available");return}s.startsWith("data:")?alert("Document is stored locally. Use the download option to save it."):(navigator.clipboard.writeText(s),alert("Link copied to clipboard!"))},j=async()=>{try{if(!s){alert("No document URL available");return}if(s.startsWith("data:")){const o=await(await fetch(s)).blob();await navigator.clipboard.write([new ClipboardItem({[o.type]:o})]),alert("Image copied to clipboard!")}else await navigator.clipboard.writeText(s),alert("Image link copied to clipboard!")}catch(t){console.error("Copy failed:",t),alert("Could not copy image. Please try download instead.")}l(!1)},y=()=>{if(!s){alert("No document URL available");return}try{const t=document.createElement("a");if(s.startsWith("data:")){const m=s.substring(s.indexOf(":")+1,s.indexOf(";")).split("/")[1]||"png";fetch(s).then(n=>n.blob()).then(n=>{const N=window.URL.createObjectURL(n);t.href=N,t.download=`${a.replace(/[^a-z0-9]/gi,"_")}.${m}`,document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(N),alert("Image downloaded successfully!"),l(!1)}).catch(n=>{console.error("Download failed:",n),alert("Download failed. Please try again.")})}else t.href=s,t.download=`${a.replace(/[^a-z0-9]/gi,"_")}.jpg`,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t),alert("Image download started!"),l(!1)}catch(t){console.error("Download error:",t),alert("Download failed. Please try copying the image instead.")}};return e.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black flex flex-col",style:{zIndex:9999,position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"black"},onClick:t=>{d(),l(!1)},onWheel:t=>t.stopPropagation(),children:[e.jsx("div",{className:"bg-black border-b border-white/10 p-2 sm:p-4",onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"container-wide flex items-center justify-between gap-2",children:[e.jsx("h3",{className:"text-white font-semibold text-sm sm:text-lg truncate flex-1 min-w-0",children:a}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:S,disabled:r<=25,className:"text-white hover:bg-white/10 h-8 w-8 sm:h-10 sm:w-10 p-0",title:"Zoom Out",children:e.jsx($,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsxs("span",{className:"text-white text-xs sm:text-sm min-w-[40px] sm:min-w-[60px] text-center",children:[r,"%"]}),e.jsx(i,{variant:"ghost",size:"sm",onClick:R,disabled:r>=300,className:"text-white hover:bg-white/10 h-8 w-8 sm:h-10 sm:w-10 p-0",title:"Zoom In",children:e.jsx(O,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsxs("div",{className:"sm:hidden flex items-center gap-1",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:b,className:"text-white hover:bg-white/10 h-8 w-8 p-0",title:"Rotate",children:e.jsx(k,{className:"h-3 w-3"})}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>l(!c),className:"text-white hover:bg-white/10 h-8 w-8 p-0",title:"Download Options",children:e.jsx(L,{className:"h-3 w-3"})}),c&&e.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-black/90 border border-white/20 rounded-lg shadow-lg z-50 min-w-[120px]",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-white/20",children:[e.jsx("span",{className:"text-white text-xs font-medium",children:"Options"}),e.jsx("button",{onClick:()=>l(!1),className:"text-white hover:bg-white/10 rounded p-1",children:e.jsx(h,{className:"h-3 w-3"})})]}),e.jsxs("button",{onClick:()=>{y()},className:"flex items-center gap-2 w-full px-3 py-2 text-left text-white hover:bg-white/10 text-xs",children:[e.jsx(p,{className:"h-3 w-3"}),"Download"]}),e.jsxs("button",{onClick:j,className:"flex items-center gap-2 w-full px-3 py-2 text-left text-white hover:bg-white/10 text-xs",children:[e.jsx(u,{className:"h-3 w-3"}),"Copy"]})]})]}),e.jsx(i,{variant:"ghost",size:"sm",onClick:f,className:"text-white hover:bg-white/10 h-8 w-8 p-0",title:"Print",children:e.jsx(z,{className:"h-3 w-3"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:async()=>{try{navigator.share&&navigator.canShare?await navigator.share({title:a,text:`Check out this document: ${a}`,url:window.location.href}):(await navigator.clipboard.writeText(s),alert("Document link copied to clipboard!"))}catch(t){console.error("Share failed:",t);try{await navigator.clipboard.writeText(s),alert("Document link copied to clipboard!")}catch{alert("Unable to share or copy link")}}},className:"text-white hover:bg-white/10 h-8 w-8 p-0",title:"Share",children:e.jsx(C,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:b,className:"text-white hover:bg-white/10",title:"Rotate",children:e.jsx(k,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-white/20 mx-2"}),e.jsxs("div",{className:"relative",children:[e.jsxs(i,{variant:"ghost",size:"sm",onClick:()=>l(!c),className:"text-white hover:bg-white/10 flex items-center gap-1",title:"Download Options",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden lg:inline",children:"Download"})]}),c&&e.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-black/90 border border-white/20 rounded-lg shadow-lg z-50 min-w-[160px]",onClick:t=>t.stopPropagation(),onWheel:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-white/20",children:[e.jsx("span",{className:"text-white text-sm font-medium",children:"Download Options"}),e.jsx("button",{onClick:()=>l(!1),className:"text-white hover:bg-white/10 rounded p-1",children:e.jsx(h,{className:"h-4 w-4"})})]}),e.jsxs("button",{onClick:y,className:"flex items-center gap-2 w-full px-4 py-3 text-left text-white hover:bg-white/10 text-sm",children:[e.jsx(p,{className:"h-4 w-4"}),"Download Image"]}),e.jsxs("button",{onClick:j,className:"flex items-center gap-2 w-full px-4 py-3 text-left text-white hover:bg-white/10 text-sm",children:[e.jsx(u,{className:"h-4 w-4"}),"Copy Image"]})]})]}),e.jsx("div",{className:"w-px h-6 bg-white/20 mx-2"}),e.jsxs(i,{variant:"ghost",size:"sm",onClick:f,className:"text-white hover:bg-white/10 flex items-center gap-1",title:"Print",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden lg:inline",children:"Print"})]}),e.jsxs(i,{variant:"ghost",size:"sm",onClick:I,className:"text-white hover:bg-white/10 flex items-center gap-1",title:"Share",children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden lg:inline",children:"Share"})]}),e.jsxs(i,{variant:"ghost",size:"sm",onClick:d,className:"text-white hover:bg-white/10 flex items-center gap-1",title:"Close",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden lg:inline",children:"Close"})]})]}),e.jsx(i,{variant:"ghost",size:"sm",onClick:d,className:"sm:hidden text-white hover:bg-white/10 h-8 w-8 p-0",title:"Close",children:e.jsx(h,{className:"h-3 w-3"})})]})]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 overflow-hidden relative",children:e.jsx("div",{className:"relative max-w-full max-h-full flex items-center justify-center",style:{transform:`scale(${r/100}) rotate(${x}deg)`,transition:"transform 0.2s ease"},onWheel:t=>t.stopPropagation(),children:e.jsx("img",{src:s,alt:a,className:"max-w-full max-h-[calc(100vh-140px)] sm:max-h-[calc(100vh-160px)] object-contain",onWheel:t=>t.stopPropagation()})})}),e.jsx("div",{className:"bg-black border-t border-white/10 p-2 text-center",children:e.jsxs("p",{className:"text-white/70 text-xs",children:[r!==100?`Zoom: ${r}% • `:"",x!==0?`Rotation: ${x}° • `:"","Click outside to close"]})})]})};export{_ as default};
