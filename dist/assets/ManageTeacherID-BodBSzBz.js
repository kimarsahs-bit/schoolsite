import{c as H,u as se,r as h,j as e,m as o,B as l,X as ae,l as x}from"./index-vcAYm6vD.js";import{I as D}from"./input-CVoIJ2zH.js";import{T as te,a as re,b as L,c as p,d as le,e as u,A as q,f as F,B as ie}from"./avatar-CGCYeeC4.js";import{B as ce}from"./badge-LmcNerN7.js";import{C,a as T,b as I,d as k,c as ne}from"./card-yB6fowr0.js";import{A as de}from"./arrow-left-DhQ25n61.js";import{P as oe}from"./plus-CSXBcpgr.js";import{C as E}from"./circle-check-big-DY665Rq5.js";import{T as z}from"./triangle-alert-4JHNBv83.js";import{S as me}from"./search-DaWYlKik.js";import{C as A}from"./copy-Bub14O3W.js";import{E as xe}from"./eye-CF1wM1sA.js";import{S as he}from"./square-pen-BVw1FIsV.js";import{R as $}from"./refresh-cw-CAHL2gzR.js";import{T as ue}from"./trash-2-04KiNg8K.js";import{S as je}from"./shield-BnzExLJS.js";import{S as pe}from"./save-5ZuEQXRf.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=H("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=H("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),Je=()=>{const J=se(),[j,g]=h.useState([]),[b,X]=h.useState(""),[G,P]=h.useState(!0),[i,K]=h.useState(null),[Q,N]=h.useState(!1),[U,y]=h.useState(!1),[m,w]=h.useState(null);h.useEffect(()=>{const s=()=>{try{const n=JSON.parse(localStorage.getItem("royal-academy-auth-teachers")||"[]").map(a=>({id:a.id||a.teacherId,teacherId:a.teacherId||a.id,name:a.username||a.name,email:a.email,subject:a.subject||"N/A",username:a.username||a.name,password:a.password||"N/A",status:a.status||"active",createdAt:a.createdAt||new Date().toISOString(),lastLogin:a.lastLogin,loginAttempts:a.loginAttempts||0})).filter((a,d,c)=>d===c.findIndex(S=>S.teacherId===a.teacherId));g(n),P(!1)}catch(r){console.error("Error loading teacher IDs:",r),g([]),P(!1)}};s();const t=r=>{r.key==="royal-academy-auth-teachers"&&s()};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[]);const B=j.filter(s=>s.name.toLowerCase().includes(b.toLowerCase())||s.email.toLowerCase().includes(b.toLowerCase())||s.teacherId.toLowerCase().includes(b.toLowerCase())||s.subject.toLowerCase().includes(b.toLowerCase())),M=s=>{const t=V();try{const f=JSON.parse(localStorage.getItem("royal-academy-auth-teachers")||"[]").map(n=>n.id===s||n.teacherId===s?{...n,password:t,loginAttempts:0}:n);localStorage.setItem("royal-academy-auth-teachers",JSON.stringify(f)),g(n=>n.map(a=>a.id===s?{...a,password:t,loginAttempts:0}:a)),x.success(`Password reset successfully! New password: ${t}`)}catch(r){console.error("Error resetting password:",r),x.error("Failed to reset password")}},V=()=>{const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let r=0;r<8;r++)t+=s.charAt(Math.floor(Math.random()*s.length));return t},R=s=>{try{const t=j.find(c=>c.id===s),r=(t==null?void 0:t.status)==="banned"?"active":"banned",n=JSON.parse(localStorage.getItem("royal-academy-auth-teachers")||"[]").map(c=>c.id===s||c.teacherId===s?{...c,status:r}:c);localStorage.setItem("royal-academy-auth-teachers",JSON.stringify(n));const d=JSON.parse(localStorage.getItem("royal-academy-teachers")||"[]").map(c=>c.id===s?{...c,status:r}:c);localStorage.setItem("royal-academy-teachers",JSON.stringify(d)),g(c=>c.map(S=>S.id===s?{...S,status:r}:S)),x.success(`Teacher ${r==="banned"?"banned":"activated"} successfully`)}catch(t){console.error("Error updating status:",t),x.error("Failed to update teacher status")}},W=s=>{const t=j.find(r=>r.id===s);if(window.confirm(`Are you sure you want to delete ${t==null?void 0:t.name}'s ID? This will permanently remove their login access.`))try{const f=JSON.parse(localStorage.getItem("royal-academy-auth-teachers")||"[]").filter(d=>d.id!==s&&d.teacherId!==s);localStorage.setItem("royal-academy-auth-teachers",JSON.stringify(f));const a=JSON.parse(localStorage.getItem("royal-academy-teachers")||"[]").filter(d=>d.id!==s);localStorage.setItem("royal-academy-teachers",JSON.stringify(a)),g(d=>d.filter(c=>c.id!==s)),x.success("Teacher ID deleted successfully")}catch(r){console.error("Error deleting teacher ID:",r),x.error("Failed to delete teacher ID")}},v=(s,t)=>{navigator.clipboard.writeText(s).then(()=>{x.success(`${t} copied to clipboard!`)})},Y=s=>{K(s),N(!0)},Z=s=>{w(s),y(!0)},_=s=>{try{const r=JSON.parse(localStorage.getItem("royal-academy-auth-teachers")||"[]").map(a=>a.id===s.id||a.teacherId===s.id?{...a,username:s.name,name:s.name,email:s.email,subject:s.subject}:a);localStorage.setItem("royal-academy-auth-teachers",JSON.stringify(r));const n=JSON.parse(localStorage.getItem("royal-academy-teachers")||"[]").map(a=>a.id===s.id?{...a,name:s.name,email:s.email,subject:s.subject}:a);localStorage.setItem("royal-academy-teachers",JSON.stringify(n)),g(a=>a.map(d=>d.id===s.id?s:d)),y(!1),w(null),x.success("Teacher information updated successfully")}catch(t){console.error("Error updating teacher:",t),x.error("Failed to update teacher information")}},ee=s=>{switch(s){case"active":return e.jsx(E,{className:"h-4 w-4 text-green-500"});case"banned":return e.jsx(O,{className:"h-4 w-4 text-red-500"});case"suspended":return e.jsx(z,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(E,{className:"h-4 w-4 text-green-500"})}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-royal via-royal/90 to-gold/20 p-4",children:e.jsxs("div",{className:"container mx-auto max-w-7xl",children:[e.jsx(o.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-card/95 backdrop-blur-md border border-border/50 rounded-lg mb-6 p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-start sm:items-center gap-2 sm:gap-4 w-full sm:w-auto",children:[e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>J("/principal-dashboard"),className:"rounded-full text-white hover:bg-white/10 flex-shrink-0",title:"Go Back",children:e.jsx(de,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white truncate",children:"Manage Teacher IDs"}),e.jsx("p",{className:"text-xs sm:text-sm text-white/80",children:"Manage login credentials and access"})]})]}),e.jsxs(l,{onClick:()=>J("/create-teacher-id"),variant:"outline",className:"gap-2 text-white border-white/20 hover:bg-white/10 w-full sm:w-auto",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Go to Create"}),e.jsx("span",{className:"sm:hidden",children:"Create"})]})]})}),e.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 mb-6",children:[e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs(C,{className:"bg-card/95 backdrop-blur-md border-border/50",children:[e.jsxs(T,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-xs sm:text-sm font-medium",children:"Total Teacher IDs"}),e.jsx(ge,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]}),e.jsxs(k,{children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:j.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total registered IDs"})]})]})}),e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(C,{className:"bg-card/95 backdrop-blur-md border-border/50",children:[e.jsxs(T,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-xs sm:text-sm font-medium",children:"Active IDs"}),e.jsx(E,{className:"h-4 w-4 text-green-500 flex-shrink-0"})]}),e.jsxs(k,{children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:j.filter(s=>s.status==="active").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Can login"})]})]})}),e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsxs(C,{className:"bg-card/95 backdrop-blur-md border-border/50",children:[e.jsxs(T,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-xs sm:text-sm font-medium",children:"Banned IDs"}),e.jsx(O,{className:"h-4 w-4 text-red-500 flex-shrink-0"})]}),e.jsxs(k,{children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:j.filter(s=>s.status==="banned").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Access blocked"})]})]})}),e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsxs(C,{className:"bg-card/95 backdrop-blur-md border-border/50",children:[e.jsxs(T,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-xs sm:text-sm font-medium",children:"Login Issues"}),e.jsx(z,{className:"h-4 w-4 text-yellow-500 flex-shrink-0"})]}),e.jsxs(k,{children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:j.filter(s=>s.loginAttempts>3).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Failed attempts"})]})]})})]}),e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsxs(C,{className:"bg-card/95 backdrop-blur-md border-border/50",children:[e.jsx(T,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-lg sm:text-xl",children:"Teacher Login IDs"}),e.jsx(ne,{className:"text-xs sm:text-sm",children:"Manage teacher authentication credentials and access"})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsx(me,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(D,{type:"search",placeholder:"Search by name, email, or ID...",className:"w-full pl-8 text-sm",value:b,onChange:s=>X(s.target.value)})]})]})}),e.jsx(k,{children:G?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(te,{children:[e.jsx(re,{children:e.jsxs(L,{children:[e.jsx(p,{children:"Teacher"}),e.jsx(p,{children:"Teacher ID"}),e.jsx(p,{children:"Subject"}),e.jsx(p,{children:"Status"}),e.jsx(p,{children:"Login Attempts"}),e.jsx(p,{children:"Created"}),e.jsx(p,{className:"text-right",children:"Actions"})]})}),e.jsx(le,{children:B.length>0?B.map(s=>e.jsxs(L,{children:[e.jsx(u,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"h-9 w-9",children:e.jsx(F,{children:s.name.split(" ").map(t=>t[0]).join("")})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.email})]})]})}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"text-sm bg-muted px-2 py-1 rounded",children:s.teacherId}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>v(s.teacherId,"Teacher ID"),children:e.jsx(A,{className:"h-3 w-3"})})]})}),e.jsx(u,{children:s.subject}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[ee(s.status),e.jsx(ce,{variant:s.status==="banned"?"destructive":s.status==="suspended"?"secondary":"default",children:s.status==="banned"?"Banned":s.status==="suspended"?"Suspended":"Active"})]})}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm ${s.loginAttempts>3?"text-red-500 font-medium":"text-muted-foreground"}`,children:s.loginAttempts}),s.loginAttempts>3&&e.jsx(z,{className:"h-4 w-4 text-yellow-500"})]})}),e.jsx(u,{children:new Date(s.createdAt).toLocaleDateString()}),e.jsx(u,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>Y(s),title:"View Credentials",children:e.jsx(xe,{className:"h-4 w-4"})}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>Z(s),title:"Edit Teacher Info",className:"text-blue-600 hover:text-blue-700",children:e.jsx(he,{className:"h-4 w-4"})}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>M(s.id),title:"Reset Password",className:"text-purple-600 hover:text-purple-700",children:e.jsx($,{className:"h-4 w-4"})}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>R(s.id),title:s.status==="banned"?"Activate":"Ban",className:s.status==="banned"?"text-green-600 hover:text-green-700":"text-red-600 hover:text-red-700",children:e.jsx(ie,{className:"h-4 w-4"})}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>W(s.id),title:"Delete ID",className:"text-destructive hover:text-destructive",children:e.jsx(ue,{className:"h-4 w-4"})})]})})]},s.id)):e.jsx(L,{children:e.jsx(u,{colSpan:7,className:"h-24 text-center",children:"No teacher IDs found."})})})]})})})]})}),Q&&i&&e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>N(!1),children:e.jsxs(o.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-card rounded-2xl shadow-2xl border border-border/50 w-full max-w-md",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border/50",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Login Credentials"}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>N(!1),className:"rounded-full",children:e.jsx(O,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(q,{className:"h-16 w-16 mx-auto mb-3",children:e.jsx(F,{className:"text-lg",children:i.name.split(" ").map(s=>s[0]).join("")})}),e.jsx("h3",{className:"text-lg font-bold",children:i.name}),e.jsx("p",{className:"text-muted-foreground",children:i.subject})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-muted/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Teacher ID"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>v(i.teacherId,"Teacher ID"),children:e.jsx(A,{className:"h-3 w-3"})})]}),e.jsx("code",{className:"text-sm",children:i.teacherId})]}),e.jsxs("div",{className:"p-3 bg-muted/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Username"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>v(i.username,"Username"),children:e.jsx(A,{className:"h-3 w-3"})})]}),e.jsx("code",{className:"text-sm",children:i.username})]}),e.jsxs("div",{className:"p-3 bg-muted/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Password"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>v(i.password,"Password"),children:e.jsx(A,{className:"h-3 w-3"})})]}),e.jsx("code",{className:"text-sm",children:i.password})]}),e.jsxs("div",{className:"p-3 bg-muted/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"text-sm font-medium",children:"Email"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>v(i.email,"Email"),children:e.jsx(A,{className:"h-3 w-3"})})]}),e.jsx("code",{className:"text-sm",children:i.email})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>{M(i.id),N(!1)},className:"flex-1",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Reset Password"]}),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>{R(i.id),N(!1)},className:i.status==="banned"?"text-green-600":"text-red-600",children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),i.status==="banned"?"Activate":"Ban"]})]})]})]})}),U&&m&&e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>y(!1),children:e.jsxs(o.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-card rounded-2xl shadow-2xl border border-border/50 w-full max-w-md",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border/50",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Edit Teacher Information"}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>y(!1),className:"rounded-full",children:e.jsx(ae,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:s=>{s.preventDefault(),_(m)},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Teacher Name"}),e.jsx(D,{value:m.name,onChange:s=>w({...m,name:s.target.value}),placeholder:"Full name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Email"}),e.jsx(D,{type:"email",value:m.email,onChange:s=>w({...m,email:s.target.value}),placeholder:"email@example.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Subject"}),e.jsx(D,{value:m.subject,onChange:s=>w({...m,subject:s.target.value}),placeholder:"Mathematics, Physics, etc.",required:!0})]}),e.jsxs("div",{className:"bg-muted/20 p-3 rounded-lg",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Teacher ID (Read-only)"}),e.jsx("p",{className:"text-sm font-mono",children:m.teacherId})]})]}),e.jsxs("div",{className:"flex gap-2 mt-6",children:[e.jsxs(l,{type:"submit",className:"flex-1",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Save Changes"]}),e.jsx(l,{type:"button",variant:"outline",onClick:()=>y(!1),children:"Cancel"})]})]})})]})})]})})};export{Je as default};
